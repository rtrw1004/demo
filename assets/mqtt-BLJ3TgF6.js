var Ya=Object.defineProperty;var uo=h=>{throw TypeError(h)};var Ja=(h,f,s)=>f in h?Ya(h,f,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[f]=s;var Ie=(h,f,s)=>Ja(h,typeof f!="symbol"?f+"":f,s),zr=(h,f,s)=>f.has(h)||uo("Cannot "+s);var U=(h,f,s)=>(zr(h,f,"read from private field"),s?s.call(h):f.get(h)),Ue=(h,f,s)=>f.has(h)?uo("Cannot add the same private member more than once"):f instanceof WeakSet?f.add(h):f.set(h,s),Ce=(h,f,s,l)=>(zr(h,f,"write to private field"),l?l.call(h,s):f.set(h,s),s),Pe=(h,f,s)=>(zr(h,f,"access private method"),s);var sr=(h,f,s,l)=>({set _(c){Ce(h,f,c,s)},get _(){return U(h,f,l)}});var Qi=Object.defineProperty,Xa=Object.getOwnPropertyDescriptor,Za=Object.getOwnPropertyNames,el=Object.prototype.hasOwnProperty,it=(h,f)=>()=>(h&&(f=h(h=0)),f),me=(h,f)=>()=>(f||h((f={exports:{}}).exports,f),f.exports),$t=(h,f)=>{for(var s in f)Qi(h,s,{get:f[s],enumerable:!0})},tl=(h,f,s,l)=>{if(f&&typeof f=="object"||typeof f=="function")for(let c of Za(f))!el.call(h,c)&&c!==s&&Qi(h,c,{get:()=>f[c],enumerable:!(l=Xa(f,c))||l.enumerable});return h},Fe=h=>tl(Qi({},"__esModule",{value:!0}),h),he=it(()=>{}),Le={};$t(Le,{_debugEnd:()=>On,_debugProcess:()=>Tn,_events:()=>$n,_eventsCount:()=>zn,_exiting:()=>pn,_fatalExceptions:()=>An,_getActiveHandles:()=>xs,_getActiveRequests:()=>Is,_kill:()=>yn,_linkedBinding:()=>Es,_maxListeners:()=>qn,_preload_modules:()=>Fn,_rawDebug:()=>cn,_startProfilerIdleNotifier:()=>kn,_stopProfilerIdleNotifier:()=>Pn,_tickCallback:()=>xn,abort:()=>jn,addListener:()=>Vn,allowedNodeEnvironmentFlags:()=>Sn,arch:()=>Qr,argv:()=>Xr,argv0:()=>Dn,assert:()=>Ts,binding:()=>nn,browser:()=>un,chdir:()=>an,config:()=>dn,cpuUsage:()=>Yt,cwd:()=>sn,debugPort:()=>Ln,default:()=>Ji,dlopen:()=>As,domain:()=>hn,emit:()=>Yn,emitWarning:()=>rn,env:()=>Jr,execArgv:()=>Zr,execPath:()=>Un,exit:()=>wn,features:()=>En,hasUncaughtExceptionCaptureCallback:()=>Os,hrtime:()=>ur,kill:()=>vn,listeners:()=>Ps,memoryUsage:()=>mn,moduleLoadList:()=>fn,nextTick:()=>_s,off:()=>Hn,on:()=>ht,once:()=>Kn,openStdin:()=>_n,pid:()=>Nn,platform:()=>Yr,ppid:()=>Bn,prependListener:()=>Jn,prependOnceListener:()=>Xn,reallyExit:()=>gn,release:()=>ln,removeAllListeners:()=>Qn,removeListener:()=>Gn,resourceUsage:()=>bn,setSourceMapsEnabled:()=>Wn,setUncaughtExceptionCaptureCallback:()=>In,stderr:()=>Cn,stdin:()=>Mn,stdout:()=>Rn,title:()=>Gr,umask:()=>on,uptime:()=>ks,version:()=>en,versions:()=>tn});function Yi(h){throw new Error("Node.js process "+h+" is not supported by JSPM core outside of Node.js")}function rl(){!Nt||!Mt||(Nt=!1,Mt.length?ut=Mt.concat(ut):er=-1,ut.length&&ws())}function ws(){if(!Nt){var h=setTimeout(rl,0);Nt=!0;for(var f=ut.length;f;){for(Mt=ut,ut=[];++er<f;)Mt&&Mt[er].run();er=-1,f=ut.length}Mt=null,Nt=!1,clearTimeout(h)}}function _s(h){var f=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)f[s-1]=arguments[s];ut.push(new Ss(h,f)),ut.length===1&&!Nt&&setTimeout(ws,0)}function Ss(h,f){this.fun=h,this.array=f}function Xe(){}function Es(h){Yi("_linkedBinding")}function As(h){Yi("dlopen")}function Is(){return[]}function xs(){return[]}function Ts(h,f){if(!h)throw new Error(f||"assertion error")}function Os(){return!1}function ks(){return dt.now()/1e3}function ur(h){var f=Math.floor((Date.now()-dt.now())*.001),s=dt.now()*.001,l=Math.floor(s)+f,c=Math.floor(s%1*1e9);return h&&(l=l-h[0],c=c-h[1],c<0&&(l--,c+=cr)),[l,c]}function ht(){return Ji}function Ps(h){return[]}var ut,Nt,Mt,er,Gr,Qr,Yr,Jr,Xr,Zr,en,tn,rn,nn,on,sn,an,ln,un,cn,fn,hn,pn,dn,gn,yn,Yt,bn,mn,vn,wn,_n,Sn,En,An,In,xn,Tn,On,kn,Pn,Rn,Cn,Mn,jn,Nn,Bn,Un,Ln,Dn,Fn,Wn,dt,Vr,cr,qn,$n,zn,Vn,Kn,Hn,Gn,Qn,Yn,Jn,Xn,Ji,nl=it(()=>{he(),de(),pe(),ut=[],Nt=!1,er=-1,Ss.prototype.run=function(){this.fun.apply(null,this.array)},Gr="browser",Qr="x64",Yr="browser",Jr={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},Xr=["/usr/bin/node"],Zr=[],en="v16.8.0",tn={},rn=function(h,f){console.warn((f?f+": ":"")+h)},nn=function(h){Yi("binding")},on=function(h){return 0},sn=function(){return"/"},an=function(h){},ln={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},un=!0,cn=Xe,fn=[],hn={},pn=!1,dn={},gn=Xe,yn=Xe,Yt=function(){return{}},bn=Yt,mn=Yt,vn=Xe,wn=Xe,_n=Xe,Sn={},En={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},An=Xe,In=Xe,xn=Xe,Tn=Xe,On=Xe,kn=Xe,Pn=Xe,Rn=void 0,Cn=void 0,Mn=void 0,jn=Xe,Nn=2,Bn=1,Un="/bin/usr/node",Ln=9229,Dn="node",Fn=[],Wn=Xe,dt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},dt.now===void 0&&(Vr=Date.now(),dt.timing&&dt.timing.navigationStart&&(Vr=dt.timing.navigationStart),dt.now=()=>Date.now()-Vr),cr=1e9,ur.bigint=function(h){var f=ur(h);return typeof BigInt>"u"?f[0]*cr+f[1]:BigInt(f[0]*cr)+BigInt(f[1])},qn=10,$n={},zn=0,Vn=ht,Kn=ht,Hn=ht,Gn=ht,Qn=ht,Yn=Xe,Jn=ht,Xn=ht,Ji={version:en,versions:tn,arch:Qr,platform:Yr,browser:un,release:ln,_rawDebug:cn,moduleLoadList:fn,binding:nn,_linkedBinding:Es,_events:$n,_eventsCount:zn,_maxListeners:qn,on:ht,addListener:Vn,once:Kn,off:Hn,removeListener:Gn,removeAllListeners:Qn,emit:Yn,prependListener:Jn,prependOnceListener:Xn,listeners:Ps,domain:hn,_exiting:pn,config:dn,dlopen:As,uptime:ks,_getActiveRequests:Is,_getActiveHandles:xs,reallyExit:gn,_kill:yn,cpuUsage:Yt,resourceUsage:bn,memoryUsage:mn,kill:vn,exit:wn,openStdin:_n,allowedNodeEnvironmentFlags:Sn,assert:Ts,features:En,_fatalExceptions:An,setUncaughtExceptionCaptureCallback:In,hasUncaughtExceptionCaptureCallback:Os,emitWarning:rn,nextTick:_s,_tickCallback:xn,_debugProcess:Tn,_debugEnd:On,_startProfilerIdleNotifier:kn,_stopProfilerIdleNotifier:Pn,stdout:Rn,stdin:Mn,stderr:Cn,abort:jn,umask:on,chdir:an,cwd:sn,env:Jr,title:Gr,argv:Xr,execArgv:Zr,pid:Nn,ppid:Bn,execPath:Un,debugPort:Ln,hrtime:ur,argv0:Dn,_preload_modules:Fn,setSourceMapsEnabled:Wn}}),pe=it(()=>{nl()});function il(){if(Zn)return Ft;Zn=!0,Ft.byteLength=r,Ft.toByteArray=i,Ft.fromByteArray=p;for(var h=[],f=[],s=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,n=l.length;c<n;++c)h[c]=l[c],f[l.charCodeAt(c)]=c;f[45]=62,f[95]=63;function t(b){var m=b.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=b.indexOf("=");S===-1&&(S=m);var w=S===m?0:4-S%4;return[S,w]}function r(b){var m=t(b),S=m[0],w=m[1];return(S+w)*3/4-w}function e(b,m,S){return(m+S)*3/4-S}function i(b){var m,S=t(b),w=S[0],A=S[1],g=new s(e(b,w,A)),_=0,E=A>0?w-4:w,v;for(v=0;v<E;v+=4)m=f[b.charCodeAt(v)]<<18|f[b.charCodeAt(v+1)]<<12|f[b.charCodeAt(v+2)]<<6|f[b.charCodeAt(v+3)],g[_++]=m>>16&255,g[_++]=m>>8&255,g[_++]=m&255;return A===2&&(m=f[b.charCodeAt(v)]<<2|f[b.charCodeAt(v+1)]>>4,g[_++]=m&255),A===1&&(m=f[b.charCodeAt(v)]<<10|f[b.charCodeAt(v+1)]<<4|f[b.charCodeAt(v+2)]>>2,g[_++]=m>>8&255,g[_++]=m&255),g}function a(b){return h[b>>18&63]+h[b>>12&63]+h[b>>6&63]+h[b&63]}function d(b,m,S){for(var w,A=[],g=m;g<S;g+=3)w=(b[g]<<16&16711680)+(b[g+1]<<8&65280)+(b[g+2]&255),A.push(a(w));return A.join("")}function p(b){for(var m,S=b.length,w=S%3,A=[],g=16383,_=0,E=S-w;_<E;_+=g)A.push(d(b,_,_+g>E?E:_+g));return w===1?(m=b[S-1],A.push(h[m>>2]+h[m<<4&63]+"==")):w===2&&(m=(b[S-2]<<8)+b[S-1],A.push(h[m>>10]+h[m>>4&63]+h[m<<2&63]+"=")),A.join("")}return Ft}function ol(){return ei?Jt:(ei=!0,Jt.read=function(h,f,s,l,c){var n,t,r=c*8-l-1,e=(1<<r)-1,i=e>>1,a=-7,d=s?c-1:0,p=s?-1:1,b=h[f+d];for(d+=p,n=b&(1<<-a)-1,b>>=-a,a+=r;a>0;n=n*256+h[f+d],d+=p,a-=8);for(t=n&(1<<-a)-1,n>>=-a,a+=l;a>0;t=t*256+h[f+d],d+=p,a-=8);if(n===0)n=1-i;else{if(n===e)return t?NaN:(b?-1:1)*(1/0);t=t+Math.pow(2,l),n=n-i}return(b?-1:1)*t*Math.pow(2,n-l)},Jt.write=function(h,f,s,l,c,n){var t,r,e,i=n*8-c-1,a=(1<<i)-1,d=a>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=l?0:n-1,m=l?1:-1,S=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(r=isNaN(f)?1:0,t=a):(t=Math.floor(Math.log(f)/Math.LN2),f*(e=Math.pow(2,-t))<1&&(t--,e*=2),t+d>=1?f+=p/e:f+=p*Math.pow(2,1-d),f*e>=2&&(t++,e/=2),t+d>=a?(r=0,t=a):t+d>=1?(r=(f*e-1)*Math.pow(2,c),t=t+d):(r=f*Math.pow(2,d-1)*Math.pow(2,c),t=0));c>=8;h[s+b]=r&255,b+=m,r/=256,c-=8);for(t=t<<c|r,i+=c;i>0;h[s+b]=t&255,b+=m,t/=256,i-=8);h[s+b-m]|=S*128},Jt)}function sl(){if(ti)return Et;ti=!0;let h=il(),f=ol(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Et.Buffer=t,Et.SlowBuffer=A,Et.INSPECT_MAX_BYTES=50;let l=2147483647;Et.kMaxLength=l,t.TYPED_ARRAY_SUPPORT=c(),!t.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{let o=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(o,u),o.foo()===42}catch{return!1}}Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}});function n(o){if(o>l)throw new RangeError('The value "'+o+'" is invalid for option "size"');let u=new Uint8Array(o);return Object.setPrototypeOf(u,t.prototype),u}function t(o,u,y){if(typeof o=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return a(o)}return r(o,u,y)}t.poolSize=8192;function r(o,u,y){if(typeof o=="string")return d(o,u);if(ArrayBuffer.isView(o))return b(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(J(o,ArrayBuffer)||o&&J(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(o,SharedArrayBuffer)||o&&J(o.buffer,SharedArrayBuffer)))return m(o,u,y);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let O=o.valueOf&&o.valueOf();if(O!=null&&O!==o)return t.from(O,u,y);let j=S(o);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return t.from(o[Symbol.toPrimitive]("string"),u,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}t.from=function(o,u,y){return r(o,u,y)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array);function e(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function i(o,u,y){return e(o),o<=0?n(o):u!==void 0?typeof y=="string"?n(o).fill(u,y):n(o).fill(u):n(o)}t.alloc=function(o,u,y){return i(o,u,y)};function a(o){return e(o),n(o<0?0:w(o)|0)}t.allocUnsafe=function(o){return a(o)},t.allocUnsafeSlow=function(o){return a(o)};function d(o,u){if((typeof u!="string"||u==="")&&(u="utf8"),!t.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let y=g(o,u)|0,O=n(y),j=O.write(o,u);return j!==y&&(O=O.slice(0,j)),O}function p(o){let u=o.length<0?0:w(o.length)|0,y=n(u);for(let O=0;O<u;O+=1)y[O]=o[O]&255;return y}function b(o){if(J(o,Uint8Array)){let u=new Uint8Array(o);return m(u.buffer,u.byteOffset,u.byteLength)}return p(o)}function m(o,u,y){if(u<0||o.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<u+(y||0))throw new RangeError('"length" is outside of buffer bounds');let O;return u===void 0&&y===void 0?O=new Uint8Array(o):y===void 0?O=new Uint8Array(o,u):O=new Uint8Array(o,u,y),Object.setPrototypeOf(O,t.prototype),O}function S(o){if(t.isBuffer(o)){let u=w(o.length)|0,y=n(u);return y.length===0||o.copy(y,0,0,u),y}if(o.length!==void 0)return typeof o.length!="number"||ve(o.length)?n(0):p(o);if(o.type==="Buffer"&&Array.isArray(o.data))return p(o.data)}function w(o){if(o>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return o|0}function A(o){return+o!=o&&(o=0),t.alloc(+o)}t.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==t.prototype},t.compare=function(o,u){if(J(o,Uint8Array)&&(o=t.from(o,o.offset,o.byteLength)),J(u,Uint8Array)&&(u=t.from(u,u.offset,u.byteLength)),!t.isBuffer(o)||!t.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===u)return 0;let y=o.length,O=u.length;for(let j=0,z=Math.min(y,O);j<z;++j)if(o[j]!==u[j]){y=o[j],O=u[j];break}return y<O?-1:O<y?1:0},t.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(o,u){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return t.alloc(0);let y;if(u===void 0)for(u=0,y=0;y<o.length;++y)u+=o[y].length;let O=t.allocUnsafe(u),j=0;for(y=0;y<o.length;++y){let z=o[y];if(J(z,Uint8Array))j+z.length>O.length?(t.isBuffer(z)||(z=t.from(z)),z.copy(O,j)):Uint8Array.prototype.set.call(O,z,j);else if(t.isBuffer(z))z.copy(O,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=z.length}return O};function g(o,u){if(t.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||J(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);let y=o.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&y===0)return 0;let j=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Q(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return ge(o).length;default:if(j)return O?-1:Q(o).length;u=(""+u).toLowerCase(),j=!0}}t.byteLength=g;function _(o,u,y){let O=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,u>>>=0,y<=u))return"";for(o||(o="utf8");;)switch(o){case"hex":return Z(this,u,y);case"utf8":case"utf-8":return q(this,u,y);case"ascii":return ae(this,u,y);case"latin1":case"binary":return te(this,u,y);case"base64":return x(this,u,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,u,y);default:if(O)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),O=!0}}t.prototype._isBuffer=!0;function E(o,u,y){let O=o[u];o[u]=o[y],o[y]=O}t.prototype.swap16=function(){let o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<o;u+=2)E(this,u,u+1);return this},t.prototype.swap32=function(){let o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<o;u+=4)E(this,u,u+3),E(this,u+1,u+2);return this},t.prototype.swap64=function(){let o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<o;u+=8)E(this,u,u+7),E(this,u+1,u+6),E(this,u+2,u+5),E(this,u+3,u+4);return this},t.prototype.toString=function(){let o=this.length;return o===0?"":arguments.length===0?q(this,0,o):_.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(o){if(!t.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:t.compare(this,o)===0},t.prototype.inspect=function(){let o="",u=Et.INSPECT_MAX_BYTES;return o=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(o+=" ... "),"<Buffer "+o+">"},s&&(t.prototype[s]=t.prototype.inspect),t.prototype.compare=function(o,u,y,O,j){if(J(o,Uint8Array)&&(o=t.from(o,o.offset,o.byteLength)),!t.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(u===void 0&&(u=0),y===void 0&&(y=o?o.length:0),O===void 0&&(O=0),j===void 0&&(j=this.length),u<0||y>o.length||O<0||j>this.length)throw new RangeError("out of range index");if(O>=j&&u>=y)return 0;if(O>=j)return-1;if(u>=y)return 1;if(u>>>=0,y>>>=0,O>>>=0,j>>>=0,this===o)return 0;let z=j-O,ne=y-u,W=Math.min(z,ne),Y=this.slice(O,j),Ae=o.slice(u,y);for(let Te=0;Te<W;++Te)if(Y[Te]!==Ae[Te]){z=Y[Te],ne=Ae[Te];break}return z<ne?-1:ne<z?1:0};function v(o,u,y,O,j){if(o.length===0)return-1;if(typeof y=="string"?(O=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ve(y)&&(y=j?0:o.length-1),y<0&&(y=o.length+y),y>=o.length){if(j)return-1;y=o.length-1}else if(y<0)if(j)y=0;else return-1;if(typeof u=="string"&&(u=t.from(u,O)),t.isBuffer(u))return u.length===0?-1:C(o,u,y,O,j);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(o,u,y):Uint8Array.prototype.lastIndexOf.call(o,u,y):C(o,[u],y,O,j);throw new TypeError("val must be string, number or Buffer")}function C(o,u,y,O,j){let z=1,ne=o.length,W=u.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(o.length<2||u.length<2)return-1;z=2,ne/=2,W/=2,y/=2}function Y(Te,Oe){return z===1?Te[Oe]:Te.readUInt16BE(Oe*z)}let Ae;if(j){let Te=-1;for(Ae=y;Ae<ne;Ae++)if(Y(o,Ae)===Y(u,Te===-1?0:Ae-Te)){if(Te===-1&&(Te=Ae),Ae-Te+1===W)return Te*z}else Te!==-1&&(Ae-=Ae-Te),Te=-1}else for(y+W>ne&&(y=ne-W),Ae=y;Ae>=0;Ae--){let Te=!0;for(let Oe=0;Oe<W;Oe++)if(Y(o,Ae+Oe)!==Y(u,Oe)){Te=!1;break}if(Te)return Ae}return-1}t.prototype.includes=function(o,u,y){return this.indexOf(o,u,y)!==-1},t.prototype.indexOf=function(o,u,y){return v(this,o,u,y,!0)},t.prototype.lastIndexOf=function(o,u,y){return v(this,o,u,y,!1)};function P(o,u,y,O){y=Number(y)||0;let j=o.length-y;O?(O=Number(O),O>j&&(O=j)):O=j;let z=u.length;O>z/2&&(O=z/2);let ne;for(ne=0;ne<O;++ne){let W=parseInt(u.substr(ne*2,2),16);if(ve(W))return ne;o[y+ne]=W}return ne}function I(o,u,y,O){return we(Q(u,o.length-y),o,y,O)}function k(o,u,y,O){return we(oe(u),o,y,O)}function T(o,u,y,O){return we(ge(u),o,y,O)}function F(o,u,y,O){return we(ye(u,o.length-y),o,y,O)}t.prototype.write=function(o,u,y,O){if(u===void 0)O="utf8",y=this.length,u=0;else if(y===void 0&&typeof u=="string")O=u,y=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(y)?(y=y>>>0,O===void 0&&(O="utf8")):(O=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let j=this.length-u;if((y===void 0||y>j)&&(y=j),o.length>0&&(y<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let z=!1;for(;;)switch(O){case"hex":return P(this,o,u,y);case"utf8":case"utf-8":return I(this,o,u,y);case"ascii":case"latin1":case"binary":return k(this,o,u,y);case"base64":return T(this,o,u,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,o,u,y);default:if(z)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),z=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(o,u,y){return u===0&&y===o.length?h.fromByteArray(o):h.fromByteArray(o.slice(u,y))}function q(o,u,y){y=Math.min(o.length,y);let O=[],j=u;for(;j<y;){let z=o[j],ne=null,W=z>239?4:z>223?3:z>191?2:1;if(j+W<=y){let Y,Ae,Te,Oe;switch(W){case 1:z<128&&(ne=z);break;case 2:Y=o[j+1],(Y&192)===128&&(Oe=(z&31)<<6|Y&63,Oe>127&&(ne=Oe));break;case 3:Y=o[j+1],Ae=o[j+2],(Y&192)===128&&(Ae&192)===128&&(Oe=(z&15)<<12|(Y&63)<<6|Ae&63,Oe>2047&&(Oe<55296||Oe>57343)&&(ne=Oe));break;case 4:Y=o[j+1],Ae=o[j+2],Te=o[j+3],(Y&192)===128&&(Ae&192)===128&&(Te&192)===128&&(Oe=(z&15)<<18|(Y&63)<<12|(Ae&63)<<6|Te&63,Oe>65535&&Oe<1114112&&(ne=Oe))}}ne===null?(ne=65533,W=1):ne>65535&&(ne-=65536,O.push(ne>>>10&1023|55296),ne=56320|ne&1023),O.push(ne),j+=W}return L(O)}let V=4096;function L(o){let u=o.length;if(u<=V)return String.fromCharCode.apply(String,o);let y="",O=0;for(;O<u;)y+=String.fromCharCode.apply(String,o.slice(O,O+=V));return y}function ae(o,u,y){let O="";y=Math.min(o.length,y);for(let j=u;j<y;++j)O+=String.fromCharCode(o[j]&127);return O}function te(o,u,y){let O="";y=Math.min(o.length,y);for(let j=u;j<y;++j)O+=String.fromCharCode(o[j]);return O}function Z(o,u,y){let O=o.length;(!u||u<0)&&(u=0),(!y||y<0||y>O)&&(y=O);let j="";for(let z=u;z<y;++z)j+=Ee[o[z]];return j}function le(o,u,y){let O=o.slice(u,y),j="";for(let z=0;z<O.length-1;z+=2)j+=String.fromCharCode(O[z]+O[z+1]*256);return j}t.prototype.slice=function(o,u){let y=this.length;o=~~o,u=u===void 0?y:~~u,o<0?(o+=y,o<0&&(o=0)):o>y&&(o=y),u<0?(u+=y,u<0&&(u=0)):u>y&&(u=y),u<o&&(u=o);let O=this.subarray(o,u);return Object.setPrototypeOf(O,t.prototype),O};function K(o,u,y){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+u>y)throw new RangeError("Trying to access beyond buffer length")}t.prototype.readUintLE=t.prototype.readUIntLE=function(o,u,y){o=o>>>0,u=u>>>0,y||K(o,u,this.length);let O=this[o],j=1,z=0;for(;++z<u&&(j*=256);)O+=this[o+z]*j;return O},t.prototype.readUintBE=t.prototype.readUIntBE=function(o,u,y){o=o>>>0,u=u>>>0,y||K(o,u,this.length);let O=this[o+--u],j=1;for(;u>0&&(j*=256);)O+=this[o+--u]*j;return O},t.prototype.readUint8=t.prototype.readUInt8=function(o,u){return o=o>>>0,u||K(o,1,this.length),this[o]},t.prototype.readUint16LE=t.prototype.readUInt16LE=function(o,u){return o=o>>>0,u||K(o,2,this.length),this[o]|this[o+1]<<8},t.prototype.readUint16BE=t.prototype.readUInt16BE=function(o,u){return o=o>>>0,u||K(o,2,this.length),this[o]<<8|this[o+1]},t.prototype.readUint32LE=t.prototype.readUInt32LE=function(o,u){return o=o>>>0,u||K(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},t.prototype.readUint32BE=t.prototype.readUInt32BE=function(o,u){return o=o>>>0,u||K(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},t.prototype.readBigUInt64LE=ce(function(o){o=o>>>0,re(o,"offset");let u=this[o],y=this[o+7];(u===void 0||y===void 0)&&be(o,this.length-8);let O=u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,j=this[++o]+this[++o]*2**8+this[++o]*2**16+y*2**24;return BigInt(O)+(BigInt(j)<<BigInt(32))}),t.prototype.readBigUInt64BE=ce(function(o){o=o>>>0,re(o,"offset");let u=this[o],y=this[o+7];(u===void 0||y===void 0)&&be(o,this.length-8);let O=u*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],j=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+y;return(BigInt(O)<<BigInt(32))+BigInt(j)}),t.prototype.readIntLE=function(o,u,y){o=o>>>0,u=u>>>0,y||K(o,u,this.length);let O=this[o],j=1,z=0;for(;++z<u&&(j*=256);)O+=this[o+z]*j;return j*=128,O>=j&&(O-=Math.pow(2,8*u)),O},t.prototype.readIntBE=function(o,u,y){o=o>>>0,u=u>>>0,y||K(o,u,this.length);let O=u,j=1,z=this[o+--O];for(;O>0&&(j*=256);)z+=this[o+--O]*j;return j*=128,z>=j&&(z-=Math.pow(2,8*u)),z},t.prototype.readInt8=function(o,u){return o=o>>>0,u||K(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},t.prototype.readInt16LE=function(o,u){o=o>>>0,u||K(o,2,this.length);let y=this[o]|this[o+1]<<8;return y&32768?y|4294901760:y},t.prototype.readInt16BE=function(o,u){o=o>>>0,u||K(o,2,this.length);let y=this[o+1]|this[o]<<8;return y&32768?y|4294901760:y},t.prototype.readInt32LE=function(o,u){return o=o>>>0,u||K(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},t.prototype.readInt32BE=function(o,u){return o=o>>>0,u||K(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},t.prototype.readBigInt64LE=ce(function(o){o=o>>>0,re(o,"offset");let u=this[o],y=this[o+7];(u===void 0||y===void 0)&&be(o,this.length-8);let O=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(y<<24);return(BigInt(O)<<BigInt(32))+BigInt(u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),t.prototype.readBigInt64BE=ce(function(o){o=o>>>0,re(o,"offset");let u=this[o],y=this[o+7];(u===void 0||y===void 0)&&be(o,this.length-8);let O=(u<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(O)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+y)}),t.prototype.readFloatLE=function(o,u){return o=o>>>0,u||K(o,4,this.length),f.read(this,o,!0,23,4)},t.prototype.readFloatBE=function(o,u){return o=o>>>0,u||K(o,4,this.length),f.read(this,o,!1,23,4)},t.prototype.readDoubleLE=function(o,u){return o=o>>>0,u||K(o,8,this.length),f.read(this,o,!0,52,8)},t.prototype.readDoubleBE=function(o,u){return o=o>>>0,u||K(o,8,this.length),f.read(this,o,!1,52,8)};function ie(o,u,y,O,j,z){if(!t.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>j||u<z)throw new RangeError('"value" argument is out of bounds');if(y+O>o.length)throw new RangeError("Index out of range")}t.prototype.writeUintLE=t.prototype.writeUIntLE=function(o,u,y,O){if(o=+o,u=u>>>0,y=y>>>0,!O){let ne=Math.pow(2,8*y)-1;ie(this,o,u,y,ne,0)}let j=1,z=0;for(this[u]=o&255;++z<y&&(j*=256);)this[u+z]=o/j&255;return u+y},t.prototype.writeUintBE=t.prototype.writeUIntBE=function(o,u,y,O){if(o=+o,u=u>>>0,y=y>>>0,!O){let ne=Math.pow(2,8*y)-1;ie(this,o,u,y,ne,0)}let j=y-1,z=1;for(this[u+j]=o&255;--j>=0&&(z*=256);)this[u+j]=o/z&255;return u+y},t.prototype.writeUint8=t.prototype.writeUInt8=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,1,255,0),this[u]=o&255,u+1},t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,2,65535,0),this[u]=o&255,this[u+1]=o>>>8,u+2},t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,2,65535,0),this[u]=o>>>8,this[u+1]=o&255,u+2},t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,4,4294967295,0),this[u+3]=o>>>24,this[u+2]=o>>>16,this[u+1]=o>>>8,this[u]=o&255,u+4},t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,4,4294967295,0),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4};function M(o,u,y,O,j){ee(u,O,j,o,y,7);let z=Number(u&BigInt(4294967295));o[y++]=z,z=z>>8,o[y++]=z,z=z>>8,o[y++]=z,z=z>>8,o[y++]=z;let ne=Number(u>>BigInt(32)&BigInt(4294967295));return o[y++]=ne,ne=ne>>8,o[y++]=ne,ne=ne>>8,o[y++]=ne,ne=ne>>8,o[y++]=ne,y}function G(o,u,y,O,j){ee(u,O,j,o,y,7);let z=Number(u&BigInt(4294967295));o[y+7]=z,z=z>>8,o[y+6]=z,z=z>>8,o[y+5]=z,z=z>>8,o[y+4]=z;let ne=Number(u>>BigInt(32)&BigInt(4294967295));return o[y+3]=ne,ne=ne>>8,o[y+2]=ne,ne=ne>>8,o[y+1]=ne,ne=ne>>8,o[y]=ne,y+8}t.prototype.writeBigUInt64LE=ce(function(o,u=0){return M(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeBigUInt64BE=ce(function(o,u=0){return G(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))}),t.prototype.writeIntLE=function(o,u,y,O){if(o=+o,u=u>>>0,!O){let W=Math.pow(2,8*y-1);ie(this,o,u,y,W-1,-W)}let j=0,z=1,ne=0;for(this[u]=o&255;++j<y&&(z*=256);)o<0&&ne===0&&this[u+j-1]!==0&&(ne=1),this[u+j]=(o/z>>0)-ne&255;return u+y},t.prototype.writeIntBE=function(o,u,y,O){if(o=+o,u=u>>>0,!O){let W=Math.pow(2,8*y-1);ie(this,o,u,y,W-1,-W)}let j=y-1,z=1,ne=0;for(this[u+j]=o&255;--j>=0&&(z*=256);)o<0&&ne===0&&this[u+j+1]!==0&&(ne=1),this[u+j]=(o/z>>0)-ne&255;return u+y},t.prototype.writeInt8=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,1,127,-128),o<0&&(o=255+o+1),this[u]=o&255,u+1},t.prototype.writeInt16LE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,2,32767,-32768),this[u]=o&255,this[u+1]=o>>>8,u+2},t.prototype.writeInt16BE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,2,32767,-32768),this[u]=o>>>8,this[u+1]=o&255,u+2},t.prototype.writeInt32LE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,4,2147483647,-2147483648),this[u]=o&255,this[u+1]=o>>>8,this[u+2]=o>>>16,this[u+3]=o>>>24,u+4},t.prototype.writeInt32BE=function(o,u,y){return o=+o,u=u>>>0,y||ie(this,o,u,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4},t.prototype.writeBigInt64LE=ce(function(o,u=0){return M(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),t.prototype.writeBigInt64BE=ce(function(o,u=0){return G(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(o,u,y,O,j,z){if(y+O>o.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function $(o,u,y,O,j){return u=+u,y=y>>>0,j||fe(o,u,y,4),f.write(o,u,y,O,23,4),y+4}t.prototype.writeFloatLE=function(o,u,y){return $(this,o,u,!0,y)},t.prototype.writeFloatBE=function(o,u,y){return $(this,o,u,!1,y)};function _e(o,u,y,O,j){return u=+u,y=y>>>0,j||fe(o,u,y,8),f.write(o,u,y,O,52,8),y+8}t.prototype.writeDoubleLE=function(o,u,y){return _e(this,o,u,!0,y)},t.prototype.writeDoubleBE=function(o,u,y){return _e(this,o,u,!1,y)},t.prototype.copy=function(o,u,y,O){if(!t.isBuffer(o))throw new TypeError("argument should be a Buffer");if(y||(y=0),!O&&O!==0&&(O=this.length),u>=o.length&&(u=o.length),u||(u=0),O>0&&O<y&&(O=y),O===y||o.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),o.length-u<O-y&&(O=o.length-u+y);let j=O-y;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,y,O):Uint8Array.prototype.set.call(o,this.subarray(y,O),u),j},t.prototype.fill=function(o,u,y,O){if(typeof o=="string"){if(typeof u=="string"?(O=u,u=0,y=this.length):typeof y=="string"&&(O=y,y=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!t.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(o.length===1){let z=o.charCodeAt(0);(O==="utf8"&&z<128||O==="latin1")&&(o=z)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(u<0||this.length<u||this.length<y)throw new RangeError("Out of range index");if(y<=u)return this;u=u>>>0,y=y===void 0?this.length:y>>>0,o||(o=0);let j;if(typeof o=="number")for(j=u;j<y;++j)this[j]=o;else{let z=t.isBuffer(o)?o:t.from(o,O),ne=z.length;if(ne===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(j=0;j<y-u;++j)this[j+u]=z[j%ne]}return this};let X={};function D(o,u,y){X[o]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}D("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(o,u){return`The "${o}" argument must be of type number. Received type ${typeof u}`},TypeError),D("ERR_OUT_OF_RANGE",function(o,u,y){let O=`The value of "${o}" is out of range.`,j=y;return Number.isInteger(y)&&Math.abs(y)>2**32?j=se(String(y)):typeof y=="bigint"&&(j=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(j=se(j)),j+="n"),O+=` It must be ${u}. Received ${j}`,O},RangeError);function se(o){let u="",y=o.length,O=o[0]==="-"?1:0;for(;y>=O+4;y-=3)u=`_${o.slice(y-3,y)}${u}`;return`${o.slice(0,y)}${u}`}function H(o,u,y){re(u,"offset"),(o[u]===void 0||o[u+y]===void 0)&&be(u,o.length-(y+1))}function ee(o,u,y,O,j,z){if(o>y||o<u){let ne=typeof u=="bigint"?"n":"",W;throw u===0||u===BigInt(0)?W=`>= 0${ne} and < 2${ne} ** ${(z+1)*8}${ne}`:W=`>= -(2${ne} ** ${(z+1)*8-1}${ne}) and < 2 ** ${(z+1)*8-1}${ne}`,new X.ERR_OUT_OF_RANGE("value",W,o)}H(O,j,z)}function re(o,u){if(typeof o!="number")throw new X.ERR_INVALID_ARG_TYPE(u,"number",o)}function be(o,u,y){throw Math.floor(o)!==o?(re(o,y),new X.ERR_OUT_OF_RANGE("offset","an integer",o)):u<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,o)}let ue=/[^+/0-9A-Za-z-_]/g;function N(o){if(o=o.split("=")[0],o=o.trim().replace(ue,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function Q(o,u){u=u||1/0;let y,O=o.length,j=null,z=[];for(let ne=0;ne<O;++ne){if(y=o.charCodeAt(ne),y>55295&&y<57344){if(!j){if(y>56319){(u-=3)>-1&&z.push(239,191,189);continue}else if(ne+1===O){(u-=3)>-1&&z.push(239,191,189);continue}j=y;continue}if(y<56320){(u-=3)>-1&&z.push(239,191,189),j=y;continue}y=(j-55296<<10|y-56320)+65536}else j&&(u-=3)>-1&&z.push(239,191,189);if(j=null,y<128){if((u-=1)<0)break;z.push(y)}else if(y<2048){if((u-=2)<0)break;z.push(y>>6|192,y&63|128)}else if(y<65536){if((u-=3)<0)break;z.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((u-=4)<0)break;z.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return z}function oe(o){let u=[];for(let y=0;y<o.length;++y)u.push(o.charCodeAt(y)&255);return u}function ye(o,u){let y,O,j,z=[];for(let ne=0;ne<o.length&&!((u-=2)<0);++ne)y=o.charCodeAt(ne),O=y>>8,j=y%256,z.push(j),z.push(O);return z}function ge(o){return h.toByteArray(N(o))}function we(o,u,y,O){let j;for(j=0;j<O&&!(j+y>=u.length||j>=o.length);++j)u[j+y]=o[j];return j}function J(o,u){return o instanceof u||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===u.name}function ve(o){return o!==o}let Ee=function(){let o="0123456789abcdef",u=new Array(256);for(let y=0;y<16;++y){let O=y*16;for(let j=0;j<16;++j)u[O+j]=o[y]+o[j]}return u}();function ce(o){return typeof BigInt>"u"?Me:o}function Me(){throw new Error("BigInt not supported")}return Et}var Ft,Zn,Jt,ei,Et,ti,al=it(()=>{he(),de(),pe(),Ft={},Zn=!1,Jt={},ei=!1,Et={},ti=!1}),Ye={};$t(Ye,{Buffer:()=>Br,INSPECT_MAX_BYTES:()=>Rs,default:()=>pt,kMaxLength:()=>Cs});var pt,Br,Rs,Cs,Je=it(()=>{he(),de(),pe(),al(),pt=sl(),pt.Buffer,pt.SlowBuffer,pt.INSPECT_MAX_BYTES,pt.kMaxLength,Br=pt.Buffer,Rs=pt.INSPECT_MAX_BYTES,Cs=pt.kMaxLength}),de=it(()=>{Je()}),Ve=me((h,f)=>{he(),de(),pe();var s=class extends Error{constructor(l){if(!Array.isArray(l))throw new TypeError(`Expected input to be an Array, got ${typeof l}`);let c="";for(let n=0;n<l.length;n++)c+=`    ${l[n].stack}
`;super(c),this.name="AggregateError",this.errors=l}};f.exports={AggregateError:s,ArrayIsArray(l){return Array.isArray(l)},ArrayPrototypeIncludes(l,c){return l.includes(c)},ArrayPrototypeIndexOf(l,c){return l.indexOf(c)},ArrayPrototypeJoin(l,c){return l.join(c)},ArrayPrototypeMap(l,c){return l.map(c)},ArrayPrototypePop(l,c){return l.pop(c)},ArrayPrototypePush(l,c){return l.push(c)},ArrayPrototypeSlice(l,c,n){return l.slice(c,n)},Error,FunctionPrototypeCall(l,c,...n){return l.call(c,...n)},FunctionPrototypeSymbolHasInstance(l,c){return Function.prototype[Symbol.hasInstance].call(l,c)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(l,c){return Object.defineProperties(l,c)},ObjectDefineProperty(l,c,n){return Object.defineProperty(l,c,n)},ObjectGetOwnPropertyDescriptor(l,c){return Object.getOwnPropertyDescriptor(l,c)},ObjectKeys(l){return Object.keys(l)},ObjectSetPrototypeOf(l,c){return Object.setPrototypeOf(l,c)},Promise,PromisePrototypeCatch(l,c){return l.catch(c)},PromisePrototypeThen(l,c,n){return l.then(c,n)},PromiseReject(l){return Promise.reject(l)},PromiseResolve(l){return Promise.resolve(l)},ReflectApply:Reflect.apply,RegExpPrototypeTest(l,c){return l.test(c)},SafeSet:Set,String,StringPrototypeSlice(l,c,n){return l.slice(c,n)},StringPrototypeToLowerCase(l){return l.toLowerCase()},StringPrototypeToUpperCase(l){return l.toUpperCase()},StringPrototypeTrim(l){return l.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(l,c,n){return l.set(c,n)},Boolean,Uint8Array}}),Ms=me((h,f)=>{he(),de(),pe(),f.exports={format(s,...l){return s.replace(/%([sdifj])/g,function(...[c,n]){let t=l.shift();return n==="f"?t.toFixed(6):n==="j"?JSON.stringify(t):n==="s"&&typeof t=="object"?`${t.constructor!==Object?t.constructor.name:""} {}`.trim():t.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}}}}),rt=me((h,f)=>{he(),de(),pe();var{format:s,inspect:l}=Ms(),{AggregateError:c}=Ve(),n=globalThis.AggregateError||c,t=Symbol("kIsNodeError"),r=["string","function","number","object","Function","Object","boolean","bigint","symbol"],e=/^([A-Z][a-z0-9]*)+$/,i="__node_internal_",a={};function d(g,_){if(!g)throw new a.ERR_INTERNAL_ASSERTION(_)}function p(g){let _="",E=g.length,v=g[0]==="-"?1:0;for(;E>=v+4;E-=3)_=`_${g.slice(E-3,E)}${_}`;return`${g.slice(0,E)}${_}`}function b(g,_,E){if(typeof _=="function")return d(_.length<=E.length,`Code: ${g}; The provided arguments length (${E.length}) does not match the required ones (${_.length}).`),_(...E);let v=(_.match(/%[dfijoOs]/g)||[]).length;return d(v===E.length,`Code: ${g}; The provided arguments length (${E.length}) does not match the required ones (${v}).`),E.length===0?_:s(_,...E)}function m(g,_,E){E||(E=Error);class v extends E{constructor(...P){super(b(g,_,P))}toString(){return`${this.name} [${g}]: ${this.message}`}}Object.defineProperties(v.prototype,{name:{value:E.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${g}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),v.prototype.code=g,v.prototype[t]=!0,a[g]=v}function S(g){let _=i+g.name;return Object.defineProperty(g,"name",{value:_}),g}function w(g,_){if(g&&_&&g!==_){if(Array.isArray(_.errors))return _.errors.push(g),_;let E=new n([_,g],_.message);return E.code=_.code,E}return g||_}var A=class extends Error{constructor(g="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new a.ERR_INVALID_ARG_TYPE("options","Object",_);super(g,_),this.code="ABORT_ERR",this.name="AbortError"}};m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(g,_,E)=>{d(typeof g=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let v="The ";g.endsWith(" argument")?v+=`${g} `:v+=`"${g}" ${g.includes(".")?"property":"argument"} `,v+="must be ";let C=[],P=[],I=[];for(let T of _)d(typeof T=="string","All expected entries have to be of type string"),r.includes(T)?C.push(T.toLowerCase()):e.test(T)?P.push(T):(d(T!=="object",'The value "object" should be written as "Object"'),I.push(T));if(P.length>0){let T=C.indexOf("object");T!==-1&&(C.splice(C,T,1),P.push("Object"))}if(C.length>0){switch(C.length){case 1:v+=`of type ${C[0]}`;break;case 2:v+=`one of type ${C[0]} or ${C[1]}`;break;default:{let T=C.pop();v+=`one of type ${C.join(", ")}, or ${T}`}}(P.length>0||I.length>0)&&(v+=" or ")}if(P.length>0){switch(P.length){case 1:v+=`an instance of ${P[0]}`;break;case 2:v+=`an instance of ${P[0]} or ${P[1]}`;break;default:{let T=P.pop();v+=`an instance of ${P.join(", ")}, or ${T}`}}I.length>0&&(v+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(v+="an "),v+=`${I[0]}`;break;case 2:v+=`one of ${I[0]} or ${I[1]}`;break;default:{let T=I.pop();v+=`one of ${I.join(", ")}, or ${T}`}}if(E==null)v+=`. Received ${E}`;else if(typeof E=="function"&&E.name)v+=`. Received function ${E.name}`;else if(typeof E=="object"){var k;if((k=E.constructor)!==null&&k!==void 0&&k.name)v+=`. Received an instance of ${E.constructor.name}`;else{let T=l(E,{depth:-1});v+=`. Received ${T}`}}else{let T=l(E,{colors:!1});T.length>25&&(T=`${T.slice(0,25)}...`),v+=`. Received type ${typeof E} (${T})`}return v},TypeError),m("ERR_INVALID_ARG_VALUE",(g,_,E="is invalid")=>{let v=l(_);return v.length>128&&(v=v.slice(0,128)+"..."),`The ${g.includes(".")?"property":"argument"} '${g}' ${E}. Received ${v}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(g,_,E)=>{var v;let C=E!=null&&(v=E.constructor)!==null&&v!==void 0&&v.name?`instance of ${E.constructor.name}`:`type ${typeof E}`;return`Expected ${g} to be returned from the "${_}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(...g)=>{d(g.length>0,"At least one arg needs to be specified");let _,E=g.length;switch(g=(Array.isArray(g)?g:[g]).map(v=>`"${v}"`).join(" or "),E){case 1:_+=`The ${g[0]} argument`;break;case 2:_+=`The ${g[0]} and ${g[1]} arguments`;break;default:{let v=g.pop();_+=`The ${g.join(", ")}, and ${v} arguments`}break}return`${_} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(g,_,E)=>{d(_,'Missing "range" argument');let v;if(Number.isInteger(E)&&Math.abs(E)>2**32)v=p(String(E));else if(typeof E=="bigint"){v=String(E);let C=BigInt(2)**BigInt(32);(E>C||E<-C)&&(v=p(v)),v+="n"}else v=l(E);return`The value of "${g}" is out of range. It must be ${_}. Received ${v}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),f.exports={AbortError:A,aggregateTwoErrors:S(w),hideStackFrames:S,codes:a}}),rr=me((h,f)=>{he(),de(),pe();var{AbortController:s,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;f.exports=s,f.exports.AbortSignal=l,f.exports.default=s}),kt={};$t(kt,{EventEmitter:()=>js,default:()=>Wt,defaultMaxListeners:()=>Ns,init:()=>Bs,listenerCount:()=>Us,on:()=>Ls,once:()=>Ds});function ll(){if(ri)return Xt;ri=!0;var h=typeof Reflect=="object"?Reflect:null,f=h&&typeof h.apply=="function"?h.apply:function(E,v,C){return Function.prototype.apply.call(E,v,C)},s;h&&typeof h.ownKeys=="function"?s=h.ownKeys:Object.getOwnPropertySymbols?s=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:s=function(E){return Object.getOwnPropertyNames(E)};function l(E){console&&console.warn&&console.warn(E)}var c=Number.isNaN||function(E){return E!==E};function n(){n.init.call(this)}Xt=n,Xt.once=A,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var t=10;function r(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(E){if(typeof E!="number"||E<0||c(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");t=E}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||c(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function e(E){return E._maxListeners===void 0?n.defaultMaxListeners:E._maxListeners}n.prototype.getMaxListeners=function(){return e(this)},n.prototype.emit=function(E){for(var v=[],C=1;C<arguments.length;C++)v.push(arguments[C]);var P=E==="error",I=this._events;if(I!==void 0)P=P&&I.error===void 0;else if(!P)return!1;if(P){var k;if(v.length>0&&(k=v[0]),k instanceof Error)throw k;var T=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw T.context=k,T}var F=I[E];if(F===void 0)return!1;if(typeof F=="function")f(F,this,v);else for(var x=F.length,q=m(F,x),C=0;C<x;++C)f(q[C],this,v);return!0};function i(E,v,C,P){var I,k,T;if(r(C),k=E._events,k===void 0?(k=E._events=Object.create(null),E._eventsCount=0):(k.newListener!==void 0&&(E.emit("newListener",v,C.listener?C.listener:C),k=E._events),T=k[v]),T===void 0)T=k[v]=C,++E._eventsCount;else if(typeof T=="function"?T=k[v]=P?[C,T]:[T,C]:P?T.unshift(C):T.push(C),I=e(E),I>0&&T.length>I&&!T.warned){T.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=E,F.type=v,F.count=T.length,l(F)}return E}n.prototype.addListener=function(E,v){return i(this,E,v,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(E,v){return i(this,E,v,!0)};function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,v,C){var P={fired:!1,wrapFn:void 0,target:E,type:v,listener:C},I=a.bind(P);return I.listener=C,P.wrapFn=I,I}n.prototype.once=function(E,v){return r(v),this.on(E,d(this,E,v)),this},n.prototype.prependOnceListener=function(E,v){return r(v),this.prependListener(E,d(this,E,v)),this},n.prototype.removeListener=function(E,v){var C,P,I,k,T;if(r(v),P=this._events,P===void 0)return this;if(C=P[E],C===void 0)return this;if(C===v||C.listener===v)--this._eventsCount===0?this._events=Object.create(null):(delete P[E],P.removeListener&&this.emit("removeListener",E,C.listener||v));else if(typeof C!="function"){for(I=-1,k=C.length-1;k>=0;k--)if(C[k]===v||C[k].listener===v){T=C[k].listener,I=k;break}if(I<0)return this;I===0?C.shift():S(C,I),C.length===1&&(P[E]=C[0]),P.removeListener!==void 0&&this.emit("removeListener",E,T||v)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(E){var v,C,P;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[E]),this;if(arguments.length===0){var I=Object.keys(C),k;for(P=0;P<I.length;++P)k=I[P],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=C[E],typeof v=="function")this.removeListener(E,v);else if(v!==void 0)for(P=v.length-1;P>=0;P--)this.removeListener(E,v[P]);return this};function p(E,v,C){var P=E._events;if(P===void 0)return[];var I=P[v];return I===void 0?[]:typeof I=="function"?C?[I.listener||I]:[I]:C?w(I):m(I,I.length)}n.prototype.listeners=function(E){return p(this,E,!0)},n.prototype.rawListeners=function(E){return p(this,E,!1)},n.listenerCount=function(E,v){return typeof E.listenerCount=="function"?E.listenerCount(v):b.call(E,v)},n.prototype.listenerCount=b;function b(E){var v=this._events;if(v!==void 0){var C=v[E];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function m(E,v){for(var C=new Array(v),P=0;P<v;++P)C[P]=E[P];return C}function S(E,v){for(;v+1<E.length;v++)E[v]=E[v+1];E.pop()}function w(E){for(var v=new Array(E.length),C=0;C<v.length;++C)v[C]=E[C].listener||E[C];return v}function A(E,v){return new Promise(function(C,P){function I(T){E.removeListener(v,k),P(T)}function k(){typeof E.removeListener=="function"&&E.removeListener("error",I),C([].slice.call(arguments))}_(E,v,k,{once:!0}),v!=="error"&&g(E,I,{once:!0})})}function g(E,v,C){typeof E.on=="function"&&_(E,"error",v,C)}function _(E,v,C,P){if(typeof E.on=="function")P.once?E.once(v,C):E.on(v,C);else if(typeof E.addEventListener=="function")E.addEventListener(v,function I(k){P.once&&E.removeEventListener(v,I),C(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return Xt}var Xt,ri,Wt,js,Ns,Bs,Us,Ls,Ds,Ut=it(()=>{he(),de(),pe(),Xt={},ri=!1,Wt=ll(),Wt.once,Wt.once=function(h,f){return new Promise((s,l)=>{function c(...t){n!==void 0&&h.removeListener("error",n),s(t)}let n;f!=="error"&&(n=t=>{h.removeListener(name,c),l(t)},h.once("error",n)),h.once(f,c)})},Wt.on=function(h,f){let s=[],l=[],c=null,n=!1,t={async next(){let i=s.shift();if(i)return createIterResult(i,!1);if(c){let a=Promise.reject(c);return c=null,a}return n?createIterResult(void 0,!0):new Promise((a,d)=>l.push({resolve:a,reject:d}))},async return(){h.removeListener(f,r),h.removeListener("error",e),n=!0;for(let i of l)i.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(i){c=i,h.removeListener(f,r),h.removeListener("error",e)},[Symbol.asyncIterator](){return this}};return h.on(f,r),h.on("error",e),t;function r(...i){let a=l.shift();a?a.resolve(createIterResult(i,!1)):s.push(i)}function e(i){n=!0;let a=l.shift();a?a.reject(i):c=i,t.return()}},{EventEmitter:js,defaultMaxListeners:Ns,init:Bs,listenerCount:Us,on:Ls,once:Ds}=Wt}),nt=me((h,f)=>{he(),de(),pe();var s=(Je(),Fe(Ye)),{format:l,inspect:c}=Ms(),{codes:{ERR_INVALID_ARG_TYPE:n}}=rt(),{kResistStopPropagation:t,AggregateError:r,SymbolDispose:e}=Ve(),i=globalThis.AbortSignal||rr().AbortSignal,a=globalThis.AbortController||rr().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||s.Blob,b=typeof p<"u"?function(w){return w instanceof p}:function(w){return!1},m=(w,A)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new n(A,"AbortSignal",w)},S=(w,A)=>{if(typeof w!="function")throw new n(A,"Function",w)};f.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(w){let A=!1;return function(...g){A||(A=!0,w.apply(this,g))}},createDeferredPromise:function(){let w,A;return{promise:new Promise((g,_)=>{w=g,A=_}),resolve:w,reject:A}},promisify(w){return new Promise((A,g)=>{w((_,...E)=>_?g(_):A(...E))})},debuglog(){return function(){}},format:l,inspect:c,types:{isAsyncFunction(w){return w instanceof d},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:b,deprecate(w,A){return w},addAbortListener:(Ut(),Fe(kt)).addAbortListener||function(w,A){if(w===void 0)throw new n("signal","AbortSignal",w);m(w,"signal"),S(A,"listener");let g;return w.aborted?queueMicrotask(()=>A()):(w.addEventListener("abort",A,{__proto__:null,once:!0,[t]:!0}),g=()=>{w.removeEventListener("abort",A)}),{__proto__:null,[e](){var _;(_=g)===null||_===void 0||_()}}},AbortSignalAny:i.any||function(w){if(w.length===1)return w[0];let A=new a,g=()=>A.abort();return w.forEach(_=>{m(_,"signals"),_.addEventListener("abort",g,{once:!0})}),A.signal.addEventListener("abort",()=>{w.forEach(_=>_.removeEventListener("abort",g))},{once:!0}),A.signal}},f.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),nr=me((h,f)=>{he(),de(),pe();var{ArrayIsArray:s,ArrayPrototypeIncludes:l,ArrayPrototypeJoin:c,ArrayPrototypeMap:n,NumberIsInteger:t,NumberIsNaN:r,NumberMAX_SAFE_INTEGER:e,NumberMIN_SAFE_INTEGER:i,NumberParseInt:a,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:b,StringPrototypeToUpperCase:m,StringPrototypeTrim:S}=Ve(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:A,ERR_INVALID_ARG_TYPE:g,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:v}}=rt(),{normalizeEncoding:C}=nt(),{isAsyncFunction:P,isArrayBufferView:I}=nt().types,k={};function T(J){return J===(J|0)}function F(J){return J===J>>>0}var x=/^[0-7]+$/,q="must be a 32-bit unsigned integer or an octal string";function V(J,ve,Ee){if(typeof J>"u"&&(J=Ee),typeof J=="string"){if(p(x,J)===null)throw new _(ve,J,q);J=a(J,8)}return te(J,ve),J}var L=w((J,ve,Ee=i,ce=e)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new E(ve,"an integer",J);if(J<Ee||J>ce)throw new E(ve,`>= ${Ee} && <= ${ce}`,J)}),ae=w((J,ve,Ee=-2147483648,ce=2147483647)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new E(ve,"an integer",J);if(J<Ee||J>ce)throw new E(ve,`>= ${Ee} && <= ${ce}`,J)}),te=w((J,ve,Ee=!1)=>{if(typeof J!="number")throw new g(ve,"number",J);if(!t(J))throw new E(ve,"an integer",J);let ce=Ee?1:0,Me=4294967295;if(J<ce||J>Me)throw new E(ve,`>= ${ce} && <= ${Me}`,J)});function Z(J,ve){if(typeof J!="string")throw new g(ve,"string",J)}function le(J,ve,Ee=void 0,ce){if(typeof J!="number")throw new g(ve,"number",J);if(Ee!=null&&J<Ee||ce!=null&&J>ce||(Ee!=null||ce!=null)&&r(J))throw new E(ve,`${Ee!=null?`>= ${Ee}`:""}${Ee!=null&&ce!=null?" && ":""}${ce!=null?`<= ${ce}`:""}`,J)}var K=w((J,ve,Ee)=>{if(!l(Ee,J)){let ce="must be one of: "+c(n(Ee,Me=>typeof Me=="string"?`'${Me}'`:b(Me)),", ");throw new _(ve,J,ce)}});function ie(J,ve){if(typeof J!="boolean")throw new g(ve,"boolean",J)}function M(J,ve,Ee){return J==null||!d(J,ve)?Ee:J[ve]}var G=w((J,ve,Ee=null)=>{let ce=M(Ee,"allowArray",!1),Me=M(Ee,"allowFunction",!1);if(!M(Ee,"nullable",!1)&&J===null||!ce&&s(J)||typeof J!="object"&&(!Me||typeof J!="function"))throw new g(ve,"Object",J)}),fe=w((J,ve)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new g(ve,"a dictionary",J)}),$=w((J,ve,Ee=0)=>{if(!s(J))throw new g(ve,"Array",J);if(J.length<Ee){let ce=`must be longer than ${Ee}`;throw new _(ve,J,ce)}});function _e(J,ve){$(J,ve);for(let Ee=0;Ee<J.length;Ee++)Z(J[Ee],`${ve}[${Ee}]`)}function X(J,ve){$(J,ve);for(let Ee=0;Ee<J.length;Ee++)ie(J[Ee],`${ve}[${Ee}]`)}function D(J,ve){$(J,ve);for(let Ee=0;Ee<J.length;Ee++){let ce=J[Ee],Me=`${ve}[${Ee}]`;if(ce==null)throw new g(Me,"AbortSignal",ce);be(ce,Me)}}function se(J,ve="signal"){if(Z(J,ve),k[J]===void 0)throw k[m(J)]!==void 0?new v(J+" (signals must use all capital letters)"):new v(J)}var H=w((J,ve="buffer")=>{if(!I(J))throw new g(ve,["Buffer","TypedArray","DataView"],J)});function ee(J,ve){let Ee=C(ve),ce=J.length;if(Ee==="hex"&&ce%2!==0)throw new _("encoding",ve,`is invalid for data of length ${ce}`)}function re(J,ve="Port",Ee=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&S(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Ee)throw new A(ve,J,Ee);return J|0}var be=w((J,ve)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new g(ve,"AbortSignal",J)}),ue=w((J,ve)=>{if(typeof J!="function")throw new g(ve,"Function",J)}),N=w((J,ve)=>{if(typeof J!="function"||P(J))throw new g(ve,"Function",J)}),Q=w((J,ve)=>{if(J!==void 0)throw new g(ve,"undefined",J)});function oe(J,ve,Ee){if(!l(Ee,J))throw new g(ve,`('${c(Ee,"|")}')`,J)}var ye=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ge(J,ve){if(typeof J>"u"||!p(ye,J))throw new _(ve,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function we(J){if(typeof J=="string")return ge(J,"hints"),J;if(s(J)){let ve=J.length,Ee="";if(ve===0)return Ee;for(let ce=0;ce<ve;ce++){let Me=J[ce];ge(Me,"hints"),Ee+=Me,ce!==ve-1&&(Ee+=", ")}return Ee}throw new _("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}f.exports={isInt32:T,isUint32:F,parseFileMode:V,validateArray:$,validateStringArray:_e,validateBooleanArray:X,validateAbortSignalArray:D,validateBoolean:ie,validateBuffer:H,validateDictionary:fe,validateEncoding:ee,validateFunction:ue,validateInt32:ae,validateInteger:L,validateNumber:le,validateObject:G,validateOneOf:K,validatePlainFunction:N,validatePort:re,validateSignalName:se,validateString:Z,validateUint32:te,validateUndefined:Q,validateUnion:oe,validateAbortSignal:be,validateLinkHeaderValue:we}}),Lt=me((h,f)=>{he(),de(),pe();var s=f.exports={},l,c;function n(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=n}catch{l=n}try{typeof clearTimeout=="function"?c=clearTimeout:c=t}catch{c=t}})();function r(A){if(l===setTimeout)return setTimeout(A,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(A,0);try{return l(A,0)}catch{try{return l.call(null,A,0)}catch{return l.call(this,A,0)}}}function e(A){if(c===clearTimeout)return clearTimeout(A);if((c===t||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(A);try{return c(A)}catch{try{return c.call(null,A)}catch{return c.call(this,A)}}}var i=[],a=!1,d,p=-1;function b(){!a||!d||(a=!1,d.length?i=d.concat(i):p=-1,i.length&&m())}function m(){if(!a){var A=r(b);a=!0;for(var g=i.length;g;){for(d=i,i=[];++p<g;)d&&d[p].run();p=-1,g=i.length}d=null,a=!1,e(A)}}s.nextTick=function(A){var g=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)g[_-1]=arguments[_];i.push(new S(A,g)),i.length===1&&!a&&r(m)};function S(A,g){this.fun=A,this.array=g}S.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function w(){}s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(A){return[]},s.binding=function(A){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(A){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}),mt=me((h,f)=>{he(),de(),pe();var{SymbolAsyncIterator:s,SymbolIterator:l,SymbolFor:c}=Ve(),n=c("nodejs.stream.destroyed"),t=c("nodejs.stream.errored"),r=c("nodejs.stream.readable"),e=c("nodejs.stream.writable"),i=c("nodejs.stream.disturbed"),a=c("nodejs.webstream.isClosedPromise"),d=c("nodejs.webstream.controllerErrorFunction");function p(M,G=!1){var fe;return!!(M&&typeof M.pipe=="function"&&typeof M.on=="function"&&(!G||typeof M.pause=="function"&&typeof M.resume=="function")&&(!M._writableState||((fe=M._readableState)===null||fe===void 0?void 0:fe.readable)!==!1)&&(!M._writableState||M._readableState))}function b(M){var G;return!!(M&&typeof M.write=="function"&&typeof M.on=="function"&&(!M._readableState||((G=M._writableState)===null||G===void 0?void 0:G.writable)!==!1))}function m(M){return!!(M&&typeof M.pipe=="function"&&M._readableState&&typeof M.on=="function"&&typeof M.write=="function")}function S(M){return M&&(M._readableState||M._writableState||typeof M.write=="function"&&typeof M.on=="function"||typeof M.pipe=="function"&&typeof M.on=="function")}function w(M){return!!(M&&!S(M)&&typeof M.pipeThrough=="function"&&typeof M.getReader=="function"&&typeof M.cancel=="function")}function A(M){return!!(M&&!S(M)&&typeof M.getWriter=="function"&&typeof M.abort=="function")}function g(M){return!!(M&&!S(M)&&typeof M.readable=="object"&&typeof M.writable=="object")}function _(M){return w(M)||A(M)||g(M)}function E(M,G){return M==null?!1:G===!0?typeof M[s]=="function":G===!1?typeof M[l]=="function":typeof M[s]=="function"||typeof M[l]=="function"}function v(M){if(!S(M))return null;let G=M._writableState,fe=M._readableState,$=G||fe;return!!(M.destroyed||M[n]||$!=null&&$.destroyed)}function C(M){if(!b(M))return null;if(M.writableEnded===!0)return!0;let G=M._writableState;return G!=null&&G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function P(M,G){if(!b(M))return null;if(M.writableFinished===!0)return!0;let fe=M._writableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.finished)!="boolean"?null:!!(fe.finished||G===!1&&fe.ended===!0&&fe.length===0)}function I(M){if(!p(M))return null;if(M.readableEnded===!0)return!0;let G=M._readableState;return!G||G.errored?!1:typeof(G==null?void 0:G.ended)!="boolean"?null:G.ended}function k(M,G){if(!p(M))return null;let fe=M._readableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.endEmitted)!="boolean"?null:!!(fe.endEmitted||G===!1&&fe.ended===!0&&fe.length===0)}function T(M){return M&&M[r]!=null?M[r]:typeof(M==null?void 0:M.readable)!="boolean"?null:v(M)?!1:p(M)&&M.readable&&!k(M)}function F(M){return M&&M[e]!=null?M[e]:typeof(M==null?void 0:M.writable)!="boolean"?null:v(M)?!1:b(M)&&M.writable&&!C(M)}function x(M,G){return S(M)?v(M)?!0:!((G==null?void 0:G.readable)!==!1&&T(M)||(G==null?void 0:G.writable)!==!1&&F(M)):null}function q(M){var G,fe;return S(M)?M.writableErrored?M.writableErrored:(G=(fe=M._writableState)===null||fe===void 0?void 0:fe.errored)!==null&&G!==void 0?G:null:null}function V(M){var G,fe;return S(M)?M.readableErrored?M.readableErrored:(G=(fe=M._readableState)===null||fe===void 0?void 0:fe.errored)!==null&&G!==void 0?G:null:null}function L(M){if(!S(M))return null;if(typeof M.closed=="boolean")return M.closed;let G=M._writableState,fe=M._readableState;return typeof(G==null?void 0:G.closed)=="boolean"||typeof(fe==null?void 0:fe.closed)=="boolean"?(G==null?void 0:G.closed)||(fe==null?void 0:fe.closed):typeof M._closed=="boolean"&&ae(M)?M._closed:null}function ae(M){return typeof M._closed=="boolean"&&typeof M._defaultKeepAlive=="boolean"&&typeof M._removedConnection=="boolean"&&typeof M._removedContLen=="boolean"}function te(M){return typeof M._sent100=="boolean"&&ae(M)}function Z(M){var G;return typeof M._consuming=="boolean"&&typeof M._dumped=="boolean"&&((G=M.req)===null||G===void 0?void 0:G.upgradeOrConnect)===void 0}function le(M){if(!S(M))return null;let G=M._writableState,fe=M._readableState,$=G||fe;return!$&&te(M)||!!($&&$.autoDestroy&&$.emitClose&&$.closed===!1)}function K(M){var G;return!!(M&&((G=M[i])!==null&&G!==void 0?G:M.readableDidRead||M.readableAborted))}function ie(M){var G,fe,$,_e,X,D,se,H,ee,re;return!!(M&&((G=(fe=($=(_e=(X=(D=M[t])!==null&&D!==void 0?D:M.readableErrored)!==null&&X!==void 0?X:M.writableErrored)!==null&&_e!==void 0?_e:(se=M._readableState)===null||se===void 0?void 0:se.errorEmitted)!==null&&$!==void 0?$:(H=M._writableState)===null||H===void 0?void 0:H.errorEmitted)!==null&&fe!==void 0?fe:(ee=M._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&G!==void 0?G:!((re=M._writableState)===null||re===void 0)&&re.errored))}f.exports={isDestroyed:v,kIsDestroyed:n,isDisturbed:K,kIsDisturbed:i,isErrored:ie,kIsErrored:t,isReadable:T,kIsReadable:r,kIsClosedPromise:a,kControllerErrorFunction:d,kIsWritable:e,isClosed:L,isDuplexNodeStream:m,isFinished:x,isIterable:E,isReadableNodeStream:p,isReadableStream:w,isReadableEnded:I,isReadableFinished:k,isReadableErrored:V,isNodeStream:S,isWebStream:_,isWritable:F,isWritableNodeStream:b,isWritableStream:A,isWritableEnded:C,isWritableFinished:P,isWritableErrored:q,isServerRequest:Z,isServerResponse:te,willEmitClose:le,isTransformStream:g}}),Pt=me((h,f)=>{he(),de(),pe();var s=Lt(),{AbortError:l,codes:c}=rt(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:t}=c,{kEmptyObject:r,once:e}=nt(),{validateAbortSignal:i,validateFunction:a,validateObject:d,validateBoolean:p}=nr(),{Promise:b,PromisePrototypeThen:m,SymbolDispose:S}=Ve(),{isClosed:w,isReadable:A,isReadableNodeStream:g,isReadableStream:_,isReadableFinished:E,isReadableErrored:v,isWritable:C,isWritableNodeStream:P,isWritableStream:I,isWritableFinished:k,isWritableErrored:T,isNodeStream:F,willEmitClose:x,kIsClosedPromise:q}=mt(),V;function L(K){return K.setHeader&&typeof K.abort=="function"}var ae=()=>{};function te(K,ie,M){var G,fe;if(arguments.length===2?(M=ie,ie=r):ie==null?ie=r:d(ie,"options"),a(M,"callback"),i(ie.signal,"options.signal"),M=e(M),_(K)||I(K))return Z(K,ie,M);if(!F(K))throw new n("stream",["ReadableStream","WritableStream","Stream"],K);let $=(G=ie.readable)!==null&&G!==void 0?G:g(K),_e=(fe=ie.writable)!==null&&fe!==void 0?fe:P(K),X=K._writableState,D=K._readableState,se=()=>{K.writable||re()},H=x(K)&&g(K)===$&&P(K)===_e,ee=k(K,!1),re=()=>{ee=!0,K.destroyed&&(H=!1),!(H&&(!K.readable||$))&&(!$||be)&&M.call(K)},be=E(K,!1),ue=()=>{be=!0,K.destroyed&&(H=!1),!(H&&(!K.writable||_e))&&(!_e||ee)&&M.call(K)},N=J=>{M.call(K,J)},Q=w(K),oe=()=>{Q=!0;let J=T(K)||v(K);if(J&&typeof J!="boolean")return M.call(K,J);if($&&!be&&g(K,!0)&&!E(K,!1))return M.call(K,new t);if(_e&&!ee&&!k(K,!1))return M.call(K,new t);M.call(K)},ye=()=>{Q=!0;let J=T(K)||v(K);if(J&&typeof J!="boolean")return M.call(K,J);M.call(K)},ge=()=>{K.req.on("finish",re)};L(K)?(K.on("complete",re),H||K.on("abort",oe),K.req?ge():K.on("request",ge)):_e&&!X&&(K.on("end",se),K.on("close",se)),!H&&typeof K.aborted=="boolean"&&K.on("aborted",oe),K.on("end",ue),K.on("finish",re),ie.error!==!1&&K.on("error",N),K.on("close",oe),Q?s.nextTick(oe):X!=null&&X.errorEmitted||D!=null&&D.errorEmitted?H||s.nextTick(ye):(!$&&(!H||A(K))&&(ee||C(K)===!1)||!_e&&(!H||C(K))&&(be||A(K)===!1)||D&&K.req&&K.aborted)&&s.nextTick(ye);let we=()=>{M=ae,K.removeListener("aborted",oe),K.removeListener("complete",re),K.removeListener("abort",oe),K.removeListener("request",ge),K.req&&K.req.removeListener("finish",re),K.removeListener("end",se),K.removeListener("close",se),K.removeListener("finish",re),K.removeListener("end",ue),K.removeListener("error",N),K.removeListener("close",oe)};if(ie.signal&&!Q){let J=()=>{let ve=M;we(),ve.call(K,new l(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)s.nextTick(J);else{V=V||nt().addAbortListener;let ve=V(ie.signal,J),Ee=M;M=e((...ce)=>{ve[S](),Ee.apply(K,ce)})}}return we}function Z(K,ie,M){let G=!1,fe=ae;if(ie.signal)if(fe=()=>{G=!0,M.call(K,new l(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)s.nextTick(fe);else{V=V||nt().addAbortListener;let _e=V(ie.signal,fe),X=M;M=e((...D)=>{_e[S](),X.apply(K,D)})}let $=(..._e)=>{G||s.nextTick(()=>M.apply(K,_e))};return m(K[q].promise,$,$),ae}function le(K,ie){var M;let G=!1;return ie===null&&(ie=r),(M=ie)!==null&&M!==void 0&&M.cleanup&&(p(ie.cleanup,"cleanup"),G=ie.cleanup),new b((fe,$)=>{let _e=te(K,ie,X=>{G&&_e(),X?$(X):fe()})})}f.exports=te,f.exports.finished=le}),zt=me((h,f)=>{he(),de(),pe();var s=Lt(),{aggregateTwoErrors:l,codes:{ERR_MULTIPLE_CALLBACK:c},AbortError:n}=rt(),{Symbol:t}=Ve(),{kIsDestroyed:r,isDestroyed:e,isFinished:i,isServerRequest:a}=mt(),d=t("kDestroy"),p=t("kConstruct");function b(x,q,V){x&&(x.stack,q&&!q.errored&&(q.errored=x),V&&!V.errored&&(V.errored=x))}function m(x,q){let V=this._readableState,L=this._writableState,ae=L||V;return L!=null&&L.destroyed||V!=null&&V.destroyed?(typeof q=="function"&&q(),this):(b(x,L,V),L&&(L.destroyed=!0),V&&(V.destroyed=!0),ae.constructed?S(this,x,q):this.once(d,function(te){S(this,l(te,x),q)}),this)}function S(x,q,V){let L=!1;function ae(te){if(L)return;L=!0;let Z=x._readableState,le=x._writableState;b(te,le,Z),le&&(le.closed=!0),Z&&(Z.closed=!0),typeof V=="function"&&V(te),te?s.nextTick(w,x,te):s.nextTick(A,x)}try{x._destroy(q||null,ae)}catch(te){ae(te)}}function w(x,q){g(x,q),A(x)}function A(x){let q=x._readableState,V=x._writableState;V&&(V.closeEmitted=!0),q&&(q.closeEmitted=!0),(V!=null&&V.emitClose||q!=null&&q.emitClose)&&x.emit("close")}function g(x,q){let V=x._readableState,L=x._writableState;L!=null&&L.errorEmitted||V!=null&&V.errorEmitted||(L&&(L.errorEmitted=!0),V&&(V.errorEmitted=!0),x.emit("error",q))}function _(){let x=this._readableState,q=this._writableState;x&&(x.constructed=!0,x.closed=!1,x.closeEmitted=!1,x.destroyed=!1,x.errored=null,x.errorEmitted=!1,x.reading=!1,x.ended=x.readable===!1,x.endEmitted=x.readable===!1),q&&(q.constructed=!0,q.destroyed=!1,q.closed=!1,q.closeEmitted=!1,q.errored=null,q.errorEmitted=!1,q.finalCalled=!1,q.prefinished=!1,q.ended=q.writable===!1,q.ending=q.writable===!1,q.finished=q.writable===!1)}function E(x,q,V){let L=x._readableState,ae=x._writableState;if(ae!=null&&ae.destroyed||L!=null&&L.destroyed)return this;L!=null&&L.autoDestroy||ae!=null&&ae.autoDestroy?x.destroy(q):q&&(q.stack,ae&&!ae.errored&&(ae.errored=q),L&&!L.errored&&(L.errored=q),V?s.nextTick(g,x,q):g(x,q))}function v(x,q){if(typeof x._construct!="function")return;let V=x._readableState,L=x._writableState;V&&(V.constructed=!1),L&&(L.constructed=!1),x.once(p,q),!(x.listenerCount(p)>1)&&s.nextTick(C,x)}function C(x){let q=!1;function V(L){if(q){E(x,L??new c);return}q=!0;let ae=x._readableState,te=x._writableState,Z=te||ae;ae&&(ae.constructed=!0),te&&(te.constructed=!0),Z.destroyed?x.emit(d,L):L?E(x,L,!0):s.nextTick(P,x)}try{x._construct(L=>{s.nextTick(V,L)})}catch(L){s.nextTick(V,L)}}function P(x){x.emit(p)}function I(x){return(x==null?void 0:x.setHeader)&&typeof x.abort=="function"}function k(x){x.emit("close")}function T(x,q){x.emit("error",q),s.nextTick(k,x)}function F(x,q){!x||e(x)||(!q&&!i(x)&&(q=new n),a(x)?(x.socket=null,x.destroy(q)):I(x)?x.abort():I(x.req)?x.req.abort():typeof x.destroy=="function"?x.destroy(q):typeof x.close=="function"?x.close():q?s.nextTick(T,x,q):s.nextTick(k,x),x.destroyed||(x[r]=!0))}f.exports={construct:v,destroyer:F,destroy:m,undestroy:_,errorOrDestroy:E}}),Xi=me((h,f)=>{he(),de(),pe();var{ArrayIsArray:s,ObjectSetPrototypeOf:l}=Ve(),{EventEmitter:c}=(Ut(),Fe(kt));function n(r){c.call(this,r)}l(n.prototype,c.prototype),l(n,c),n.prototype.pipe=function(r,e){let i=this;function a(A){r.writable&&r.write(A)===!1&&i.pause&&i.pause()}i.on("data",a);function d(){i.readable&&i.resume&&i.resume()}r.on("drain",d),!r._isStdio&&(!e||e.end!==!1)&&(i.on("end",b),i.on("close",m));let p=!1;function b(){p||(p=!0,r.end())}function m(){p||(p=!0,typeof r.destroy=="function"&&r.destroy())}function S(A){w(),c.listenerCount(this,"error")===0&&this.emit("error",A)}t(i,"error",S),t(r,"error",S);function w(){i.removeListener("data",a),r.removeListener("drain",d),i.removeListener("end",b),i.removeListener("close",m),i.removeListener("error",S),r.removeListener("error",S),i.removeListener("end",w),i.removeListener("close",w),r.removeListener("close",w)}return i.on("end",w),i.on("close",w),r.on("close",w),r.emit("pipe",i),r};function t(r,e,i){if(typeof r.prependListener=="function")return r.prependListener(e,i);!r._events||!r._events[e]?r.on(e,i):s(r._events[e])?r._events[e].unshift(i):r._events[e]=[i,r._events[e]]}f.exports={Stream:n,prependListener:t}}),Lr=me((h,f)=>{he(),de(),pe();var{SymbolDispose:s}=Ve(),{AbortError:l,codes:c}=rt(),{isNodeStream:n,isWebStream:t,kControllerErrorFunction:r}=mt(),e=Pt(),{ERR_INVALID_ARG_TYPE:i}=c,a,d=(p,b)=>{if(typeof p!="object"||!("aborted"in p))throw new i(b,"AbortSignal",p)};f.exports.addAbortSignal=function(p,b){if(d(p,"signal"),!n(b)&&!t(b))throw new i("stream",["ReadableStream","WritableStream","Stream"],b);return f.exports.addAbortSignalNoValidate(p,b)},f.exports.addAbortSignalNoValidate=function(p,b){if(typeof p!="object"||!("aborted"in p))return b;let m=n(b)?()=>{b.destroy(new l(void 0,{cause:p.reason}))}:()=>{b[r](new l(void 0,{cause:p.reason}))};if(p.aborted)m();else{a=a||nt().addAbortListener;let S=a(p,m);e(b,S[s])}return b}}),ul=me((h,f)=>{he(),de(),pe();var{StringPrototypeSlice:s,SymbolIterator:l,TypedArrayPrototypeSet:c,Uint8Array:n}=Ve(),{Buffer:t}=(Je(),Fe(Ye)),{inspect:r}=nt();f.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let i={data:e,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}unshift(e){let i={data:e,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let i=this.head,a=""+i.data;for(;(i=i.next)!==null;)a+=e+i.data;return a}concat(e){if(this.length===0)return t.alloc(0);let i=t.allocUnsafe(e>>>0),a=this.head,d=0;for(;a;)c(i,a.data,d),d+=a.data.length,a=a.next;return i}consume(e,i){let a=this.head.data;if(e<a.length){let d=a.slice(0,e);return this.head.data=a.slice(e),d}return e===a.length?this.shift():i?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[l](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let i="",a=this.head,d=0;do{let p=a.data;if(e>p.length)i+=p,e-=p.length;else{e===p.length?(i+=p,++d,a.next?this.head=a.next:this.head=this.tail=null):(i+=s(p,0,e),this.head=a,a.data=s(p,e));break}++d}while((a=a.next)!==null);return this.length-=d,i}_getBuffer(e){let i=t.allocUnsafe(e),a=e,d=this.head,p=0;do{let b=d.data;if(e>b.length)c(i,b,a-e),e-=b.length;else{e===b.length?(c(i,b,a-e),++p,d.next?this.head=d.next:this.head=this.tail=null):(c(i,new n(b.buffer,b.byteOffset,e),a-e),this.head=d,d.data=b.slice(e));break}++p}while((d=d.next)!==null);return this.length-=p,i}[Symbol.for("nodejs.util.inspect.custom")](e,i){return r(this,{...i,depth:0,customInspect:!1})}}}),Dr=me((h,f)=>{he(),de(),pe();var{MathFloor:s,NumberIsInteger:l}=Ve(),{validateInteger:c}=nr(),{ERR_INVALID_ARG_VALUE:n}=rt().codes,t=16*1024,r=16;function e(p,b,m){return p.highWaterMark!=null?p.highWaterMark:b?p[m]:null}function i(p){return p?r:t}function a(p,b){c(b,"value",0),p?r=b:t=b}function d(p,b,m,S){let w=e(b,S,m);if(w!=null){if(!l(w)||w<0){let A=S?`options.${m}`:"options.highWaterMark";throw new n(A,w)}return s(w)}return i(p.objectMode)}f.exports={getHighWaterMark:d,getDefaultHighWaterMark:i,setDefaultHighWaterMark:a}}),cl=me((h,f)=>{he(),de(),pe();var s=(Je(),Fe(Ye)),l=s.Buffer;function c(t,r){for(var e in t)r[e]=t[e]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?f.exports=s:(c(s,h),h.Buffer=n);function n(t,r,e){return l(t,r,e)}n.prototype=Object.create(l.prototype),c(l,n),n.from=function(t,r,e){if(typeof t=="number")throw new TypeError("Argument must not be a number");return l(t,r,e)},n.alloc=function(t,r,e){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=l(t);return r!==void 0?typeof e=="string"?i.fill(r,e):i.fill(r):i.fill(0),i},n.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return l(t)},n.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(t)}}),fl=me(h=>{he(),de(),pe();var f=cl().Buffer,s=f.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(g){if(!g)return"utf8";for(var _;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(_)return;g=(""+g).toLowerCase(),_=!0}}function c(g){var _=l(g);if(typeof _!="string"&&(f.isEncoding===s||!s(g)))throw new Error("Unknown encoding: "+g);return _||g}h.StringDecoder=n;function n(g){this.encoding=c(g);var _;switch(this.encoding){case"utf16le":this.text=p,this.end=b,_=4;break;case"utf8":this.fillLast=i,_=4;break;case"base64":this.text=m,this.end=S,_=3;break;default:this.write=w,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(_)}n.prototype.write=function(g){if(g.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(g),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<g.length?_?_+this.text(g,E):this.text(g,E):_||""},n.prototype.end=d,n.prototype.text=a,n.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function t(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function r(g,_,E){var v=_.length-1;if(v<E)return 0;var C=t(_[v]);return C>=0?(C>0&&(g.lastNeed=C-1),C):--v<E||C===-2?0:(C=t(_[v]),C>=0?(C>0&&(g.lastNeed=C-2),C):--v<E||C===-2?0:(C=t(_[v]),C>=0?(C>0&&(C===2?C=0:g.lastNeed=C-3),C):0))}function e(g,_,E){if((_[0]&192)!==128)return g.lastNeed=0,"";if(g.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return g.lastNeed=1,"";if(g.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return g.lastNeed=2,""}}function i(g){var _=this.lastTotal-this.lastNeed,E=e(this,g);if(E!==void 0)return E;if(this.lastNeed<=g.length)return g.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,_,0,g.length),this.lastNeed-=g.length}function a(g,_){var E=r(this,g,_);if(!this.lastNeed)return g.toString("utf8",_);this.lastTotal=E;var v=g.length-(E-this.lastNeed);return g.copy(this.lastChar,0,v),g.toString("utf8",_,v)}function d(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+"":_}function p(g,_){if((g.length-_)%2===0){var E=g.toString("utf16le",_);if(E){var v=E.charCodeAt(E.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",_,g.length-1)}function b(g){var _=g&&g.length?this.write(g):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function m(g,_){var E=(g.length-_)%3;return E===0?g.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",_,g.length-E))}function S(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function w(g){return g.toString(this.encoding)}function A(g){return g&&g.length?this.write(g):""}}),Fs=me((h,f)=>{he(),de(),pe();var s=Lt(),{PromisePrototypeThen:l,SymbolAsyncIterator:c,SymbolIterator:n}=Ve(),{Buffer:t}=(Je(),Fe(Ye)),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_NULL_VALUES:e}=rt().codes;function i(a,d,p){let b;if(typeof d=="string"||d instanceof t)return new a({objectMode:!0,...p,read(){this.push(d),this.push(null)}});let m;if(d&&d[c])m=!0,b=d[c]();else if(d&&d[n])m=!1,b=d[n]();else throw new r("iterable",["Iterable"],d);let S=new a({objectMode:!0,highWaterMark:1,...p}),w=!1;S._read=function(){w||(w=!0,g())},S._destroy=function(_,E){l(A(_),()=>s.nextTick(E,_),v=>s.nextTick(E,v||_))};async function A(_){let E=_!=null,v=typeof b.throw=="function";if(E&&v){let{value:C,done:P}=await b.throw(_);if(await C,P)return}if(typeof b.return=="function"){let{value:C}=await b.return();await C}}async function g(){for(;;){try{let{value:_,done:E}=m?await b.next():b.next();if(E)S.push(null);else{let v=_&&typeof _.then=="function"?await _:_;if(v===null)throw w=!1,new e;if(S.push(v))continue;w=!1}}catch(_){S.destroy(_)}break}}return S}f.exports=i}),Fr=me((h,f)=>{he(),de(),pe();var s=Lt(),{ArrayPrototypeIndexOf:l,NumberIsInteger:c,NumberIsNaN:n,NumberParseInt:t,ObjectDefineProperties:r,ObjectKeys:e,ObjectSetPrototypeOf:i,Promise:a,SafeSet:d,SymbolAsyncDispose:p,SymbolAsyncIterator:b,Symbol:m}=Ve();f.exports=ce,ce.ReadableState=Ee;var{EventEmitter:S}=(Ut(),Fe(kt)),{Stream:w,prependListener:A}=Xi(),{Buffer:g}=(Je(),Fe(Ye)),{addAbortSignal:_}=Lr(),E=Pt(),v=nt().debuglog("stream",R=>{v=R}),C=ul(),P=zt(),{getHighWaterMark:I,getDefaultHighWaterMark:k}=Dr(),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_OUT_OF_RANGE:q,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:L},AbortError:ae}=rt(),{validateObject:te}=nr(),Z=m("kPaused"),{StringDecoder:le}=fl(),K=Fs();i(ce.prototype,w.prototype),i(ce,w);var ie=()=>{},{errorOrDestroy:M}=P,G=1,fe=2,$=4,_e=8,X=16,D=32,se=64,H=128,ee=256,re=512,be=1024,ue=2048,N=4096,Q=8192,oe=16384,ye=32768,ge=65536,we=1<<17,J=1<<18;function ve(R){return{enumerable:!1,get(){return(this.state&R)!==0},set(B){B?this.state|=R:this.state&=~R}}}r(Ee.prototype,{objectMode:ve(G),ended:ve(fe),endEmitted:ve($),reading:ve(_e),constructed:ve(X),sync:ve(D),needReadable:ve(se),emittedReadable:ve(H),readableListening:ve(ee),resumeScheduled:ve(re),errorEmitted:ve(be),emitClose:ve(ue),autoDestroy:ve(N),destroyed:ve(Q),closed:ve(oe),closeEmitted:ve(ye),multiAwaitDrain:ve(ge),readingMore:ve(we),dataEmitted:ve(J)});function Ee(R,B,Se){typeof Se!="boolean"&&(Se=B instanceof yt()),this.state=ue|N|X|D,R&&R.objectMode&&(this.state|=G),Se&&R&&R.readableObjectMode&&(this.state|=G),this.highWaterMark=R?I(this,R,"readableHighWaterMark",Se):k(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[Z]=null,R&&R.emitClose===!1&&(this.state&=~ue),R&&R.autoDestroy===!1&&(this.state&=~N),this.errored=null,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,R&&R.encoding&&(this.decoder=new le(R.encoding),this.encoding=R.encoding)}function ce(R){if(!(this instanceof ce))return new ce(R);let B=this instanceof yt();this._readableState=new Ee(R,this,B),R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&!B&&_(R.signal,this)),w.call(this,R),P.construct(this,()=>{this._readableState.needReadable&&W(this,this._readableState)})}ce.prototype.destroy=P.destroy,ce.prototype._undestroy=P.undestroy,ce.prototype._destroy=function(R,B){B(R)},ce.prototype[S.captureRejectionSymbol]=function(R){this.destroy(R)},ce.prototype[p]=function(){let R;return this.destroyed||(R=this.readableEnded?null:new ae,this.destroy(R)),new a((B,Se)=>E(this,xe=>xe&&xe!==R?Se(xe):B(null)))},ce.prototype.push=function(R,B){return Me(this,R,B,!1)},ce.prototype.unshift=function(R,B){return Me(this,R,B,!0)};function Me(R,B,Se,xe){v("readableAddChunk",B);let ke=R._readableState,Ge;if(!(ke.state&G)&&(typeof B=="string"?(Se=Se||ke.defaultEncoding,ke.encoding!==Se&&(xe&&ke.encoding?B=g.from(B,Se).toString(ke.encoding):(B=g.from(B,Se),Se=""))):B instanceof g?Se="":w._isUint8Array(B)?(B=w._uint8ArrayToBuffer(B),Se=""):B!=null&&(Ge=new F("chunk",["string","Buffer","Uint8Array"],B))),Ge)M(R,Ge);else if(B===null)ke.state&=~_e,j(R,ke);else if(ke.state&G||B&&B.length>0)if(xe)if(ke.state&$)M(R,new L);else{if(ke.destroyed||ke.errored)return!1;o(R,ke,B,!0)}else if(ke.ended)M(R,new V);else{if(ke.destroyed||ke.errored)return!1;ke.state&=~_e,ke.decoder&&!Se?(B=ke.decoder.write(B),ke.objectMode||B.length!==0?o(R,ke,B,!1):W(R,ke)):o(R,ke,B,!1)}else xe||(ke.state&=~_e,W(R,ke));return!ke.ended&&(ke.length<ke.highWaterMark||ke.length===0)}function o(R,B,Se,xe){B.flowing&&B.length===0&&!B.sync&&R.listenerCount("data")>0?(B.state&ge?B.awaitDrainWriters.clear():B.awaitDrainWriters=null,B.dataEmitted=!0,R.emit("data",Se)):(B.length+=B.objectMode?1:Se.length,xe?B.buffer.unshift(Se):B.buffer.push(Se),B.state&se&&z(R)),W(R,B)}ce.prototype.isPaused=function(){let R=this._readableState;return R[Z]===!0||R.flowing===!1},ce.prototype.setEncoding=function(R){let B=new le(R);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;let Se=this._readableState.buffer,xe="";for(let ke of Se)xe+=B.write(ke);return Se.clear(),xe!==""&&Se.push(xe),this._readableState.length=xe.length,this};var u=1073741824;function y(R){if(R>u)throw new q("size","<= 1GiB",R);return R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++,R}function O(R,B){return R<=0||B.length===0&&B.ended?0:B.state&G?1:n(R)?B.flowing&&B.length?B.buffer.first().length:B.length:R<=B.length?R:B.ended?B.length:0}ce.prototype.read=function(R){v("read",R),R===void 0?R=NaN:c(R)||(R=t(R,10));let B=this._readableState,Se=R;if(R>B.highWaterMark&&(B.highWaterMark=y(R)),R!==0&&(B.state&=~H),R===0&&B.needReadable&&((B.highWaterMark!==0?B.length>=B.highWaterMark:B.length>0)||B.ended))return v("read: emitReadable",B.length,B.ended),B.length===0&&B.ended?Be(this):z(this),null;if(R=O(R,B),R===0&&B.ended)return B.length===0&&Be(this),null;let xe=(B.state&se)!==0;if(v("need readable",xe),(B.length===0||B.length-R<B.highWaterMark)&&(xe=!0,v("length less than watermark",xe)),B.ended||B.reading||B.destroyed||B.errored||!B.constructed)xe=!1,v("reading, ended or constructing",xe);else if(xe){v("do read"),B.state|=_e|D,B.length===0&&(B.state|=se);try{this._read(B.highWaterMark)}catch(Ge){M(this,Ge)}B.state&=~D,B.reading||(R=O(Se,B))}let ke;return R>0?ke=Re(R,B):ke=null,ke===null?(B.needReadable=B.length<=B.highWaterMark,R=0):(B.length-=R,B.multiAwaitDrain?B.awaitDrainWriters.clear():B.awaitDrainWriters=null),B.length===0&&(B.ended||(B.needReadable=!0),Se!==R&&B.ended&&Be(this)),ke!==null&&!B.errorEmitted&&!B.closeEmitted&&(B.dataEmitted=!0,this.emit("data",ke)),ke};function j(R,B){if(v("onEofChunk"),!B.ended){if(B.decoder){let Se=B.decoder.end();Se&&Se.length&&(B.buffer.push(Se),B.length+=B.objectMode?1:Se.length)}B.ended=!0,B.sync?z(R):(B.needReadable=!1,B.emittedReadable=!0,ne(R))}}function z(R){let B=R._readableState;v("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(v("emitReadable",B.flowing),B.emittedReadable=!0,s.nextTick(ne,R))}function ne(R){let B=R._readableState;v("emitReadable_",B.destroyed,B.length,B.ended),!B.destroyed&&!B.errored&&(B.length||B.ended)&&(R.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,He(R)}function W(R,B){!B.readingMore&&B.constructed&&(B.readingMore=!0,s.nextTick(Y,R,B))}function Y(R,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&B.length===0);){let Se=B.length;if(v("maybeReadMore read 0"),R.read(0),Se===B.length)break}B.readingMore=!1}ce.prototype._read=function(R){throw new x("_read()")},ce.prototype.pipe=function(R,B){let Se=this,xe=this._readableState;xe.pipes.length===1&&(xe.multiAwaitDrain||(xe.multiAwaitDrain=!0,xe.awaitDrainWriters=new d(xe.awaitDrainWriters?[xe.awaitDrainWriters]:[]))),xe.pipes.push(R),v("pipe count=%d opts=%j",xe.pipes.length,B);let ke=(!B||B.end!==!1)&&R!==s.stdout&&R!==s.stderr?tt:Ct;xe.endEmitted?s.nextTick(ke):Se.once("end",ke),R.on("unpipe",Ge);function Ge(lt,ft){v("onunpipe"),lt===Se&&ft&&ft.hasUnpiped===!1&&(ft.hasUnpiped=!0,Gt())}function tt(){v("onend"),R.end()}let st,Ht=!1;function Gt(){v("cleanup"),R.removeListener("close",at),R.removeListener("finish",_t),st&&R.removeListener("drain",st),R.removeListener("error",Rt),R.removeListener("unpipe",Ge),Se.removeListener("end",tt),Se.removeListener("end",Ct),Se.removeListener("data",or),Ht=!0,st&&xe.awaitDrainWriters&&(!R._writableState||R._writableState.needDrain)&&st()}function Qt(){Ht||(xe.pipes.length===1&&xe.pipes[0]===R?(v("false write response, pause",0),xe.awaitDrainWriters=R,xe.multiAwaitDrain=!1):xe.pipes.length>1&&xe.pipes.includes(R)&&(v("false write response, pause",xe.awaitDrainWriters.size),xe.awaitDrainWriters.add(R)),Se.pause()),st||(st=Ae(Se,R),R.on("drain",st))}Se.on("data",or);function or(lt){v("ondata");let ft=R.write(lt);v("dest.write",ft),ft===!1&&Qt()}function Rt(lt){if(v("onerror",lt),Ct(),R.removeListener("error",Rt),R.listenerCount("error")===0){let ft=R._writableState||R._readableState;ft&&!ft.errorEmitted?M(R,lt):R.emit("error",lt)}}A(R,"error",Rt);function at(){R.removeListener("finish",_t),Ct()}R.once("close",at);function _t(){v("onfinish"),R.removeListener("close",at),Ct()}R.once("finish",_t);function Ct(){v("unpipe"),Se.unpipe(R)}return R.emit("pipe",Se),R.writableNeedDrain===!0?Qt():xe.flowing||(v("pipe resume"),Se.resume()),R};function Ae(R,B){return function(){let Se=R._readableState;Se.awaitDrainWriters===B?(v("pipeOnDrain",1),Se.awaitDrainWriters=null):Se.multiAwaitDrain&&(v("pipeOnDrain",Se.awaitDrainWriters.size),Se.awaitDrainWriters.delete(B)),(!Se.awaitDrainWriters||Se.awaitDrainWriters.size===0)&&R.listenerCount("data")&&R.resume()}}ce.prototype.unpipe=function(R){let B=this._readableState,Se={hasUnpiped:!1};if(B.pipes.length===0)return this;if(!R){let ke=B.pipes;B.pipes=[],this.pause();for(let Ge=0;Ge<ke.length;Ge++)ke[Ge].emit("unpipe",this,{hasUnpiped:!1});return this}let xe=l(B.pipes,R);return xe===-1?this:(B.pipes.splice(xe,1),B.pipes.length===0&&this.pause(),R.emit("unpipe",this,Se),this)},ce.prototype.on=function(R,B){let Se=w.prototype.on.call(this,R,B),xe=this._readableState;return R==="data"?(xe.readableListening=this.listenerCount("readable")>0,xe.flowing!==!1&&this.resume()):R==="readable"&&!xe.endEmitted&&!xe.readableListening&&(xe.readableListening=xe.needReadable=!0,xe.flowing=!1,xe.emittedReadable=!1,v("on readable",xe.length,xe.reading),xe.length?z(this):xe.reading||s.nextTick(Oe,this)),Se},ce.prototype.addListener=ce.prototype.on,ce.prototype.removeListener=function(R,B){let Se=w.prototype.removeListener.call(this,R,B);return R==="readable"&&s.nextTick(Te,this),Se},ce.prototype.off=ce.prototype.removeListener,ce.prototype.removeAllListeners=function(R){let B=w.prototype.removeAllListeners.apply(this,arguments);return(R==="readable"||R===void 0)&&s.nextTick(Te,this),B};function Te(R){let B=R._readableState;B.readableListening=R.listenerCount("readable")>0,B.resumeScheduled&&B[Z]===!1?B.flowing=!0:R.listenerCount("data")>0?R.resume():B.readableListening||(B.flowing=null)}function Oe(R){v("readable nexttick read 0"),R.read(0)}ce.prototype.resume=function(){let R=this._readableState;return R.flowing||(v("resume"),R.flowing=!R.readableListening,je(this,R)),R[Z]=!1,this};function je(R,B){B.resumeScheduled||(B.resumeScheduled=!0,s.nextTick(ze,R,B))}function ze(R,B){v("resume",B.reading),B.reading||R.read(0),B.resumeScheduled=!1,R.emit("resume"),He(R),B.flowing&&!B.reading&&R.read(0)}ce.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this};function He(R){let B=R._readableState;for(v("flow",B.flowing);B.flowing&&R.read()!==null;);}ce.prototype.wrap=function(R){let B=!1;R.on("data",xe=>{!this.push(xe)&&R.pause&&(B=!0,R.pause())}),R.on("end",()=>{this.push(null)}),R.on("error",xe=>{M(this,xe)}),R.on("close",()=>{this.destroy()}),R.on("destroy",()=>{this.destroy()}),this._read=()=>{B&&R.resume&&(B=!1,R.resume())};let Se=e(R);for(let xe=1;xe<Se.length;xe++){let ke=Se[xe];this[ke]===void 0&&typeof R[ke]=="function"&&(this[ke]=R[ke].bind(R))}return this},ce.prototype[b]=function(){return Ne(this)},ce.prototype.iterator=function(R){return R!==void 0&&te(R,"options"),Ne(this,R)};function Ne(R,B){typeof R.read!="function"&&(R=ce.wrap(R,{objectMode:!0}));let Se=We(R,B);return Se.stream=R,Se}async function*We(R,B){let Se=ie;function xe(tt){this===R?(Se(),Se=ie):Se=tt}R.on("readable",xe);let ke,Ge=E(R,{writable:!1},tt=>{ke=tt?T(ke,tt):null,Se(),Se=ie});try{for(;;){let tt=R.destroyed?null:R.read();if(tt!==null)yield tt;else{if(ke)throw ke;if(ke===null)return;await new a(xe)}}}catch(tt){throw ke=T(ke,tt),ke}finally{(ke||(B==null?void 0:B.destroyOnReturn)!==!1)&&(ke===void 0||R._readableState.autoDestroy)?P.destroyer(R,null):(R.off("readable",xe),Ge())}}r(ce.prototype,{readable:{__proto__:null,get(){let R=this._readableState;return!!R&&R.readable!==!1&&!R.destroyed&&!R.errorEmitted&&!R.endEmitted},set(R){this._readableState&&(this._readableState.readable=!!R)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(R){this._readableState&&(this._readableState.destroyed=R)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),r(Ee.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Z]!==!1},set(R){this[Z]=!!R}}}),ce._fromList=Re;function Re(R,B){if(B.length===0)return null;let Se;return B.objectMode?Se=B.buffer.shift():!R||R>=B.length?(B.decoder?Se=B.buffer.join(""):B.buffer.length===1?Se=B.buffer.first():Se=B.buffer.concat(B.length),B.buffer.clear()):Se=B.buffer.consume(R,B.decoder),Se}function Be(R){let B=R._readableState;v("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,s.nextTick(De,B,R))}function De(R,B){if(v("endReadableNT",R.endEmitted,R.length),!R.errored&&!R.closeEmitted&&!R.endEmitted&&R.length===0){if(R.endEmitted=!0,B.emit("end"),B.writable&&B.allowHalfOpen===!1)s.nextTick(Ke,B);else if(R.autoDestroy){let Se=B._writableState;(!Se||Se.autoDestroy&&(Se.finished||Se.writable===!1))&&B.destroy()}}}function Ke(R){R.writable&&!R.writableEnded&&!R.destroyed&&R.end()}ce.from=function(R,B){return K(ce,R,B)};var Qe;function ot(){return Qe===void 0&&(Qe={}),Qe}ce.fromWeb=function(R,B){return ot().newStreamReadableFromReadableStream(R,B)},ce.toWeb=function(R,B){return ot().newReadableStreamFromStreamReadable(R,B)},ce.wrap=function(R,B){var Se,xe;return new ce({objectMode:(Se=(xe=R.readableObjectMode)!==null&&xe!==void 0?xe:R.objectMode)!==null&&Se!==void 0?Se:!0,...B,destroy(ke,Ge){P.destroyer(R,ke),Ge(ke)}}).wrap(R)}}),Zi=me((h,f)=>{he(),de(),pe();var s=Lt(),{ArrayPrototypeSlice:l,Error:c,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:t,ObjectDefineProperties:r,ObjectSetPrototypeOf:e,StringPrototypeToLowerCase:i,Symbol:a,SymbolHasInstance:d}=Ve();f.exports=te,te.WritableState=L;var{EventEmitter:p}=(Ut(),Fe(kt)),b=Xi().Stream,{Buffer:m}=(Je(),Fe(Ye)),S=zt(),{addAbortSignal:w}=Lr(),{getHighWaterMark:A,getDefaultHighWaterMark:g}=Dr(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:T,ERR_UNKNOWN_ENCODING:F}=rt().codes,{errorOrDestroy:x}=S;e(te.prototype,b.prototype),e(te,b);function q(){}var V=a("kOnFinished");function L(N,Q,oe){typeof oe!="boolean"&&(oe=Q instanceof yt()),this.objectMode=!!(N&&N.objectMode),oe&&(this.objectMode=this.objectMode||!!(N&&N.writableObjectMode)),this.highWaterMark=N?A(this,N,"writableHighWaterMark",oe):g(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let ye=!!(N&&N.decodeStrings===!1);this.decodeStrings=!ye,this.defaultEncoding=N&&N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=M.bind(void 0,Q),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ae(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!N||N.emitClose!==!1,this.autoDestroy=!N||N.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[V]=[]}function ae(N){N.buffered=[],N.bufferedIndex=0,N.allBuffers=!0,N.allNoop=!0}L.prototype.getBuffer=function(){return l(this.buffered,this.bufferedIndex)},t(L.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function te(N){let Q=this instanceof yt();if(!Q&&!n(te,this))return new te(N);this._writableState=new L(N,this,Q),N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final),typeof N.construct=="function"&&(this._construct=N.construct),N.signal&&w(N.signal,this)),b.call(this,N),S.construct(this,()=>{let oe=this._writableState;oe.writing||_e(this,oe),H(this,oe)})}t(te,d,{__proto__:null,value:function(N){return n(this,N)?!0:this!==te?!1:N&&N._writableState instanceof L}}),te.prototype.pipe=function(){x(this,new C)};function Z(N,Q,oe,ye){let ge=N._writableState;if(typeof oe=="function")ye=oe,oe=ge.defaultEncoding;else{if(!oe)oe=ge.defaultEncoding;else if(oe!=="buffer"&&!m.isEncoding(oe))throw new F(oe);typeof ye!="function"&&(ye=q)}if(Q===null)throw new k;if(!ge.objectMode)if(typeof Q=="string")ge.decodeStrings!==!1&&(Q=m.from(Q,oe),oe="buffer");else if(Q instanceof m)oe="buffer";else if(b._isUint8Array(Q))Q=b._uint8ArrayToBuffer(Q),oe="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],Q);let we;return ge.ending?we=new T:ge.destroyed&&(we=new P("write")),we?(s.nextTick(ye,we),x(N,we,!0),we):(ge.pendingcb++,le(N,ge,Q,oe,ye))}te.prototype.write=function(N,Q,oe){return Z(this,N,Q,oe)===!0},te.prototype.cork=function(){this._writableState.corked++},te.prototype.uncork=function(){let N=this._writableState;N.corked&&(N.corked--,N.writing||_e(this,N))},te.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=i(N)),!m.isEncoding(N))throw new F(N);return this._writableState.defaultEncoding=N,this};function le(N,Q,oe,ye,ge){let we=Q.objectMode?1:oe.length;Q.length+=we;let J=Q.length<Q.highWaterMark;return J||(Q.needDrain=!0),Q.writing||Q.corked||Q.errored||!Q.constructed?(Q.buffered.push({chunk:oe,encoding:ye,callback:ge}),Q.allBuffers&&ye!=="buffer"&&(Q.allBuffers=!1),Q.allNoop&&ge!==q&&(Q.allNoop=!1)):(Q.writelen=we,Q.writecb=ge,Q.writing=!0,Q.sync=!0,N._write(oe,ye,Q.onwrite),Q.sync=!1),J&&!Q.errored&&!Q.destroyed}function K(N,Q,oe,ye,ge,we,J){Q.writelen=ye,Q.writecb=J,Q.writing=!0,Q.sync=!0,Q.destroyed?Q.onwrite(new P("write")):oe?N._writev(ge,Q.onwrite):N._write(ge,we,Q.onwrite),Q.sync=!1}function ie(N,Q,oe,ye){--Q.pendingcb,ye(oe),$(Q),x(N,oe)}function M(N,Q){let oe=N._writableState,ye=oe.sync,ge=oe.writecb;if(typeof ge!="function"){x(N,new v);return}oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0,Q?(Q.stack,oe.errored||(oe.errored=Q),N._readableState&&!N._readableState.errored&&(N._readableState.errored=Q),ye?s.nextTick(ie,N,oe,Q,ge):ie(N,oe,Q,ge)):(oe.buffered.length>oe.bufferedIndex&&_e(N,oe),ye?oe.afterWriteTickInfo!==null&&oe.afterWriteTickInfo.cb===ge?oe.afterWriteTickInfo.count++:(oe.afterWriteTickInfo={count:1,cb:ge,stream:N,state:oe},s.nextTick(G,oe.afterWriteTickInfo)):fe(N,oe,1,ge))}function G({stream:N,state:Q,count:oe,cb:ye}){return Q.afterWriteTickInfo=null,fe(N,Q,oe,ye)}function fe(N,Q,oe,ye){for(!Q.ending&&!N.destroyed&&Q.length===0&&Q.needDrain&&(Q.needDrain=!1,N.emit("drain"));oe-- >0;)Q.pendingcb--,ye();Q.destroyed&&$(Q),H(N,Q)}function $(N){if(N.writing)return;for(let ge=N.bufferedIndex;ge<N.buffered.length;++ge){var Q;let{chunk:we,callback:J}=N.buffered[ge],ve=N.objectMode?1:we.length;N.length-=ve,J((Q=N.errored)!==null&&Q!==void 0?Q:new P("write"))}let oe=N[V].splice(0);for(let ge=0;ge<oe.length;ge++){var ye;oe[ge]((ye=N.errored)!==null&&ye!==void 0?ye:new P("end"))}ae(N)}function _e(N,Q){if(Q.corked||Q.bufferProcessing||Q.destroyed||!Q.constructed)return;let{buffered:oe,bufferedIndex:ye,objectMode:ge}=Q,we=oe.length-ye;if(!we)return;let J=ye;if(Q.bufferProcessing=!0,we>1&&N._writev){Q.pendingcb-=we-1;let ve=Q.allNoop?q:ce=>{for(let Me=J;Me<oe.length;++Me)oe[Me].callback(ce)},Ee=Q.allNoop&&J===0?oe:l(oe,J);Ee.allBuffers=Q.allBuffers,K(N,Q,!0,Q.length,Ee,"",ve),ae(Q)}else{do{let{chunk:ve,encoding:Ee,callback:ce}=oe[J];oe[J++]=null;let Me=ge?1:ve.length;K(N,Q,!1,Me,ve,Ee,ce)}while(J<oe.length&&!Q.writing);J===oe.length?ae(Q):J>256?(oe.splice(0,J),Q.bufferedIndex=0):Q.bufferedIndex=J}Q.bufferProcessing=!1}te.prototype._write=function(N,Q,oe){if(this._writev)this._writev([{chunk:N,encoding:Q}],oe);else throw new E("_write()")},te.prototype._writev=null,te.prototype.end=function(N,Q,oe){let ye=this._writableState;typeof N=="function"?(oe=N,N=null,Q=null):typeof Q=="function"&&(oe=Q,Q=null);let ge;if(N!=null){let we=Z(this,N,Q);we instanceof c&&(ge=we)}return ye.corked&&(ye.corked=1,this.uncork()),ge||(!ye.errored&&!ye.ending?(ye.ending=!0,H(this,ye,!0),ye.ended=!0):ye.finished?ge=new I("end"):ye.destroyed&&(ge=new P("end"))),typeof oe=="function"&&(ge||ye.finished?s.nextTick(oe,ge):ye[V].push(oe)),this};function X(N){return N.ending&&!N.destroyed&&N.constructed&&N.length===0&&!N.errored&&N.buffered.length===0&&!N.finished&&!N.writing&&!N.errorEmitted&&!N.closeEmitted}function D(N,Q){let oe=!1;function ye(ge){if(oe){x(N,ge??v());return}if(oe=!0,Q.pendingcb--,ge){let we=Q[V].splice(0);for(let J=0;J<we.length;J++)we[J](ge);x(N,ge,Q.sync)}else X(Q)&&(Q.prefinished=!0,N.emit("prefinish"),Q.pendingcb++,s.nextTick(ee,N,Q))}Q.sync=!0,Q.pendingcb++;try{N._final(ye)}catch(ge){ye(ge)}Q.sync=!1}function se(N,Q){!Q.prefinished&&!Q.finalCalled&&(typeof N._final=="function"&&!Q.destroyed?(Q.finalCalled=!0,D(N,Q)):(Q.prefinished=!0,N.emit("prefinish")))}function H(N,Q,oe){X(Q)&&(se(N,Q),Q.pendingcb===0&&(oe?(Q.pendingcb++,s.nextTick((ye,ge)=>{X(ge)?ee(ye,ge):ge.pendingcb--},N,Q)):X(Q)&&(Q.pendingcb++,ee(N,Q))))}function ee(N,Q){Q.pendingcb--,Q.finished=!0;let oe=Q[V].splice(0);for(let ye=0;ye<oe.length;ye++)oe[ye]();if(N.emit("finish"),Q.autoDestroy){let ye=N._readableState;(!ye||ye.autoDestroy&&(ye.endEmitted||ye.readable===!1))&&N.destroy()}}r(te.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(N){this._writableState&&(this._writableState.destroyed=N)}},writable:{__proto__:null,get(){let N=this._writableState;return!!N&&N.writable!==!1&&!N.destroyed&&!N.errored&&!N.ending&&!N.ended},set(N){this._writableState&&(this._writableState.writable=!!N)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let N=this._writableState;return N?!N.destroyed&&!N.ending&&N.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var re=S.destroy;te.prototype.destroy=function(N,Q){let oe=this._writableState;return!oe.destroyed&&(oe.bufferedIndex<oe.buffered.length||oe[V].length)&&s.nextTick($,oe),re.call(this,N,Q),this},te.prototype._undestroy=S.undestroy,te.prototype._destroy=function(N,Q){Q(N)},te.prototype[p.captureRejectionSymbol]=function(N){this.destroy(N)};var be;function ue(){return be===void 0&&(be={}),be}te.fromWeb=function(N,Q){return ue().newStreamWritableFromWritableStream(N,Q)},te.toWeb=function(N){return ue().newWritableStreamFromStreamWritable(N)}}),hl=me((h,f)=>{he(),de(),pe();var s=Lt(),l=(Je(),Fe(Ye)),{isReadable:c,isWritable:n,isIterable:t,isNodeStream:r,isReadableNodeStream:e,isWritableNodeStream:i,isDuplexNodeStream:a,isReadableStream:d,isWritableStream:p}=mt(),b=Pt(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:S,ERR_INVALID_RETURN_VALUE:w}}=rt(),{destroyer:A}=zt(),g=yt(),_=Fr(),E=Zi(),{createDeferredPromise:v}=nt(),C=Fs(),P=globalThis.Blob||l.Blob,I=typeof P<"u"?function(V){return V instanceof P}:function(V){return!1},k=globalThis.AbortController||rr().AbortController,{FunctionPrototypeCall:T}=Ve(),F=class extends g{constructor(V){super(V),(V==null?void 0:V.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(V==null?void 0:V.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};f.exports=function V(L,ae){if(a(L))return L;if(e(L))return q({readable:L});if(i(L))return q({writable:L});if(r(L))return q({writable:!1,readable:!1});if(d(L))return q({readable:_.fromWeb(L)});if(p(L))return q({writable:E.fromWeb(L)});if(typeof L=="function"){let{value:Z,write:le,final:K,destroy:ie}=x(L);if(t(Z))return C(F,Z,{objectMode:!0,write:le,final:K,destroy:ie});let M=Z==null?void 0:Z.then;if(typeof M=="function"){let G,fe=T(M,Z,$=>{if($!=null)throw new w("nully","body",$)},$=>{A(G,$)});return G=new F({objectMode:!0,readable:!1,write:le,final($){K(async()=>{try{await fe,s.nextTick($,null)}catch(_e){s.nextTick($,_e)}})},destroy:ie})}throw new w("Iterable, AsyncIterable or AsyncFunction",ae,Z)}if(I(L))return V(L.arrayBuffer());if(t(L))return C(F,L,{objectMode:!0,writable:!1});if(d(L==null?void 0:L.readable)&&p(L==null?void 0:L.writable))return F.fromWeb(L);if(typeof(L==null?void 0:L.writable)=="object"||typeof(L==null?void 0:L.readable)=="object"){let Z=L!=null&&L.readable?e(L==null?void 0:L.readable)?L==null?void 0:L.readable:V(L.readable):void 0,le=L!=null&&L.writable?i(L==null?void 0:L.writable)?L==null?void 0:L.writable:V(L.writable):void 0;return q({readable:Z,writable:le})}let te=L==null?void 0:L.then;if(typeof te=="function"){let Z;return T(te,L,le=>{le!=null&&Z.push(le),Z.push(null)},le=>{A(Z,le)}),Z=new F({objectMode:!0,writable:!1,read(){}})}throw new S(ae,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],L)};function x(V){let{promise:L,resolve:ae}=v(),te=new k,Z=te.signal;return{value:V(async function*(){for(;;){let le=L;L=null;let{chunk:K,done:ie,cb:M}=await le;if(s.nextTick(M),ie)return;if(Z.aborted)throw new m(void 0,{cause:Z.reason});({promise:L,resolve:ae}=v()),yield K}}(),{signal:Z}),write(le,K,ie){let M=ae;ae=null,M({chunk:le,done:!1,cb:ie})},final(le){let K=ae;ae=null,K({done:!0,cb:le})},destroy(le,K){te.abort(),K(le)}}}function q(V){let L=V.readable&&typeof V.readable.read!="function"?_.wrap(V.readable):V.readable,ae=V.writable,te=!!c(L),Z=!!n(ae),le,K,ie,M,G;function fe($){let _e=M;M=null,_e?_e($):$&&G.destroy($)}return G=new F({readableObjectMode:!!(L!=null&&L.readableObjectMode),writableObjectMode:!!(ae!=null&&ae.writableObjectMode),readable:te,writable:Z}),Z&&(b(ae,$=>{Z=!1,$&&A(L,$),fe($)}),G._write=function($,_e,X){ae.write($,_e)?X():le=X},G._final=function($){ae.end(),K=$},ae.on("drain",function(){if(le){let $=le;le=null,$()}}),ae.on("finish",function(){if(K){let $=K;K=null,$()}})),te&&(b(L,$=>{te=!1,$&&A(L,$),fe($)}),L.on("readable",function(){if(ie){let $=ie;ie=null,$()}}),L.on("end",function(){G.push(null)}),G._read=function(){for(;;){let $=L.read();if($===null){ie=G._read;return}if(!G.push($))return}}),G._destroy=function($,_e){!$&&M!==null&&($=new m),ie=null,le=null,K=null,M===null?_e($):(M=_e,A(ae,$),A(L,$))},G}}),yt=me((h,f)=>{he(),de(),pe();var{ObjectDefineProperties:s,ObjectGetOwnPropertyDescriptor:l,ObjectKeys:c,ObjectSetPrototypeOf:n}=Ve();f.exports=e;var t=Fr(),r=Zi();n(e.prototype,t.prototype),n(e,t);{let p=c(r.prototype);for(let b=0;b<p.length;b++){let m=p[b];e.prototype[m]||(e.prototype[m]=r.prototype[m])}}function e(p){if(!(this instanceof e))return new e(p);t.call(this,p),r.call(this,p),p?(this.allowHalfOpen=p.allowHalfOpen!==!1,p.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),p.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}s(e.prototype,{writable:{__proto__:null,...l(r.prototype,"writable")},writableHighWaterMark:{__proto__:null,...l(r.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...l(r.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...l(r.prototype,"writableBuffer")},writableLength:{__proto__:null,...l(r.prototype,"writableLength")},writableFinished:{__proto__:null,...l(r.prototype,"writableFinished")},writableCorked:{__proto__:null,...l(r.prototype,"writableCorked")},writableEnded:{__proto__:null,...l(r.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...l(r.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(p){this._readableState&&this._writableState&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}});var i;function a(){return i===void 0&&(i={}),i}e.fromWeb=function(p,b){return a().newStreamDuplexFromReadableWritablePair(p,b)},e.toWeb=function(p){return a().newReadableWritablePairFromDuplex(p)};var d;e.from=function(p){return d||(d=hl()),d(p,"body")}}),Ws=me((h,f)=>{he(),de(),pe();var{ObjectSetPrototypeOf:s,Symbol:l}=Ve();f.exports=e;var{ERR_METHOD_NOT_IMPLEMENTED:c}=rt().codes,n=yt(),{getHighWaterMark:t}=Dr();s(e.prototype,n.prototype),s(e,n);var r=l("kCallback");function e(d){if(!(this instanceof e))return new e(d);let p=d?t(this,d,"readableHighWaterMark",!0):null;p===0&&(d={...d,highWaterMark:null,readableHighWaterMark:p,writableHighWaterMark:d.writableHighWaterMark||0}),n.call(this,d),this._readableState.sync=!1,this[r]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",a)}function i(d){typeof this._flush=="function"&&!this.destroyed?this._flush((p,b)=>{if(p){d?d(p):this.destroy(p);return}b!=null&&this.push(b),this.push(null),d&&d()}):(this.push(null),d&&d())}function a(){this._final!==i&&i.call(this)}e.prototype._final=i,e.prototype._transform=function(d,p,b){throw new c("_transform()")},e.prototype._write=function(d,p,b){let m=this._readableState,S=this._writableState,w=m.length;this._transform(d,p,(A,g)=>{if(A){b(A);return}g!=null&&this.push(g),S.ended||w===m.length||m.length<m.highWaterMark?b():this[r]=b})},e.prototype._read=function(){if(this[r]){let d=this[r];this[r]=null,d()}}}),qs=me((h,f)=>{he(),de(),pe();var{ObjectSetPrototypeOf:s}=Ve();f.exports=c;var l=Ws();s(c.prototype,l.prototype),s(c,l);function c(n){if(!(this instanceof c))return new c(n);l.call(this,n)}c.prototype._transform=function(n,t,r){r(null,n)}}),eo=me((h,f)=>{he(),de(),pe();var s=Lt(),{ArrayIsArray:l,Promise:c,SymbolAsyncIterator:n,SymbolDispose:t}=Ve(),r=Pt(),{once:e}=nt(),i=zt(),a=yt(),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:A}=rt(),{validateFunction:g,validateAbortSignal:_}=nr(),{isIterable:E,isReadable:v,isReadableNodeStream:C,isNodeStream:P,isTransformStream:I,isWebStream:k,isReadableStream:T,isReadableFinished:F}=mt(),x=globalThis.AbortController||rr().AbortController,q,V,L;function ae($,_e,X){let D=!1;$.on("close",()=>{D=!0});let se=r($,{readable:_e,writable:X},H=>{D=!H});return{destroy:H=>{D||(D=!0,i.destroyer($,H||new S("pipe")))},cleanup:se}}function te($){return g($[$.length-1],"streams[stream.length - 1]"),$.pop()}function Z($){if(E($))return $;if(C($))return le($);throw new p("val",["Readable","Iterable","AsyncIterable"],$)}async function*le($){V||(V=Fr()),yield*V.prototype[n].call($)}async function K($,_e,X,{end:D}){let se,H=null,ee=ue=>{if(ue&&(se=ue),H){let N=H;H=null,N()}},re=()=>new c((ue,N)=>{se?N(se):H=()=>{se?N(se):ue()}});_e.on("drain",ee);let be=r(_e,{readable:!1},ee);try{_e.writableNeedDrain&&await re();for await(let ue of $)_e.write(ue)||await re();D&&(_e.end(),await re()),X()}catch(ue){X(se!==ue?d(se,ue):ue)}finally{be(),_e.off("drain",ee)}}async function ie($,_e,X,{end:D}){I(_e)&&(_e=_e.writable);let se=_e.getWriter();try{for await(let H of $)await se.ready,se.write(H).catch(()=>{});await se.ready,D&&await se.close(),X()}catch(H){try{await se.abort(H),X(H)}catch(ee){X(ee)}}}function M(...$){return G($,e(te($)))}function G($,_e,X){if($.length===1&&l($[0])&&($=$[0]),$.length<2)throw new m("streams");let D=new x,se=D.signal,H=X==null?void 0:X.signal,ee=[];_(H,"options.signal");function re(){ge(new A)}L=L||nt().addAbortListener;let be;H&&(be=L(H,re));let ue,N,Q=[],oe=0;function ye(Ee){ge(Ee,--oe===0)}function ge(Ee,ce){var Me;if(Ee&&(!ue||ue.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ue=Ee),!(!ue&&!ce)){for(;Q.length;)Q.shift()(ue);(Me=be)===null||Me===void 0||Me[t](),D.abort(),ce&&(ue||ee.forEach(o=>o()),s.nextTick(_e,ue,N))}}let we;for(let Ee=0;Ee<$.length;Ee++){let ce=$[Ee],Me=Ee<$.length-1,o=Ee>0,u=Me||(X==null?void 0:X.end)!==!1,y=Ee===$.length-1;if(P(ce)){let O=function(j){j&&j.name!=="AbortError"&&j.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ye(j)};if(u){let{destroy:j,cleanup:z}=ae(ce,Me,o);Q.push(j),v(ce)&&y&&ee.push(z)}ce.on("error",O),v(ce)&&y&&ee.push(()=>{ce.removeListener("error",O)})}if(Ee===0)if(typeof ce=="function"){if(we=ce({signal:se}),!E(we))throw new b("Iterable, AsyncIterable or Stream","source",we)}else E(ce)||C(ce)||I(ce)?we=ce:we=a.from(ce);else if(typeof ce=="function"){if(I(we)){var J;we=Z((J=we)===null||J===void 0?void 0:J.readable)}else we=Z(we);if(we=ce(we,{signal:se}),Me){if(!E(we,!0))throw new b("AsyncIterable",`transform[${Ee-1}]`,we)}else{var ve;q||(q=qs());let O=new q({objectMode:!0}),j=(ve=we)===null||ve===void 0?void 0:ve.then;if(typeof j=="function")oe++,j.call(we,W=>{N=W,W!=null&&O.write(W),u&&O.end(),s.nextTick(ye)},W=>{O.destroy(W),s.nextTick(ye,W)});else if(E(we,!0))oe++,K(we,O,ye,{end:u});else if(T(we)||I(we)){let W=we.readable||we;oe++,K(W,O,ye,{end:u})}else throw new b("AsyncIterable or Promise","destination",we);we=O;let{destroy:z,cleanup:ne}=ae(we,!1,!0);Q.push(z),y&&ee.push(ne)}}else if(P(ce)){if(C(we)){oe+=2;let O=fe(we,ce,ye,{end:u});v(ce)&&y&&ee.push(O)}else if(I(we)||T(we)){let O=we.readable||we;oe++,K(O,ce,ye,{end:u})}else if(E(we))oe++,K(we,ce,ye,{end:u});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=ce}else if(k(ce)){if(C(we))oe++,ie(Z(we),ce,ye,{end:u});else if(T(we)||E(we))oe++,ie(we,ce,ye,{end:u});else if(I(we))oe++,ie(we.readable,ce,ye,{end:u});else throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],we);we=ce}else we=a.from(ce)}return(se!=null&&se.aborted||H!=null&&H.aborted)&&s.nextTick(re),we}function fe($,_e,X,{end:D}){let se=!1;if(_e.on("close",()=>{se||X(new w)}),$.pipe(_e,{end:!1}),D){let H=function(){se=!0,_e.end()};F($)?s.nextTick(H):$.once("end",H)}else X();return r($,{readable:!0,writable:!1},H=>{let ee=$._readableState;H&&H.code==="ERR_STREAM_PREMATURE_CLOSE"&&ee&&ee.ended&&!ee.errored&&!ee.errorEmitted?$.once("end",X).once("error",X):X(H)}),r(_e,{readable:!1,writable:!0},X)}f.exports={pipelineImpl:G,pipeline:M}}),$s=me((h,f)=>{he(),de(),pe();var{pipeline:s}=eo(),l=yt(),{destroyer:c}=zt(),{isNodeStream:n,isReadable:t,isWritable:r,isWebStream:e,isTransformStream:i,isWritableStream:a,isReadableStream:d}=mt(),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:m}}=rt(),S=Pt();f.exports=function(...w){if(w.length===0)throw new m("streams");if(w.length===1)return l.from(w[0]);let A=[...w];if(typeof w[0]=="function"&&(w[0]=l.from(w[0])),typeof w[w.length-1]=="function"){let x=w.length-1;w[x]=l.from(w[x])}for(let x=0;x<w.length;++x)if(!(!n(w[x])&&!e(w[x]))){if(x<w.length-1&&!(t(w[x])||d(w[x])||i(w[x])))throw new b(`streams[${x}]`,A[x],"must be readable");if(x>0&&!(r(w[x])||a(w[x])||i(w[x])))throw new b(`streams[${x}]`,A[x],"must be writable")}let g,_,E,v,C;function P(x){let q=v;v=null,q?q(x):x?C.destroy(x):!F&&!T&&C.destroy()}let I=w[0],k=s(w,P),T=!!(r(I)||a(I)||i(I)),F=!!(t(k)||d(k)||i(k));if(C=new l({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(k!=null&&k.readableObjectMode),writable:T,readable:F}),T){if(n(I))C._write=function(q,V,L){I.write(q,V)?L():g=L},C._final=function(q){I.end(),_=q},I.on("drain",function(){if(g){let q=g;g=null,q()}});else if(e(I)){let q=(i(I)?I.writable:I).getWriter();C._write=async function(V,L,ae){try{await q.ready,q.write(V).catch(()=>{}),ae()}catch(te){ae(te)}},C._final=async function(V){try{await q.ready,q.close().catch(()=>{}),_=V}catch(L){V(L)}}}let x=i(k)?k.readable:k;S(x,()=>{if(_){let q=_;_=null,q()}})}if(F){if(n(k))k.on("readable",function(){if(E){let x=E;E=null,x()}}),k.on("end",function(){C.push(null)}),C._read=function(){for(;;){let x=k.read();if(x===null){E=C._read;return}if(!C.push(x))return}};else if(e(k)){let x=(i(k)?k.readable:k).getReader();C._read=async function(){for(;;)try{let{value:q,done:V}=await x.read();if(!C.push(q))return;if(V){C.push(null);return}}catch{return}}}}return C._destroy=function(x,q){!x&&v!==null&&(x=new p),E=null,g=null,_=null,v===null?q(x):(v=q,n(k)&&c(k,x))},C}}),pl=me((h,f)=>{he(),de(),pe();var s=globalThis.AbortController||rr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:l,ERR_INVALID_ARG_TYPE:c,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:t},AbortError:r}=rt(),{validateAbortSignal:e,validateInteger:i,validateObject:a}=nr(),d=Ve().Symbol("kWeak"),p=Ve().Symbol("kResistStopPropagation"),{finished:b}=Pt(),m=$s(),{addAbortSignalNoValidate:S}=Lr(),{isWritable:w,isNodeStream:A}=mt(),{deprecate:g}=nt(),{ArrayPrototypePush:_,Boolean:E,MathFloor:v,Number:C,NumberIsNaN:P,Promise:I,PromiseReject:k,PromiseResolve:T,PromisePrototypeThen:F,Symbol:x}=Ve(),q=x("kEmpty"),V=x("kEof");function L(H,ee){if(ee!=null&&a(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),A(H)&&!w(H))throw new l("stream",H,"must be writable");let re=m(this,H);return ee!=null&&ee.signal&&S(ee.signal,re),re}function ae(H,ee){if(typeof H!="function")throw new c("fn",["Function","AsyncFunction"],H);ee!=null&&a(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal");let re=1;(ee==null?void 0:ee.concurrency)!=null&&(re=v(ee.concurrency));let be=re-1;return(ee==null?void 0:ee.highWaterMark)!=null&&(be=v(ee.highWaterMark)),i(re,"options.concurrency",1),i(be,"options.highWaterMark",0),be+=re,(async function*(){let ue=nt().AbortSignalAny([ee==null?void 0:ee.signal].filter(E)),N=this,Q=[],oe={signal:ue},ye,ge,we=!1,J=0;function ve(){we=!0,Ee()}function Ee(){J-=1,ce()}function ce(){ge&&!we&&J<re&&Q.length<be&&(ge(),ge=null)}async function Me(){try{for await(let o of N){if(we)return;if(ue.aborted)throw new r;try{if(o=H(o,oe),o===q)continue;o=T(o)}catch(u){o=k(u)}J+=1,F(o,Ee,ve),Q.push(o),ye&&(ye(),ye=null),!we&&(Q.length>=be||J>=re)&&await new I(u=>{ge=u})}Q.push(V)}catch(o){let u=k(o);F(u,Ee,ve),Q.push(u)}finally{we=!0,ye&&(ye(),ye=null)}}Me();try{for(;;){for(;Q.length>0;){let o=await Q[0];if(o===V)return;if(ue.aborted)throw new r;o!==q&&(yield o),Q.shift(),ce()}await new I(o=>{ye=o})}}finally{we=!0,ge&&(ge(),ge=null)}}).call(this)}function te(H=void 0){return H!=null&&a(H,"options"),(H==null?void 0:H.signal)!=null&&e(H.signal,"options.signal"),(async function*(){let ee=0;for await(let be of this){var re;if(H!=null&&(re=H.signal)!==null&&re!==void 0&&re.aborted)throw new r({cause:H.signal.reason});yield[ee++,be]}}).call(this)}async function Z(H,ee=void 0){for await(let re of M.call(this,H,ee))return!0;return!1}async function le(H,ee=void 0){if(typeof H!="function")throw new c("fn",["Function","AsyncFunction"],H);return!await Z.call(this,async(...re)=>!await H(...re),ee)}async function K(H,ee){for await(let re of M.call(this,H,ee))return re}async function ie(H,ee){if(typeof H!="function")throw new c("fn",["Function","AsyncFunction"],H);async function re(be,ue){return await H(be,ue),q}for await(let be of ae.call(this,re,ee));}function M(H,ee){if(typeof H!="function")throw new c("fn",["Function","AsyncFunction"],H);async function re(be,ue){return await H(be,ue)?be:q}return ae.call(this,re,ee)}var G=class extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function fe(H,ee,re){var be;if(typeof H!="function")throw new c("reducer",["Function","AsyncFunction"],H);re!=null&&a(re,"options"),(re==null?void 0:re.signal)!=null&&e(re.signal,"options.signal");let ue=arguments.length>1;if(re!=null&&(be=re.signal)!==null&&be!==void 0&&be.aborted){let ge=new r(void 0,{cause:re.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(ge)),ge}let N=new s,Q=N.signal;if(re!=null&&re.signal){let ge={once:!0,[d]:this,[p]:!0};re.signal.addEventListener("abort",()=>N.abort(),ge)}let oe=!1;try{for await(let ge of this){var ye;if(oe=!0,re!=null&&(ye=re.signal)!==null&&ye!==void 0&&ye.aborted)throw new r;ue?ee=await H(ee,ge,{signal:Q}):(ee=ge,ue=!0)}if(!oe&&!ue)throw new G}finally{N.abort()}return ee}async function $(H){H!=null&&a(H,"options"),(H==null?void 0:H.signal)!=null&&e(H.signal,"options.signal");let ee=[];for await(let be of this){var re;if(H!=null&&(re=H.signal)!==null&&re!==void 0&&re.aborted)throw new r(void 0,{cause:H.signal.reason});_(ee,be)}return ee}function _e(H,ee){let re=ae.call(this,H,ee);return(async function*(){for await(let be of re)yield*be}).call(this)}function X(H){if(H=C(H),P(H))return 0;if(H<0)throw new t("number",">= 0",H);return H}function D(H,ee=void 0){return ee!=null&&a(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),H=X(H),(async function*(){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new r;for await(let ue of this){var be;if(ee!=null&&(be=ee.signal)!==null&&be!==void 0&&be.aborted)throw new r;H--<=0&&(yield ue)}}).call(this)}function se(H,ee=void 0){return ee!=null&&a(ee,"options"),(ee==null?void 0:ee.signal)!=null&&e(ee.signal,"options.signal"),H=X(H),(async function*(){var re;if(ee!=null&&(re=ee.signal)!==null&&re!==void 0&&re.aborted)throw new r;for await(let ue of this){var be;if(ee!=null&&(be=ee.signal)!==null&&be!==void 0&&be.aborted)throw new r;if(H-- >0&&(yield ue),H<=0)return}}).call(this)}f.exports.streamReturningOperators={asIndexedPairs:g(te,"readable.asIndexedPairs will be removed in a future version."),drop:D,filter:M,flatMap:_e,map:ae,take:se,compose:L},f.exports.promiseReturningOperators={every:le,forEach:ie,reduce:fe,toArray:$,some:Z,find:K}}),zs=me((h,f)=>{he(),de(),pe();var{ArrayPrototypePop:s,Promise:l}=Ve(),{isIterable:c,isNodeStream:n,isWebStream:t}=mt(),{pipelineImpl:r}=eo(),{finished:e}=Pt();Vs();function i(...a){return new l((d,p)=>{let b,m,S=a[a.length-1];if(S&&typeof S=="object"&&!n(S)&&!c(S)&&!t(S)){let w=s(a);b=w.signal,m=w.end}r(a,(w,A)=>{w?p(w):d(A)},{signal:b,end:m})})}f.exports={finished:e,pipeline:i}}),Vs=me((h,f)=>{he(),de(),pe();var{Buffer:s}=(Je(),Fe(Ye)),{ObjectDefineProperty:l,ObjectKeys:c,ReflectApply:n}=Ve(),{promisify:{custom:t}}=nt(),{streamReturningOperators:r,promiseReturningOperators:e}=pl(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:i}}=rt(),a=$s(),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=Dr(),{pipeline:b}=eo(),{destroyer:m}=zt(),S=Pt(),w=zs(),A=mt(),g=f.exports=Xi().Stream;g.isDestroyed=A.isDestroyed,g.isDisturbed=A.isDisturbed,g.isErrored=A.isErrored,g.isReadable=A.isReadable,g.isWritable=A.isWritable,g.Readable=Fr();for(let E of c(r)){let v=function(...P){if(new.target)throw i();return g.Readable.from(n(C,this,P))},C=r[E];l(v,"name",{__proto__:null,value:C.name}),l(v,"length",{__proto__:null,value:C.length}),l(g.Readable.prototype,E,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}for(let E of c(e)){let v=function(...P){if(new.target)throw i();return n(C,this,P)},C=e[E];l(v,"name",{__proto__:null,value:C.name}),l(v,"length",{__proto__:null,value:C.length}),l(g.Readable.prototype,E,{__proto__:null,value:v,enumerable:!1,configurable:!0,writable:!0})}g.Writable=Zi(),g.Duplex=yt(),g.Transform=Ws(),g.PassThrough=qs(),g.pipeline=b;var{addAbortSignal:_}=Lr();g.addAbortSignal=_,g.finished=S,g.destroy=m,g.compose=a,g.setDefaultHighWaterMark=d,g.getDefaultHighWaterMark=p,l(g,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),l(b,t,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),l(S,t,{__proto__:null,enumerable:!0,get(){return w.finished}}),g.Stream=g,g._isUint8Array=function(E){return E instanceof Uint8Array},g._uint8ArrayToBuffer=function(E){return s.from(E.buffer,E.byteOffset,E.byteLength)}}),Dt=me((h,f)=>{he(),de(),pe();var s=Vs(),l=zs(),c=s.Readable.destroy;f.exports=s.Readable,f.exports._uint8ArrayToBuffer=s._uint8ArrayToBuffer,f.exports._isUint8Array=s._isUint8Array,f.exports.isDisturbed=s.isDisturbed,f.exports.isErrored=s.isErrored,f.exports.isReadable=s.isReadable,f.exports.Readable=s.Readable,f.exports.Writable=s.Writable,f.exports.Duplex=s.Duplex,f.exports.Transform=s.Transform,f.exports.PassThrough=s.PassThrough,f.exports.addAbortSignal=s.addAbortSignal,f.exports.finished=s.finished,f.exports.destroy=s.destroy,f.exports.destroy=c,f.exports.pipeline=s.pipeline,f.exports.compose=s.compose,Object.defineProperty(s,"promises",{configurable:!0,enumerable:!0,get(){return l}}),f.exports.Stream=s.Stream,f.exports.default=f.exports}),dl=me((h,f)=>{he(),de(),pe(),typeof Object.create=="function"?f.exports=function(s,l){l&&(s.super_=l,s.prototype=Object.create(l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:f.exports=function(s,l){if(l){s.super_=l;var c=function(){};c.prototype=l.prototype,s.prototype=new c,s.prototype.constructor=s}}}),gl=me((h,f)=>{he(),de(),pe();var{Buffer:s}=(Je(),Fe(Ye)),l=Symbol.for("BufferList");function c(n){if(!(this instanceof c))return new c(n);c._init.call(this,n)}c._init=function(n){Object.defineProperty(this,l,{value:!0}),this._bufs=[],this.length=0,n&&this.append(n)},c.prototype._new=function(n){return new c(n)},c.prototype._offset=function(n){if(n===0)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){let e=t+this._bufs[r].length;if(n<e||r===this._bufs.length-1)return[r,n-t];t=e}},c.prototype._reverseOffset=function(n){let t=n[0],r=n[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},c.prototype.getBuffers=function(){return this._bufs},c.prototype.get=function(n){if(n>this.length||n<0)return;let t=this._offset(n);return this._bufs[t[0]][t[1]]},c.prototype.slice=function(n,t){return typeof n=="number"&&n<0&&(n+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,n,t)},c.prototype.copy=function(n,t,r,e){if((typeof r!="number"||r<0)&&(r=0),(typeof e!="number"||e>this.length)&&(e=this.length),r>=this.length||e<=0)return n||s.alloc(0);let i=!!n,a=this._offset(r),d=e-r,p=d,b=i&&t||0,m=a[1];if(r===0&&e===this.length){if(!i)return this._bufs.length===1?this._bufs[0]:s.concat(this._bufs,this.length);for(let S=0;S<this._bufs.length;S++)this._bufs[S].copy(n,b),b+=this._bufs[S].length;return n}if(p<=this._bufs[a[0]].length-m)return i?this._bufs[a[0]].copy(n,t,m,m+p):this._bufs[a[0]].slice(m,m+p);i||(n=s.allocUnsafe(d));for(let S=a[0];S<this._bufs.length;S++){let w=this._bufs[S].length-m;if(p>w)this._bufs[S].copy(n,b,m),b+=w;else{this._bufs[S].copy(n,b,m,m+p),b+=w;break}p-=w,m&&(m=0)}return n.length>b?n.slice(0,b):n},c.prototype.shallowSlice=function(n,t){if(n=n||0,t=typeof t!="number"?this.length:t,n<0&&(n+=this.length),t<0&&(t+=this.length),n===t)return this._new();let r=this._offset(n),e=this._offset(t),i=this._bufs.slice(r[0],e[0]+1);return e[1]===0?i.pop():i[i.length-1]=i[i.length-1].slice(0,e[1]),r[1]!==0&&(i[0]=i[0].slice(r[1])),this._new(i)},c.prototype.toString=function(n,t,r){return this.slice(t,r).toString(n)},c.prototype.consume=function(n){if(n=Math.trunc(n),Number.isNaN(n)||n<=0)return this;for(;this._bufs.length;)if(n>=this._bufs[0].length)n-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(n),this.length-=n;break}return this},c.prototype.duplicate=function(){let n=this._new();for(let t=0;t<this._bufs.length;t++)n.append(this._bufs[t]);return n},c.prototype.append=function(n){return this._attach(n,c.prototype._appendBuffer)},c.prototype.prepend=function(n){return this._attach(n,c.prototype._prependBuffer,!0)},c.prototype._attach=function(n,t,r){if(n==null)return this;if(n.buffer)t.call(this,s.from(n.buffer,n.byteOffset,n.byteLength));else if(Array.isArray(n)){let[e,i]=r?[n.length-1,-1]:[0,1];for(let a=e;a>=0&&a<n.length;a+=i)this._attach(n[a],t,r)}else if(this._isBufferList(n)){let[e,i]=r?[n._bufs.length-1,-1]:[0,1];for(let a=e;a>=0&&a<n._bufs.length;a+=i)this._attach(n._bufs[a],t,r)}else typeof n=="number"&&(n=n.toString()),t.call(this,s.from(n));return this},c.prototype._appendBuffer=function(n){this._bufs.push(n),this.length+=n.length},c.prototype._prependBuffer=function(n){this._bufs.unshift(n),this.length+=n.length},c.prototype.indexOf=function(n,t,r){if(r===void 0&&typeof t=="string"&&(r=t,t=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=s.from([n]):typeof n=="string"?n=s.from(n,r):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=s.from(n.buffer,n.byteOffset,n.byteLength):s.isBuffer(n)||(n=s.from(n)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),n.length===0)return t>this.length?this.length:t;let e=this._offset(t),i=e[0],a=e[1];for(;i<this._bufs.length;i++){let d=this._bufs[i];for(;a<d.length;)if(d.length-a>=n.length){let p=d.indexOf(n,a);if(p!==-1)return this._reverseOffset([i,p]);a=d.length-n.length+1}else{let p=this._reverseOffset([i,a]);if(this._match(p,n))return p;a++}a=0}return-1},c.prototype._match=function(n,t){if(this.length-n<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(n+r)!==t[r])return!1;return!0},function(){let n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in n)(function(r){n[r]===null?c.prototype[r]=function(e,i){return this.slice(e,e+i)[r](0,i)}:c.prototype[r]=function(e=0){return this.slice(e,e+n[r])[r](0)}})(t)}(),c.prototype._isBufferList=function(n){return n instanceof c||c.isBufferList(n)},c.isBufferList=function(n){return n!=null&&n[l]},f.exports=c}),yl=me((h,f)=>{he(),de(),pe();var s=Dt().Duplex,l=dl(),c=gl();function n(t){if(!(this instanceof n))return new n(t);if(typeof t=="function"){this._callback=t;let r=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",r)}),this.on("unpipe",function(e){e.removeListener("error",r)}),t=null}c._init.call(this,t),s.call(this)}l(n,s),Object.assign(n.prototype,c.prototype),n.prototype._new=function(t){return new n(t)},n.prototype._write=function(t,r,e){this._appendBuffer(t),typeof e=="function"&&e()},n.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},n.prototype.end=function(t){s.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype._destroy=function(t,r){this._bufs.length=0,this.length=0,r(t)},n.prototype._isBufferList=function(t){return t instanceof n||t instanceof c||n.isBufferList(t)},n.isBufferList=c.isBufferList,f.exports=n,f.exports.BufferListStream=n,f.exports.BufferList=c}),bl=me((h,f)=>{he(),de(),pe();var s=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};f.exports=s}),Ks=me((h,f)=>{he(),de(),pe();var s=f.exports,{Buffer:l}=(Je(),Fe(Ye));s.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},s.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},s.requiredHeaderFlagsErrors={};for(let n in s.requiredHeaderFlags){let t=s.requiredHeaderFlags[n];s.requiredHeaderFlagsErrors[n]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+s.types[n]+" packet"}s.codes={};for(let n in s.types){let t=s.types[n];s.codes[t]=n}s.CMD_SHIFT=4,s.CMD_MASK=240,s.DUP_MASK=8,s.QOS_MASK=3,s.QOS_SHIFT=1,s.RETAIN_MASK=1,s.VARBYTEINT_MASK=127,s.VARBYTEINT_FIN_MASK=128,s.VARBYTEINT_MAX=268435455,s.SESSIONPRESENT_MASK=1,s.SESSIONPRESENT_HEADER=l.from([s.SESSIONPRESENT_MASK]),s.CONNACK_HEADER=l.from([s.codes.connack<<s.CMD_SHIFT]),s.USERNAME_MASK=128,s.PASSWORD_MASK=64,s.WILL_RETAIN_MASK=32,s.WILL_QOS_MASK=24,s.WILL_QOS_SHIFT=3,s.WILL_FLAG_MASK=4,s.CLEAN_SESSION_MASK=2,s.CONNECT_HEADER=l.from([s.codes.connect<<s.CMD_SHIFT]),s.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},s.propertiesCodes={};for(let n in s.properties){let t=s.properties[n];s.propertiesCodes[t]=n}s.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function c(n){return[0,1,2].map(t=>[0,1].map(r=>[0,1].map(e=>{let i=l.alloc(1);return i.writeUInt8(s.codes[n]<<s.CMD_SHIFT|(r?s.DUP_MASK:0)|t<<s.QOS_SHIFT|e,0,!0),i})))}s.PUBLISH_HEADER=c("publish"),s.SUBSCRIBE_HEADER=c("subscribe"),s.SUBSCRIBE_OPTIONS_QOS_MASK=3,s.SUBSCRIBE_OPTIONS_NL_MASK=1,s.SUBSCRIBE_OPTIONS_NL_SHIFT=2,s.SUBSCRIBE_OPTIONS_RAP_MASK=1,s.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,s.SUBSCRIBE_OPTIONS_RH_MASK=3,s.SUBSCRIBE_OPTIONS_RH_SHIFT=4,s.SUBSCRIBE_OPTIONS_RH=[0,16,32],s.SUBSCRIBE_OPTIONS_NL=4,s.SUBSCRIBE_OPTIONS_RAP=8,s.SUBSCRIBE_OPTIONS_QOS=[0,1,2],s.UNSUBSCRIBE_HEADER=c("unsubscribe"),s.ACKS={unsuback:c("unsuback"),puback:c("puback"),pubcomp:c("pubcomp"),pubrel:c("pubrel"),pubrec:c("pubrec")},s.SUBACK_HEADER=l.from([s.codes.suback<<s.CMD_SHIFT]),s.VERSION3=l.from([3]),s.VERSION4=l.from([4]),s.VERSION5=l.from([5]),s.VERSION131=l.from([131]),s.VERSION132=l.from([132]),s.QOS=[0,1,2].map(n=>l.from([n])),s.EMPTY={pingreq:l.from([s.codes.pingreq<<4,0]),pingresp:l.from([s.codes.pingresp<<4,0]),disconnect:l.from([s.codes.disconnect<<4,0])},s.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},s.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},s.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},s.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},s.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},s.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),ml=me((h,f)=>{he(),de(),pe();var s=1e3,l=s*60,c=l*60,n=c*24,t=n*7,r=n*365.25;f.exports=function(p,b){b=b||{};var m=typeof p;if(m==="string"&&p.length>0)return e(p);if(m==="number"&&isFinite(p))return b.long?a(p):i(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function e(p){if(p=String(p),!(p.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(b){var m=parseFloat(b[1]),S=(b[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return m*r;case"weeks":case"week":case"w":return m*t;case"days":case"day":case"d":return m*n;case"hours":case"hour":case"hrs":case"hr":case"h":return m*c;case"minutes":case"minute":case"mins":case"min":case"m":return m*l;case"seconds":case"second":case"secs":case"sec":case"s":return m*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function i(p){var b=Math.abs(p);return b>=n?Math.round(p/n)+"d":b>=c?Math.round(p/c)+"h":b>=l?Math.round(p/l)+"m":b>=s?Math.round(p/s)+"s":p+"ms"}function a(p){var b=Math.abs(p);return b>=n?d(p,b,n,"day"):b>=c?d(p,b,c,"hour"):b>=l?d(p,b,l,"minute"):b>=s?d(p,b,s,"second"):p+" ms"}function d(p,b,m,S){var w=b>=m*1.5;return Math.round(p/m)+" "+S+(w?"s":"")}}),vl=me((h,f)=>{he(),de(),pe();function s(l){n.debug=n,n.default=n,n.coerce=d,n.disable=i,n.enable=r,n.enabled=a,n.humanize=ml(),n.destroy=p,Object.keys(l).forEach(b=>{n[b]=l[b]}),n.names=[],n.skips=[],n.formatters={};function c(b){let m=0;for(let S=0;S<b.length;S++)m=(m<<5)-m+b.charCodeAt(S),m|=0;return n.colors[Math.abs(m)%n.colors.length]}n.selectColor=c;function n(b){let m,S=null,w,A;function g(..._){if(!g.enabled)return;let E=g,v=Number(new Date),C=v-(m||v);E.diff=C,E.prev=m,E.curr=v,m=v,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let P=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(I,k)=>{if(I==="%%")return"%";P++;let T=n.formatters[k];if(typeof T=="function"){let F=_[P];I=T.call(E,F),_.splice(P,1),P--}return I}),n.formatArgs.call(E,_),(E.log||n.log).apply(E,_)}return g.namespace=b,g.useColors=n.useColors(),g.color=n.selectColor(b),g.extend=t,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(w!==n.namespaces&&(w=n.namespaces,A=n.enabled(b)),A),set:_=>{S=_}}),typeof n.init=="function"&&n.init(g),g}function t(b,m){let S=n(this.namespace+(typeof m>"u"?":":m)+b);return S.log=this.log,S}function r(b){n.save(b),n.namespaces=b,n.names=[],n.skips=[];let m=(typeof b=="string"?b:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let S of m)S[0]==="-"?n.skips.push(S.slice(1)):n.names.push(S)}function e(b,m){let S=0,w=0,A=-1,g=0;for(;S<b.length;)if(w<m.length&&(m[w]===b[S]||m[w]==="*"))m[w]==="*"?(A=w,g=S,w++):(S++,w++);else if(A!==-1)w=A+1,g++,S=g;else return!1;for(;w<m.length&&m[w]==="*";)w++;return w===m.length}function i(){let b=[...n.names,...n.skips.map(m=>"-"+m)].join(",");return n.enable(""),b}function a(b){for(let m of n.skips)if(e(b,m))return!1;for(let m of n.names)if(e(b,m))return!0;return!1}function d(b){return b instanceof Error?b.stack||b.message:b}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}f.exports=s}),bt=me((h,f)=>{he(),de(),pe(),h.formatArgs=l,h.save=c,h.load=n,h.useColors=s,h.storage=t(),h.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),h.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+f.exports.humanize(this.diff),!this.useColors)return;let i="color: "+this.color;e.splice(1,0,i,"color: inherit");let a=0,d=0;e[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(a++,p==="%c"&&(d=a))}),e.splice(d,0,i)}h.log=console.debug||console.log||(()=>{});function c(e){try{e?h.storage.setItem("debug",e):h.storage.removeItem("debug")}catch{}}function n(){let e;try{e=h.storage.getItem("debug")||h.storage.getItem("DEBUG")}catch{}return!e&&typeof Le<"u"&&"env"in Le&&(e=Le.env.DEBUG),e}function t(){try{return localStorage}catch{}}f.exports=vl()(h);var{formatters:r}=f.exports;r.j=function(e){try{return JSON.stringify(e)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}}),wl=me((h,f)=>{he(),de(),pe();var s=yl(),{EventEmitter:l}=(Ut(),Fe(kt)),c=bl(),n=Ks(),t=bt()("mqtt-packet:parser"),r=class ni extends l{constructor(){super(),this.parser=this.constructor.parser}static parser(i){return this instanceof ni?(this.settings=i||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new ni().parser(i)}_resetState(){t("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new c,this.error=null,this._list=s(),this._stateCounter=0}parse(i){for(this.error&&this._resetState(),this._list.append(i),t("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,t("parse: state complete. _stateCounter is now: %d",this._stateCounter),t("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return t("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let i=this._list.readUInt8(0),a=i>>n.CMD_SHIFT;this.packet.cmd=n.types[a];let d=i&15,p=n.requiredHeaderFlags[a];return p!=null&&d!==p?this._emitError(new Error(n.requiredHeaderFlagsErrors[a])):(this.packet.retain=(i&n.RETAIN_MASK)!==0,this.packet.qos=i>>n.QOS_SHIFT&n.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(i&n.DUP_MASK)!==0,t("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let i=this._parseVarByteNum(!0);return i&&(this.packet.length=i.value,this._list.consume(i.bytes)),t("_parseLength %d",i.value),!!i}_parsePayload(){t("_parsePayload: payload %O",this._list);let i=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}i=!0}return t("_parsePayload complete result: %s",i),i}_parseConnect(){t("_parseConnect");let i,a,d,p,b={},m=this.packet,S=this._parseString();if(S===null)return this._emitError(new Error("Cannot parse protocolId"));if(S!=="MQTT"&&S!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(m.protocolId=S,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(m.protocolVersion=this._list.readUInt8(this._pos),m.protocolVersion>=128&&(m.bridgeMode=!0,m.protocolVersion=m.protocolVersion-128),m.protocolVersion!==3&&m.protocolVersion!==4&&m.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));b.username=this._list.readUInt8(this._pos)&n.USERNAME_MASK,b.password=this._list.readUInt8(this._pos)&n.PASSWORD_MASK,b.will=this._list.readUInt8(this._pos)&n.WILL_FLAG_MASK;let w=!!(this._list.readUInt8(this._pos)&n.WILL_RETAIN_MASK),A=(this._list.readUInt8(this._pos)&n.WILL_QOS_MASK)>>n.WILL_QOS_SHIFT;if(b.will)m.will={},m.will.retain=w,m.will.qos=A;else{if(w)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(A)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(m.clean=(this._list.readUInt8(this._pos)&n.CLEAN_SESSION_MASK)!==0,this._pos++,m.keepalive=this._parseNum(),m.keepalive===-1)return this._emitError(new Error("Packet too short"));if(m.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(m.properties=_)}let g=this._parseString();if(g===null)return this._emitError(new Error("Packet too short"));if(m.clientId=g,t("_parseConnect: packet.clientId: %s",m.clientId),b.will){if(m.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(m.will.properties=_)}if(i=this._parseString(),i===null)return this._emitError(new Error("Cannot parse will topic"));if(m.will.topic=i,t("_parseConnect: packet.will.topic: %s",m.will.topic),a=this._parseBuffer(),a===null)return this._emitError(new Error("Cannot parse will payload"));m.will.payload=a,t("_parseConnect: packet.will.paylaod: %s",m.will.payload)}if(b.username){if(p=this._parseString(),p===null)return this._emitError(new Error("Cannot parse username"));m.username=p,t("_parseConnect: packet.username: %s",m.username)}if(b.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));m.password=d}return this.settings=m,t("_parseConnect: complete"),m}_parseConnack(){t("_parseConnack");let i=this.packet;if(this._list.length<1)return null;let a=this._list.readUInt8(this._pos++);if(a>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(i.sessionPresent=!!(a&n.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?i.reasonCode=this._list.readUInt8(this._pos++):i.reasonCode=0;else{if(this._list.length<2)return null;i.returnCode=this._list.readUInt8(this._pos++)}if(i.returnCode===-1||i.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(i.properties=d)}t("_parseConnack: complete")}_parsePublish(){t("_parsePublish");let i=this.packet;if(i.topic=this._parseString(),i.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(i.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}i.payload=this._list.slice(this._pos,i.length),t("_parsePublish: payload from buffer list: %o",i.payload)}}_parseSubscribe(){t("_parseSubscribe");let i=this.packet,a,d,p,b,m,S,w;if(i.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let A=this._parseProperties();Object.getOwnPropertyNames(A).length&&(i.properties=A)}if(i.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<i.length;){if(a=this._parseString(),a===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=i.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(p=d&n.SUBSCRIBE_OPTIONS_QOS_MASK,p>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(S=(d>>n.SUBSCRIBE_OPTIONS_NL_SHIFT&n.SUBSCRIBE_OPTIONS_NL_MASK)!==0,m=(d>>n.SUBSCRIBE_OPTIONS_RAP_SHIFT&n.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,b=d>>n.SUBSCRIBE_OPTIONS_RH_SHIFT&n.SUBSCRIBE_OPTIONS_RH_MASK,b>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:a,qos:p},this.settings.protocolVersion===5?(w.nl=S,w.rap=m,w.rh=b):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),t("_parseSubscribe: push subscription `%s` to subscription",w),i.subscriptions.push(w)}}}_parseSuback(){t("_parseSuback");let i=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}if(i.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let a=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!n.MQTT5_SUBACK_CODES[a])return this._emitError(new Error("Invalid suback code"))}else if(a>2&&a!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(a)}}}_parseUnsubscribe(){t("_parseUnsubscribe");let i=this.packet;if(i.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}if(i.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<i.length;){let a=this._parseString();if(a===null)return this._emitError(new Error("Cannot parse topic"));t("_parseUnsubscribe: push topic `%s` to unsubscriptions",a),i.unsubscriptions.push(a)}}}_parseUnsuback(){t("_parseUnsuback");let i=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&i.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(i.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let a=this._parseProperties();for(Object.getOwnPropertyNames(a).length&&(i.properties=a),i.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!n.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){t("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let i=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(i.length>2){switch(i.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!n.MQTT5_PUBACK_PUBREC_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!n.MQTT5_PUBREL_PUBCOMP_CODES[i.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}t("_parseConfirmation: packet.reasonCode `%d`",i.reasonCode)}else i.reasonCode=0;if(i.length>3){let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}}return!0}_parseDisconnect(){let i=this.packet;if(t("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(i.reasonCode=this._parseByte(),n.MQTT5_DISCONNECT_CODES[i.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):i.reasonCode=0;let a=this._parseProperties();Object.getOwnPropertyNames(a).length&&(i.properties=a)}return t("_parseDisconnect result: true"),!0}_parseAuth(){t("_parseAuth");let i=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(i.reasonCode=this._parseByte(),!n.MQTT5_AUTH_CODES[i.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let a=this._parseProperties();return Object.getOwnPropertyNames(a).length&&(i.properties=a),t("_parseAuth: result: true"),!0}_parseMessageId(){let i=this.packet;return i.messageId=this._parseNum(),i.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(t("_parseMessageId: packet.messageId %d",i.messageId),!0)}_parseString(i){let a=this._parseNum(),d=a+this._pos;if(a===-1||d>this._list.length||d>this.packet.length)return null;let p=this._list.toString("utf8",this._pos,d);return this._pos+=a,t("_parseString: result: %s",p),p}_parseStringPair(){return t("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let i=this._parseNum(),a=i+this._pos;if(i===-1||a>this._list.length||a>this.packet.length)return null;let d=this._list.slice(this._pos,a);return this._pos+=i,t("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let i=this._list.readUInt16BE(this._pos);return this._pos+=2,t("_parseNum: result: %s",i),i}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let i=this._list.readUInt32BE(this._pos);return this._pos+=4,t("_parse4ByteNum: result: %s",i),i}_parseVarByteNum(i){t("_parseVarByteNum");let a=4,d=0,p=1,b=0,m=!1,S,w=this._pos?this._pos:0;for(;d<a&&w+d<this._list.length;){if(S=this._list.readUInt8(w+d++),b+=p*(S&n.VARBYTEINT_MASK),p*=128,(S&n.VARBYTEINT_FIN_MASK)===0){m=!0;break}if(this._list.length<=d)break}return!m&&d===a&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=d),m?i?m={bytes:d,value:b}:m=b:m=!1,t("_parseVarByteNum: result: %o",m),m}_parseByte(){let i;return this._pos<this._list.length&&(i=this._list.readUInt8(this._pos),this._pos++),t("_parseByte: result: %o",i),i}_parseByType(i){switch(t("_parseByType: type: %s",i),i){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){t("_parseProperties");let i=this._parseVarByteNum(),a=this._pos+i,d={};for(;this._pos<a;){let p=this._parseByte();if(!p)return this._emitError(new Error("Cannot parse property code type")),!1;let b=n.propertiesCodes[p];if(!b)return this._emitError(new Error("Unknown property")),!1;if(b==="userProperties"){d[b]||(d[b]=Object.create(null));let m=this._parseByType(n.propertiesTypes[b]);if(d[b][m.name])if(Array.isArray(d[b][m.name]))d[b][m.name].push(m.value);else{let S=d[b][m.name];d[b][m.name]=[S],d[b][m.name].push(m.value)}else d[b][m.name]=m.value;continue}d[b]?Array.isArray(d[b])?d[b].push(this._parseByType(n.propertiesTypes[b])):(d[b]=[d[b]],d[b].push(this._parseByType(n.propertiesTypes[b]))):d[b]=this._parseByType(n.propertiesTypes[b])}return d}_newPacket(){return t("_newPacket"),this.packet&&(this._list.consume(this.packet.length),t("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),t("_newPacket: new packet"),this.packet=new c,this._pos=0,!0}_emitError(i){t("_emitError",i),this.error=i,this.emit("error",i)}};f.exports=r}),_l=me((h,f)=>{he(),de(),pe();var{Buffer:s}=(Je(),Fe(Ye)),l=65536,c={},n=s.isBuffer(s.from([1,2]).subarray(0,1));function t(a){let d=s.allocUnsafe(2);return d.writeUInt8(a>>8,0),d.writeUInt8(a&255,1),d}function r(){for(let a=0;a<l;a++)c[a]=t(a)}function e(a){let d=0,p=0,b=s.allocUnsafe(4);do d=a%128|0,a=a/128|0,a>0&&(d=d|128),b.writeUInt8(d,p++);while(a>0&&p<4);return a>0&&(p=0),n?b.subarray(0,p):b.slice(0,p)}function i(a){let d=s.allocUnsafe(4);return d.writeUInt32BE(a,0),d}f.exports={cache:c,generateCache:r,generateNumber:t,genBufVariableByteInt:e,generate4ByteBuffer:i}}),Sl=me((h,f)=>{he(),de(),pe(),typeof Le>"u"||!Le.version||Le.version.indexOf("v0.")===0||Le.version.indexOf("v1.")===0&&Le.version.indexOf("v1.8.")!==0?f.exports={nextTick:s}:f.exports=Le;function s(l,c,n,t){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,e,i;switch(r){case 0:case 1:return Le.nextTick(l);case 2:return Le.nextTick(function(){l.call(null,c)});case 3:return Le.nextTick(function(){l.call(null,c,n)});case 4:return Le.nextTick(function(){l.call(null,c,n,t)});default:for(e=new Array(r-1),i=0;i<e.length;)e[i++]=arguments[i];return Le.nextTick(function(){l.apply(null,e)})}}}),Hs=me((h,f)=>{he(),de(),pe();var s=Ks(),{Buffer:l}=(Je(),Fe(Ye)),c=l.allocUnsafe(0),n=l.from([0]),t=_l(),r=Sl().nextTick,e=bt()("mqtt-packet:writeToStream"),i=t.cache,a=t.generateNumber,d=t.generateCache,p=t.genBufVariableByteInt,b=t.generate4ByteBuffer,m=te,S=!0;function w(X,D,se){switch(e("generate called"),D.cork&&(D.cork(),r(A,D)),S&&(S=!1,d()),e("generate: packet.cmd: %s",X.cmd),X.cmd){case"connect":return g(X,D);case"connack":return _(X,D,se);case"publish":return E(X,D,se);case"puback":case"pubrec":case"pubrel":case"pubcomp":return v(X,D,se);case"subscribe":return C(X,D,se);case"suback":return P(X,D,se);case"unsubscribe":return I(X,D,se);case"unsuback":return k(X,D,se);case"pingreq":case"pingresp":return T(X,D);case"disconnect":return F(X,D,se);case"auth":return x(X,D,se);default:return D.destroy(new Error("Unknown command")),!1}}Object.defineProperty(w,"cacheNumbers",{get(){return m===te},set(X){X?((!i||Object.keys(i).length===0)&&(S=!0),m=te):(S=!1,m=Z)}});function A(X){X.uncork()}function g(X,D,se){let H=X||{},ee=H.protocolId||"MQTT",re=H.protocolVersion||4,be=H.will,ue=H.clean,N=H.keepalive||0,Q=H.clientId||"",oe=H.username,ye=H.password,ge=H.properties;ue===void 0&&(ue=!0);let we=0;if(typeof ee!="string"&&!l.isBuffer(ee))return D.destroy(new Error("Invalid protocolId")),!1;if(we+=ee.length+2,re!==3&&re!==4&&re!==5)return D.destroy(new Error("Invalid protocol version")),!1;if(we+=1,(typeof Q=="string"||l.isBuffer(Q))&&(Q||re>=4)&&(Q||ue))we+=l.byteLength(Q)+2;else{if(re<4)return D.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ue*1===0)return D.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof N!="number"||N<0||N>65535||N%1!==0)return D.destroy(new Error("Invalid keepalive")),!1;we+=2,we+=1;let J,ve;if(re===5){if(J=ie(D,ge),!J)return!1;we+=J.length}if(be){if(typeof be!="object")return D.destroy(new Error("Invalid will")),!1;if(!be.topic||typeof be.topic!="string")return D.destroy(new Error("Invalid will topic")),!1;if(we+=l.byteLength(be.topic)+2,we+=2,be.payload)if(be.payload.length>=0)typeof be.payload=="string"?we+=l.byteLength(be.payload):we+=be.payload.length;else return D.destroy(new Error("Invalid will payload")),!1;if(ve={},re===5){if(ve=ie(D,be.properties),!ve)return!1;we+=ve.length}}let Ee=!1;if(oe!=null)if(_e(oe))Ee=!0,we+=l.byteLength(oe)+2;else return D.destroy(new Error("Invalid username")),!1;if(ye!=null){if(!Ee)return D.destroy(new Error("Username is required to use password")),!1;if(_e(ye))we+=$(ye)+2;else return D.destroy(new Error("Invalid password")),!1}D.write(s.CONNECT_HEADER),V(D,we),K(D,ee),H.bridgeMode&&(re+=128),D.write(re===131?s.VERSION131:re===132?s.VERSION132:re===4?s.VERSION4:re===5?s.VERSION5:s.VERSION3);let ce=0;return ce|=oe!=null?s.USERNAME_MASK:0,ce|=ye!=null?s.PASSWORD_MASK:0,ce|=be&&be.retain?s.WILL_RETAIN_MASK:0,ce|=be&&be.qos?be.qos<<s.WILL_QOS_SHIFT:0,ce|=be?s.WILL_FLAG_MASK:0,ce|=ue?s.CLEAN_SESSION_MASK:0,D.write(l.from([ce])),m(D,N),re===5&&J.write(),K(D,Q),be&&(re===5&&ve.write(),L(D,be.topic),K(D,be.payload)),oe!=null&&K(D,oe),ye!=null&&K(D,ye),!0}function _(X,D,se){let H=se?se.protocolVersion:4,ee=X||{},re=H===5?ee.reasonCode:ee.returnCode,be=ee.properties,ue=2;if(typeof re!="number")return D.destroy(new Error("Invalid return code")),!1;let N=null;if(H===5){if(N=ie(D,be),!N)return!1;ue+=N.length}return D.write(s.CONNACK_HEADER),V(D,ue),D.write(ee.sessionPresent?s.SESSIONPRESENT_HEADER:n),D.write(l.from([re])),N==null||N.write(),!0}function E(X,D,se){e("publish: packet: %o",X);let H=se?se.protocolVersion:4,ee=X||{},re=ee.qos||0,be=ee.retain?s.RETAIN_MASK:0,ue=ee.topic,N=ee.payload||c,Q=ee.messageId,oe=ee.properties,ye=0;if(typeof ue=="string")ye+=l.byteLength(ue)+2;else if(l.isBuffer(ue))ye+=ue.length+2;else return D.destroy(new Error("Invalid topic")),!1;if(l.isBuffer(N)?ye+=N.length:ye+=l.byteLength(N),re&&typeof Q!="number")return D.destroy(new Error("Invalid messageId")),!1;re&&(ye+=2);let ge=null;if(H===5){if(ge=ie(D,oe),!ge)return!1;ye+=ge.length}return D.write(s.PUBLISH_HEADER[re][ee.dup?1:0][be?1:0]),V(D,ye),m(D,$(ue)),D.write(ue),re>0&&m(D,Q),ge==null||ge.write(),e("publish: payload: %o",N),D.write(N)}function v(X,D,se){let H=se?se.protocolVersion:4,ee=X||{},re=ee.cmd||"puback",be=ee.messageId,ue=ee.dup&&re==="pubrel"?s.DUP_MASK:0,N=0,Q=ee.reasonCode,oe=ee.properties,ye=H===5?3:2;if(re==="pubrel"&&(N=1),typeof be!="number")return D.destroy(new Error("Invalid messageId")),!1;let ge=null;if(H===5&&typeof oe=="object"){if(ge=M(D,oe,se,ye),!ge)return!1;ye+=ge.length}return D.write(s.ACKS[re][N][ue][0]),ye===3&&(ye+=Q!==0?1:-1),V(D,ye),m(D,be),H===5&&ye!==2&&D.write(l.from([Q])),ge!==null?ge.write():ye===4&&D.write(l.from([0])),!0}function C(X,D,se){e("subscribe: packet: ");let H=se?se.protocolVersion:4,ee=X||{},re=ee.dup?s.DUP_MASK:0,be=ee.messageId,ue=ee.subscriptions,N=ee.properties,Q=0;if(typeof be!="number")return D.destroy(new Error("Invalid messageId")),!1;Q+=2;let oe=null;if(H===5){if(oe=ie(D,N),!oe)return!1;Q+=oe.length}if(typeof ue=="object"&&ue.length)for(let ge=0;ge<ue.length;ge+=1){let we=ue[ge].topic,J=ue[ge].qos;if(typeof we!="string")return D.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof J!="number")return D.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(H===5){if(typeof(ue[ge].nl||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ue[ge].rap||!1)!="boolean")return D.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let ve=ue[ge].rh||0;if(typeof ve!="number"||ve>2)return D.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}Q+=l.byteLength(we)+2+1}else return D.destroy(new Error("Invalid subscriptions")),!1;e("subscribe: writing to stream: %o",s.SUBSCRIBE_HEADER),D.write(s.SUBSCRIBE_HEADER[1][re?1:0][0]),V(D,Q),m(D,be),oe!==null&&oe.write();let ye=!0;for(let ge of ue){let we=ge.topic,J=ge.qos,ve=+ge.nl,Ee=+ge.rap,ce=ge.rh,Me;L(D,we),Me=s.SUBSCRIBE_OPTIONS_QOS[J],H===5&&(Me|=ve?s.SUBSCRIBE_OPTIONS_NL:0,Me|=Ee?s.SUBSCRIBE_OPTIONS_RAP:0,Me|=ce?s.SUBSCRIBE_OPTIONS_RH[ce]:0),ye=D.write(l.from([Me]))}return ye}function P(X,D,se){let H=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,be=ee.granted,ue=ee.properties,N=0;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(N+=2,typeof be=="object"&&be.length)for(let oe=0;oe<be.length;oe+=1){if(typeof be[oe]!="number")return D.destroy(new Error("Invalid qos vector")),!1;N+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let Q=null;if(H===5){if(Q=M(D,ue,se,N),!Q)return!1;N+=Q.length}return D.write(s.SUBACK_HEADER),V(D,N),m(D,re),Q!==null&&Q.write(),D.write(l.from(be))}function I(X,D,se){let H=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,be=ee.dup?s.DUP_MASK:0,ue=ee.unsubscriptions,N=ee.properties,Q=0;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(Q+=2,typeof ue=="object"&&ue.length)for(let ge=0;ge<ue.length;ge+=1){if(typeof ue[ge]!="string")return D.destroy(new Error("Invalid unsubscriptions")),!1;Q+=l.byteLength(ue[ge])+2}else return D.destroy(new Error("Invalid unsubscriptions")),!1;let oe=null;if(H===5){if(oe=ie(D,N),!oe)return!1;Q+=oe.length}D.write(s.UNSUBSCRIBE_HEADER[1][be?1:0][0]),V(D,Q),m(D,re),oe!==null&&oe.write();let ye=!0;for(let ge=0;ge<ue.length;ge++)ye=L(D,ue[ge]);return ye}function k(X,D,se){let H=se?se.protocolVersion:4,ee=X||{},re=ee.messageId,be=ee.dup?s.DUP_MASK:0,ue=ee.granted,N=ee.properties,Q=ee.cmd,oe=0,ye=2;if(typeof re!="number")return D.destroy(new Error("Invalid messageId")),!1;if(H===5)if(typeof ue=="object"&&ue.length)for(let we=0;we<ue.length;we+=1){if(typeof ue[we]!="number")return D.destroy(new Error("Invalid qos vector")),!1;ye+=1}else return D.destroy(new Error("Invalid qos vector")),!1;let ge=null;if(H===5){if(ge=M(D,N,se,ye),!ge)return!1;ye+=ge.length}return D.write(s.ACKS[Q][oe][be][0]),V(D,ye),m(D,re),ge!==null&&ge.write(),H===5&&D.write(l.from(ue)),!0}function T(X,D,se){return D.write(s.EMPTY[X.cmd])}function F(X,D,se){let H=se?se.protocolVersion:4,ee=X||{},re=ee.reasonCode,be=ee.properties,ue=H===5?1:0,N=null;if(H===5){if(N=M(D,be,se,ue),!N)return!1;ue+=N.length}return D.write(l.from([s.codes.disconnect<<4])),V(D,ue),H===5&&D.write(l.from([re])),N!==null&&N.write(),!0}function x(X,D,se){let H=se?se.protocolVersion:4,ee=X||{},re=ee.reasonCode,be=ee.properties,ue=H===5?1:0;H!==5&&D.destroy(new Error("Invalid mqtt version for auth packet"));let N=M(D,be,se,ue);return N?(ue+=N.length,D.write(l.from([s.codes.auth<<4])),V(D,ue),D.write(l.from([re])),N!==null&&N.write(),!0):!1}var q={};function V(X,D){if(D>s.VARBYTEINT_MAX)return X.destroy(new Error(`Invalid variable byte integer: ${D}`)),!1;let se=q[D];return se||(se=p(D),D<16384&&(q[D]=se)),e("writeVarByteInt: writing to stream: %o",se),X.write(se)}function L(X,D){let se=l.byteLength(D);return m(X,se),e("writeString: %s",D),X.write(D,"utf8")}function ae(X,D,se){L(X,D),L(X,se)}function te(X,D){return e("writeNumberCached: number: %d",D),e("writeNumberCached: %o",i[D]),X.write(i[D])}function Z(X,D){let se=a(D);return e("writeNumberGenerated: %o",se),X.write(se)}function le(X,D){let se=b(D);return e("write4ByteNumber: %o",se),X.write(se)}function K(X,D){typeof D=="string"?L(X,D):D?(m(X,D.length),X.write(D)):m(X,0)}function ie(X,D){if(typeof D!="object"||D.length!=null)return{length:1,write(){fe(X,{},0)}};let se=0;function H(ee,re){let be=s.propertiesTypes[ee],ue=0;switch(be){case"byte":{if(typeof re!="boolean")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=2;break}case"int8":{if(typeof re!="number"||re<0||re>255)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=2;break}case"binary":{if(re&&re===null)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=1+l.byteLength(re)+2;break}case"int16":{if(typeof re!="number"||re<0||re>65535)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=3;break}case"int32":{if(typeof re!="number"||re<0||re>4294967295)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=5;break}case"var":{if(typeof re!="number"||re<0||re>268435455)return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=1+l.byteLength(p(re));break}case"string":{if(typeof re!="string")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=3+l.byteLength(re.toString());break}case"pair":{if(typeof re!="object")return X.destroy(new Error(`Invalid ${ee}: ${re}`)),!1;ue+=Object.getOwnPropertyNames(re).reduce((N,Q)=>{let oe=re[Q];return Array.isArray(oe)?N+=oe.reduce((ye,ge)=>(ye+=3+l.byteLength(Q.toString())+2+l.byteLength(ge.toString()),ye),0):N+=3+l.byteLength(Q.toString())+2+l.byteLength(re[Q].toString()),N},0);break}default:return X.destroy(new Error(`Invalid property ${ee}: ${re}`)),!1}return ue}if(D)for(let ee in D){let re=0,be=0,ue=D[ee];if(ue!==void 0){if(Array.isArray(ue))for(let N=0;N<ue.length;N++){if(be=H(ee,ue[N]),!be)return!1;re+=be}else{if(be=H(ee,ue),!be)return!1;re=be}if(!re)return!1;se+=re}}return{length:l.byteLength(p(se))+se,write(){fe(X,D,se)}}}function M(X,D,se,H){let ee=["reasonString","userProperties"],re=se&&se.properties&&se.properties.maximumPacketSize?se.properties.maximumPacketSize:0,be=ie(X,D);if(re)for(;H+be.length>re;){let ue=ee.shift();if(ue&&D[ue])delete D[ue],be=ie(X,D);else return!1}return be}function G(X,D,se){switch(s.propertiesTypes[D]){case"byte":{X.write(l.from([s.properties[D]])),X.write(l.from([+se]));break}case"int8":{X.write(l.from([s.properties[D]])),X.write(l.from([se]));break}case"binary":{X.write(l.from([s.properties[D]])),K(X,se);break}case"int16":{X.write(l.from([s.properties[D]])),m(X,se);break}case"int32":{X.write(l.from([s.properties[D]])),le(X,se);break}case"var":{X.write(l.from([s.properties[D]])),V(X,se);break}case"string":{X.write(l.from([s.properties[D]])),L(X,se);break}case"pair":{Object.getOwnPropertyNames(se).forEach(H=>{let ee=se[H];Array.isArray(ee)?ee.forEach(re=>{X.write(l.from([s.properties[D]])),ae(X,H.toString(),re.toString())}):(X.write(l.from([s.properties[D]])),ae(X,H.toString(),ee.toString()))});break}default:return X.destroy(new Error(`Invalid property ${D} value: ${se}`)),!1}}function fe(X,D,se){V(X,se);for(let H in D)if(Object.prototype.hasOwnProperty.call(D,H)&&D[H]!=null){let ee=D[H];if(Array.isArray(ee))for(let re=0;re<ee.length;re++)G(X,H,ee[re]);else G(X,H,ee)}}function $(X){return X?X instanceof l?X.length:l.byteLength(X):0}function _e(X){return typeof X=="string"||X instanceof l}f.exports=w}),El=me((h,f)=>{he(),de(),pe();var s=Hs(),{EventEmitter:l}=(Ut(),Fe(kt)),{Buffer:c}=(Je(),Fe(Ye));function n(r,e){let i=new t;return s(r,i,e),i.concat()}var t=class extends l{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0,e=new Array(this._array.length),i=this._array,a=0,d;for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?e[d]=i[d].length:e[d]=c.byteLength(i[d]),r+=e[d];let p=c.allocUnsafe(r);for(d=0;d<i.length&&i[d]!==void 0;d++)typeof i[d]!="string"?(i[d].copy(p,a),a+=e[d]):(p.write(i[d],a),a+=e[d]);return p}destroy(r){r&&this.emit("error",r)}};f.exports=n}),Al=me(h=>{he(),de(),pe(),h.parser=wl().parser,h.generate=El(),h.writeToStream=Hs()}),Il=me((h,f)=>{he(),de(),pe(),f.exports=l;function s(n){return n instanceof Br?Br.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function l(n){if(n=n||{},n.circles)return c(n);let t=new Map;if(t.set(Date,d=>new Date(d)),t.set(Map,(d,p)=>new Map(e(Array.from(d),p))),t.set(Set,(d,p)=>new Set(e(Array.from(d),p))),n.constructorHandlers)for(let d of n.constructorHandlers)t.set(d[0],d[1]);let r=null;return n.proto?a:i;function e(d,p){let b=Object.keys(d),m=new Array(b.length);for(let S=0;S<b.length;S++){let w=b[S],A=d[w];typeof A!="object"||A===null?m[w]=A:A.constructor!==Object&&(r=t.get(A.constructor))?m[w]=r(A,p):ArrayBuffer.isView(A)?m[w]=s(A):m[w]=p(A)}return m}function i(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,i);if(d.constructor!==Object&&(r=t.get(d.constructor)))return r(d,i);let p={};for(let b in d){if(Object.hasOwnProperty.call(d,b)===!1)continue;let m=d[b];typeof m!="object"||m===null?p[b]=m:m.constructor!==Object&&(r=t.get(m.constructor))?p[b]=r(m,i):ArrayBuffer.isView(m)?p[b]=s(m):p[b]=i(m)}return p}function a(d){if(typeof d!="object"||d===null)return d;if(Array.isArray(d))return e(d,a);if(d.constructor!==Object&&(r=t.get(d.constructor)))return r(d,a);let p={};for(let b in d){let m=d[b];typeof m!="object"||m===null?p[b]=m:m.constructor!==Object&&(r=t.get(m.constructor))?p[b]=r(m,a):ArrayBuffer.isView(m)?p[b]=s(m):p[b]=a(m)}return p}}function c(n){let t=[],r=[],e=new Map;if(e.set(Date,b=>new Date(b)),e.set(Map,(b,m)=>new Map(a(Array.from(b),m))),e.set(Set,(b,m)=>new Set(a(Array.from(b),m))),n.constructorHandlers)for(let b of n.constructorHandlers)e.set(b[0],b[1]);let i=null;return n.proto?p:d;function a(b,m){let S=Object.keys(b),w=new Array(S.length);for(let A=0;A<S.length;A++){let g=S[A],_=b[g];if(typeof _!="object"||_===null)w[g]=_;else if(_.constructor!==Object&&(i=e.get(_.constructor)))w[g]=i(_,m);else if(ArrayBuffer.isView(_))w[g]=s(_);else{let E=t.indexOf(_);E!==-1?w[g]=r[E]:w[g]=m(_)}}return w}function d(b){if(typeof b!="object"||b===null)return b;if(Array.isArray(b))return a(b,d);if(b.constructor!==Object&&(i=e.get(b.constructor)))return i(b,d);let m={};t.push(b),r.push(m);for(let S in b){if(Object.hasOwnProperty.call(b,S)===!1)continue;let w=b[S];if(typeof w!="object"||w===null)m[S]=w;else if(w.constructor!==Object&&(i=e.get(w.constructor)))m[S]=i(w,d);else if(ArrayBuffer.isView(w))m[S]=s(w);else{let A=t.indexOf(w);A!==-1?m[S]=r[A]:m[S]=d(w)}}return t.pop(),r.pop(),m}function p(b){if(typeof b!="object"||b===null)return b;if(Array.isArray(b))return a(b,p);if(b.constructor!==Object&&(i=e.get(b.constructor)))return i(b,p);let m={};t.push(b),r.push(m);for(let S in b){let w=b[S];if(typeof w!="object"||w===null)m[S]=w;else if(w.constructor!==Object&&(i=e.get(w.constructor)))m[S]=i(w,p);else if(ArrayBuffer.isView(w))m[S]=s(w);else{let A=t.indexOf(w);A!==-1?m[S]=r[A]:m[S]=p(w)}}return t.pop(),r.pop(),m}}}),xl=me((h,f)=>{he(),de(),pe(),f.exports=Il()()}),Tl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0}),h.validateTopic=f,h.validateTopics=s;function f(l){let c=l.split("/");for(let n=0;n<c.length;n++)if(c[n]!=="+"){if(c[n]==="#")return n===c.length-1;if(c[n].indexOf("+")!==-1||c[n].indexOf("#")!==-1)return!1}return!0}function s(l){if(l.length===0)return"empty_topic_list";for(let c=0;c<l.length;c++)if(!f(l[c]))return l[c];return null}}),Gs=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=Dt(),s={objectMode:!0},l={clean:!0},c=class{constructor(n){Ie(this,"options");Ie(this,"_inflights");this.options=n||{},this.options={...l,...n},this._inflights=new Map}put(n,t){return this._inflights.set(n.messageId,n),t&&t(),this}createStream(){let n=new f.Readable(s),t=[],r=!1,e=0;return this._inflights.forEach((i,a)=>{t.push(i)}),n._read=()=>{!r&&e<t.length?n.push(t[e++]):n.push(null)},n.destroy=i=>{if(!r)return r=!0,setTimeout(()=>{n.emit("close")},0),n},n}del(n,t){let r=this._inflights.get(n.messageId);return r?(this._inflights.delete(n.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(n,t){let r=this._inflights.get(n.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(n){this.options.clean&&(this._inflights=null),n&&n()}};h.default=c}),Ol=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=[0,16,128,131,135,144,145,151,153],s=(l,c,n)=>{l.log("handlePublish: packet %o",c),n=typeof n<"u"?n:l.noop;let t=c.topic.toString(),r=c.payload,{qos:e}=c,{messageId:i}=c,{options:a}=l;if(l.options.protocolVersion===5){let d;if(c.properties&&(d=c.properties.topicAlias),typeof d<"u")if(t.length===0)if(d>0&&d<=65535){let p=l.topicAliasRecv.getTopicByAlias(d);if(p)t=p,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",t,d);else{l.log("handlePublish :: unregistered topic alias. alias: %d",d),l.emit("error",new Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}else if(l.topicAliasRecv.put(t,d))l.log("handlePublish :: registered topic: %s - alias: %d",t,d);else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(l.log("handlePublish: qos %d",e),e){case 2:{a.customHandleAcks(t,r,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return l.emit("error",d);if(f.indexOf(p)===-1)return l.emit("error",new Error("Wrong reason code for pubrec"));p?l._sendPacket({cmd:"pubrec",messageId:i,reasonCode:p},n):l.incomingStore.put(c,()=>{l._sendPacket({cmd:"pubrec",messageId:i},n)})});break}case 1:{a.customHandleAcks(t,r,c,(d,p)=>{if(typeof d=="number"&&(p=d,d=null),d)return l.emit("error",d);if(f.indexOf(p)===-1)return l.emit("error",new Error("Wrong reason code for puback"));p||l.emit("message",t,r,c),l.handleMessage(c,b=>{if(b)return n&&n(b);l._sendPacket({cmd:"puback",messageId:i,reasonCode:p},n)})});break}case 0:l.emit("message",t,r,c),l.handleMessage(c,n);break;default:l.log("handlePublish: unknown QoS. Doing nothing.");break}};h.default=s}),kl=me((h,f)=>{f.exports={version:"5.14.1"}}),Vt=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0}),h.MQTTJS_VERSION=h.nextTick=h.ErrorWithSubackPacket=h.ErrorWithReasonCode=void 0,h.applyMixin=l;var f=class Qs extends Error{constructor(t,r){super(t);Ie(this,"code");this.code=r,Object.setPrototypeOf(this,Qs.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};h.ErrorWithReasonCode=f;var s=class Ys extends Error{constructor(t,r){super(t);Ie(this,"packet");this.packet=r,Object.setPrototypeOf(this,Ys.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};h.ErrorWithSubackPacket=s;function l(c,n,t=!1){let r=[n];for(;;){let e=r[0],i=Object.getPrototypeOf(e);if(i!=null&&i.prototype)r.unshift(i);else break}for(let e of r)for(let i of Object.getOwnPropertyNames(e.prototype))(t||i!=="constructor")&&Object.defineProperty(c.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)??Object.create(null))}h.nextTick=typeof(Le==null?void 0:Le.nextTick)=="function"?Le.nextTick:c=>{setTimeout(c,0)},h.MQTTJS_VERSION=kl().version}),Wr=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0}),h.ReasonCodes=void 0;var f=Vt();h.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var s=(l,c)=>{let{messageId:n}=c,t=c.cmd,r=null,e=l.outgoing[n]?l.outgoing[n].cb:null,i=null;if(!e){l.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(l.log("_handleAck :: packet type",t),t){case"pubcomp":case"puback":{let a=c.reasonCode;a&&a>0&&a!==16?(i=new f.ErrorWithReasonCode(`Publish error: ${h.ReasonCodes[a]}`,a),l._removeOutgoingAndStoreMessage(n,()=>{e(i,c)})):l._removeOutgoingAndStoreMessage(n,e);break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:n};let a=c.reasonCode;a&&a>0&&a!==16?(i=new f.ErrorWithReasonCode(`Publish error: ${h.ReasonCodes[a]}`,a),l._removeOutgoingAndStoreMessage(n,()=>{e(i,c)})):l._sendPacket(r);break}case"suback":{delete l.outgoing[n],l.messageIdProvider.deallocate(n);let a=c.granted;for(let d=0;d<a.length;d++){let p=a[d];if(p&128){i=new Error(`Subscribe error: ${h.ReasonCodes[p]}`),i.code=p;let b=l.messageIdToTopic[n];b&&b.forEach(m=>{delete l._resubscribeTopics[m]})}}delete l.messageIdToTopic[n],l._invokeStoreProcessingQueue(),e(i,c);break}case"unsuback":{delete l.outgoing[n],l.messageIdProvider.deallocate(n),l._invokeStoreProcessingQueue(),e(null,c);break}default:l.emit("error",new Error("unrecognized packet type"))}l.disconnecting&&Object.keys(l.outgoing).length===0&&l.emit("outgoingEmpty")};h.default=s}),Pl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=Vt(),s=Wr(),l=(c,n)=>{let{options:t}=c,r=t.protocolVersion,e=r===5?n.reasonCode:n.returnCode;if(r!==5){let i=new f.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${r}`,e);c.emit("error",i);return}c.handleAuth(n,(i,a)=>{if(i){c.emit("error",i);return}if(e===24)c.reconnecting=!1,c._sendPacket(a);else{let d=new f.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[e]}`,e);c.emit("error",d)}})};h.default=l}),Rl=me(h=>{var b,m,S,w,A,g,_,E,v,C,P,I,k,T,F,x,q,V,L,ae,te,Z,le,K,ie,M,G,fe,$,ii,X,D,se,H,Js,re,be,ue,At,It,oi,fr,hr,qe,si,Zt,xt,ai,Me;he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0}),h.LRUCache=void 0;var f=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,s=new Set,l=typeof Le=="object"&&Le?Le:{},c=(o,u,y,O)=>{typeof l.emitWarning=="function"?l.emitWarning(o,u,y,O):console.error(`[${y}] ${u}: ${o}`)},n=globalThis.AbortController,t=globalThis.AbortSignal;if(typeof n>"u"){t=class{constructor(){Ie(this,"onabort");Ie(this,"_onabort",[]);Ie(this,"reason");Ie(this,"aborted",!1)}addEventListener(y,O){this._onabort.push(O)}},n=class{constructor(){Ie(this,"signal",new t);u()}abort(y){var O,j;if(!this.signal.aborted){this.signal.reason=y,this.signal.aborted=!0;for(let z of this.signal._onabort)z(y);(j=(O=this.signal).onabort)==null||j.call(O,y)}}};let o=((b=l.env)==null?void 0:b.LRU_CACHE_IGNORE_AC_WARNING)!=="1",u=()=>{o&&(o=!1,c("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",u))}}var r=o=>!s.has(o),e=o=>o&&o===Math.floor(o)&&o>0&&isFinite(o),i=o=>e(o)?o<=Math.pow(2,8)?Uint8Array:o<=Math.pow(2,16)?Uint16Array:o<=Math.pow(2,32)?Uint32Array:o<=Number.MAX_SAFE_INTEGER?a:null:null,a=class extends Array{constructor(o){super(o),this.fill(0)}},d=(m=class{constructor(u,y){Ie(this,"heap");Ie(this,"length");if(!U(m,S))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new y(u),this.length=0}static create(u){let y=i(u);if(!y)return[];Ce(m,S,!0);let O=new m(u,y);return Ce(m,S,!1),O}push(u){this.heap[this.length++]=u}pop(){return this.heap[--this.length]}},S=new WeakMap,Ue(m,S,!1),m),p=(Me=class{constructor(u){Ue(this,$);Ue(this,g);Ue(this,_);Ue(this,E);Ue(this,v);Ue(this,C);Ue(this,P);Ie(this,"ttl");Ie(this,"ttlResolution");Ie(this,"ttlAutopurge");Ie(this,"updateAgeOnGet");Ie(this,"updateAgeOnHas");Ie(this,"allowStale");Ie(this,"noDisposeOnSet");Ie(this,"noUpdateTTL");Ie(this,"maxEntrySize");Ie(this,"sizeCalculation");Ie(this,"noDeleteOnFetchRejection");Ie(this,"noDeleteOnStaleGet");Ie(this,"allowStaleOnFetchAbort");Ie(this,"allowStaleOnFetchRejection");Ie(this,"ignoreFetchAbort");Ue(this,I);Ue(this,k);Ue(this,T);Ue(this,F);Ue(this,x);Ue(this,q);Ue(this,V);Ue(this,L);Ue(this,ae);Ue(this,te);Ue(this,Z);Ue(this,le);Ue(this,K);Ue(this,ie);Ue(this,M);Ue(this,G);Ue(this,fe);Ue(this,X,()=>{});Ue(this,D,()=>{});Ue(this,se,()=>{});Ue(this,H,()=>!1);Ue(this,re,u=>{});Ue(this,be,(u,y,O)=>{});Ue(this,ue,(u,y,O,j)=>{if(O||j)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Ie(this,w,"LRUCache");let{max:y=0,ttl:O,ttlResolution:j=1,ttlAutopurge:z,updateAgeOnGet:ne,updateAgeOnHas:W,allowStale:Y,dispose:Ae,disposeAfter:Te,noDisposeOnSet:Oe,noUpdateTTL:je,maxSize:ze=0,maxEntrySize:He=0,sizeCalculation:Ne,fetchMethod:We,memoMethod:Re,noDeleteOnFetchRejection:Be,noDeleteOnStaleGet:De,allowStaleOnFetchRejection:Ke,allowStaleOnFetchAbort:Qe,ignoreFetchAbort:ot}=u;if(y!==0&&!e(y))throw new TypeError("max option must be a nonnegative integer");let R=y?i(y):Array;if(!R)throw new Error("invalid max value: "+y);if(Ce(this,g,y),Ce(this,_,ze),this.maxEntrySize=He||U(this,_),this.sizeCalculation=Ne,this.sizeCalculation){if(!U(this,_)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Re!==void 0&&typeof Re!="function")throw new TypeError("memoMethod must be a function if defined");if(Ce(this,P,Re),We!==void 0&&typeof We!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ce(this,C,We),Ce(this,G,!!We),Ce(this,T,new Map),Ce(this,F,new Array(y).fill(void 0)),Ce(this,x,new Array(y).fill(void 0)),Ce(this,q,new R(y)),Ce(this,V,new R(y)),Ce(this,L,0),Ce(this,ae,0),Ce(this,te,d.create(y)),Ce(this,I,0),Ce(this,k,0),typeof Ae=="function"&&Ce(this,E,Ae),typeof Te=="function"?(Ce(this,v,Te),Ce(this,Z,[])):(Ce(this,v,void 0),Ce(this,Z,void 0)),Ce(this,M,!!U(this,E)),Ce(this,fe,!!U(this,v)),this.noDisposeOnSet=!!Oe,this.noUpdateTTL=!!je,this.noDeleteOnFetchRejection=!!Be,this.allowStaleOnFetchRejection=!!Ke,this.allowStaleOnFetchAbort=!!Qe,this.ignoreFetchAbort=!!ot,this.maxEntrySize!==0){if(U(this,_)!==0&&!e(U(this,_)))throw new TypeError("maxSize must be a positive integer if specified");if(!e(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Pe(this,$,Js).call(this)}if(this.allowStale=!!Y,this.noDeleteOnStaleGet=!!De,this.updateAgeOnGet=!!ne,this.updateAgeOnHas=!!W,this.ttlResolution=e(j)||j===0?j:1,this.ttlAutopurge=!!z,this.ttl=O||0,this.ttl){if(!e(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Pe(this,$,ii).call(this)}if(U(this,g)===0&&this.ttl===0&&U(this,_)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!U(this,g)&&!U(this,_)){let B="LRU_CACHE_UNBOUNDED";r(B)&&(s.add(B),c("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",B,Me))}}static unsafeExposeInternals(u){return{starts:U(u,K),ttls:U(u,ie),sizes:U(u,le),keyMap:U(u,T),keyList:U(u,F),valList:U(u,x),next:U(u,q),prev:U(u,V),get head(){return U(u,L)},get tail(){return U(u,ae)},free:U(u,te),isBackgroundFetch:y=>{var O;return Pe(O=u,$,qe).call(O,y)},backgroundFetch:(y,O,j,z)=>{var ne;return Pe(ne=u,$,hr).call(ne,y,O,j,z)},moveToTail:y=>{var O;return Pe(O=u,$,Zt).call(O,y)},indexes:y=>{var O;return Pe(O=u,$,At).call(O,y)},rindexes:y=>{var O;return Pe(O=u,$,It).call(O,y)},isStale:y=>{var O;return U(O=u,H).call(O,y)}}}get max(){return U(this,g)}get maxSize(){return U(this,_)}get calculatedSize(){return U(this,k)}get size(){return U(this,I)}get fetchMethod(){return U(this,C)}get memoMethod(){return U(this,P)}get dispose(){return U(this,E)}get disposeAfter(){return U(this,v)}getRemainingTTL(u){return U(this,T).has(u)?1/0:0}*entries(){for(let u of Pe(this,$,At).call(this))U(this,x)[u]!==void 0&&U(this,F)[u]!==void 0&&!Pe(this,$,qe).call(this,U(this,x)[u])&&(yield[U(this,F)[u],U(this,x)[u]])}*rentries(){for(let u of Pe(this,$,It).call(this))U(this,x)[u]!==void 0&&U(this,F)[u]!==void 0&&!Pe(this,$,qe).call(this,U(this,x)[u])&&(yield[U(this,F)[u],U(this,x)[u]])}*keys(){for(let u of Pe(this,$,At).call(this)){let y=U(this,F)[u];y!==void 0&&!Pe(this,$,qe).call(this,U(this,x)[u])&&(yield y)}}*rkeys(){for(let u of Pe(this,$,It).call(this)){let y=U(this,F)[u];y!==void 0&&!Pe(this,$,qe).call(this,U(this,x)[u])&&(yield y)}}*values(){for(let u of Pe(this,$,At).call(this))U(this,x)[u]!==void 0&&!Pe(this,$,qe).call(this,U(this,x)[u])&&(yield U(this,x)[u])}*rvalues(){for(let u of Pe(this,$,It).call(this))U(this,x)[u]!==void 0&&!Pe(this,$,qe).call(this,U(this,x)[u])&&(yield U(this,x)[u])}[(A=Symbol.iterator,w=Symbol.toStringTag,A)](){return this.entries()}find(u,y={}){for(let O of Pe(this,$,At).call(this)){let j=U(this,x)[O],z=Pe(this,$,qe).call(this,j)?j.__staleWhileFetching:j;if(z!==void 0&&u(z,U(this,F)[O],this))return this.get(U(this,F)[O],y)}}forEach(u,y=this){for(let O of Pe(this,$,At).call(this)){let j=U(this,x)[O],z=Pe(this,$,qe).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&u.call(y,z,U(this,F)[O],this)}}rforEach(u,y=this){for(let O of Pe(this,$,It).call(this)){let j=U(this,x)[O],z=Pe(this,$,qe).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&u.call(y,z,U(this,F)[O],this)}}purgeStale(){let u=!1;for(let y of Pe(this,$,It).call(this,{allowStale:!0}))U(this,H).call(this,y)&&(Pe(this,$,xt).call(this,U(this,F)[y],"expire"),u=!0);return u}info(u){let y=U(this,T).get(u);if(y===void 0)return;let O=U(this,x)[y],j=Pe(this,$,qe).call(this,O)?O.__staleWhileFetching:O;if(j===void 0)return;let z={value:j};if(U(this,ie)&&U(this,K)){let ne=U(this,ie)[y],W=U(this,K)[y];if(ne&&W){let Y=ne-(f.now()-W);z.ttl=Y,z.start=Date.now()}}return U(this,le)&&(z.size=U(this,le)[y]),z}dump(){let u=[];for(let y of Pe(this,$,At).call(this,{allowStale:!0})){let O=U(this,F)[y],j=U(this,x)[y],z=Pe(this,$,qe).call(this,j)?j.__staleWhileFetching:j;if(z===void 0||O===void 0)continue;let ne={value:z};if(U(this,ie)&&U(this,K)){ne.ttl=U(this,ie)[y];let W=f.now()-U(this,K)[y];ne.start=Math.floor(Date.now()-W)}U(this,le)&&(ne.size=U(this,le)[y]),u.unshift([O,ne])}return u}load(u){this.clear();for(let[y,O]of u){if(O.start){let j=Date.now()-O.start;O.start=f.now()-j}this.set(y,O.value,O)}}set(u,y,O={}){var je,ze,He,Ne,We;if(y===void 0)return this.delete(u),this;let{ttl:j=this.ttl,start:z,noDisposeOnSet:ne=this.noDisposeOnSet,sizeCalculation:W=this.sizeCalculation,status:Y}=O,{noUpdateTTL:Ae=this.noUpdateTTL}=O,Te=U(this,ue).call(this,u,y,O.size||0,W);if(this.maxEntrySize&&Te>this.maxEntrySize)return Y&&(Y.set="miss",Y.maxEntrySizeExceeded=!0),Pe(this,$,xt).call(this,u,"set"),this;let Oe=U(this,I)===0?void 0:U(this,T).get(u);if(Oe===void 0)Oe=U(this,I)===0?U(this,ae):U(this,te).length!==0?U(this,te).pop():U(this,I)===U(this,g)?Pe(this,$,fr).call(this,!1):U(this,I),U(this,F)[Oe]=u,U(this,x)[Oe]=y,U(this,T).set(u,Oe),U(this,q)[U(this,ae)]=Oe,U(this,V)[Oe]=U(this,ae),Ce(this,ae,Oe),sr(this,I)._++,U(this,be).call(this,Oe,Te,Y),Y&&(Y.set="add"),Ae=!1;else{Pe(this,$,Zt).call(this,Oe);let Re=U(this,x)[Oe];if(y!==Re){if(U(this,G)&&Pe(this,$,qe).call(this,Re)){Re.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:Be}=Re;Be!==void 0&&!ne&&(U(this,M)&&((je=U(this,E))==null||je.call(this,Be,u,"set")),U(this,fe)&&((ze=U(this,Z))==null||ze.push([Be,u,"set"])))}else ne||(U(this,M)&&((He=U(this,E))==null||He.call(this,Re,u,"set")),U(this,fe)&&((Ne=U(this,Z))==null||Ne.push([Re,u,"set"])));if(U(this,re).call(this,Oe),U(this,be).call(this,Oe,Te,Y),U(this,x)[Oe]=y,Y){Y.set="replace";let Be=Re&&Pe(this,$,qe).call(this,Re)?Re.__staleWhileFetching:Re;Be!==void 0&&(Y.oldValue=Be)}}else Y&&(Y.set="update")}if(j!==0&&!U(this,ie)&&Pe(this,$,ii).call(this),U(this,ie)&&(Ae||U(this,se).call(this,Oe,j,z),Y&&U(this,D).call(this,Y,Oe)),!ne&&U(this,fe)&&U(this,Z)){let Re=U(this,Z),Be;for(;Be=Re==null?void 0:Re.shift();)(We=U(this,v))==null||We.call(this,...Be)}return this}pop(){var u;try{for(;U(this,I);){let y=U(this,x)[U(this,L)];if(Pe(this,$,fr).call(this,!0),Pe(this,$,qe).call(this,y)){if(y.__staleWhileFetching)return y.__staleWhileFetching}else if(y!==void 0)return y}}finally{if(U(this,fe)&&U(this,Z)){let y=U(this,Z),O;for(;O=y==null?void 0:y.shift();)(u=U(this,v))==null||u.call(this,...O)}}}has(u,y={}){let{updateAgeOnHas:O=this.updateAgeOnHas,status:j}=y,z=U(this,T).get(u);if(z!==void 0){let ne=U(this,x)[z];if(Pe(this,$,qe).call(this,ne)&&ne.__staleWhileFetching===void 0)return!1;if(U(this,H).call(this,z))j&&(j.has="stale",U(this,D).call(this,j,z));else return O&&U(this,X).call(this,z),j&&(j.has="hit",U(this,D).call(this,j,z)),!0}else j&&(j.has="miss");return!1}peek(u,y={}){let{allowStale:O=this.allowStale}=y,j=U(this,T).get(u);if(j===void 0||!O&&U(this,H).call(this,j))return;let z=U(this,x)[j];return Pe(this,$,qe).call(this,z)?z.__staleWhileFetching:z}async fetch(u,y={}){let{allowStale:O=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,ttl:ne=this.ttl,noDisposeOnSet:W=this.noDisposeOnSet,size:Y=0,sizeCalculation:Ae=this.sizeCalculation,noUpdateTTL:Te=this.noUpdateTTL,noDeleteOnFetchRejection:Oe=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:je=this.allowStaleOnFetchRejection,ignoreFetchAbort:ze=this.ignoreFetchAbort,allowStaleOnFetchAbort:He=this.allowStaleOnFetchAbort,context:Ne,forceRefresh:We=!1,status:Re,signal:Be}=y;if(!U(this,G))return Re&&(Re.fetch="get"),this.get(u,{allowStale:O,updateAgeOnGet:j,noDeleteOnStaleGet:z,status:Re});let De={allowStale:O,updateAgeOnGet:j,noDeleteOnStaleGet:z,ttl:ne,noDisposeOnSet:W,size:Y,sizeCalculation:Ae,noUpdateTTL:Te,noDeleteOnFetchRejection:Oe,allowStaleOnFetchRejection:je,allowStaleOnFetchAbort:He,ignoreFetchAbort:ze,status:Re,signal:Be},Ke=U(this,T).get(u);if(Ke===void 0){Re&&(Re.fetch="miss");let Qe=Pe(this,$,hr).call(this,u,Ke,De,Ne);return Qe.__returned=Qe}else{let Qe=U(this,x)[Ke];if(Pe(this,$,qe).call(this,Qe)){let Se=O&&Qe.__staleWhileFetching!==void 0;return Re&&(Re.fetch="inflight",Se&&(Re.returnedStale=!0)),Se?Qe.__staleWhileFetching:Qe.__returned=Qe}let ot=U(this,H).call(this,Ke);if(!We&&!ot)return Re&&(Re.fetch="hit"),Pe(this,$,Zt).call(this,Ke),j&&U(this,X).call(this,Ke),Re&&U(this,D).call(this,Re,Ke),Qe;let R=Pe(this,$,hr).call(this,u,Ke,De,Ne),B=R.__staleWhileFetching!==void 0&&O;return Re&&(Re.fetch=ot?"stale":"refresh",B&&ot&&(Re.returnedStale=!0)),B?R.__staleWhileFetching:R.__returned=R}}async forceFetch(u,y={}){let O=await this.fetch(u,y);if(O===void 0)throw new Error("fetch() returned undefined");return O}memo(u,y={}){let O=U(this,P);if(!O)throw new Error("no memoMethod provided to constructor");let{context:j,forceRefresh:z,...ne}=y,W=this.get(u,ne);if(!z&&W!==void 0)return W;let Y=O(u,W,{options:ne,context:j});return this.set(u,Y,ne),Y}get(u,y={}){let{allowStale:O=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,status:ne}=y,W=U(this,T).get(u);if(W!==void 0){let Y=U(this,x)[W],Ae=Pe(this,$,qe).call(this,Y);return ne&&U(this,D).call(this,ne,W),U(this,H).call(this,W)?(ne&&(ne.get="stale"),Ae?(ne&&O&&Y.__staleWhileFetching!==void 0&&(ne.returnedStale=!0),O?Y.__staleWhileFetching:void 0):(z||Pe(this,$,xt).call(this,u,"expire"),ne&&O&&(ne.returnedStale=!0),O?Y:void 0)):(ne&&(ne.get="hit"),Ae?Y.__staleWhileFetching:(Pe(this,$,Zt).call(this,W),j&&U(this,X).call(this,W),Y))}else ne&&(ne.get="miss")}delete(u){return Pe(this,$,xt).call(this,u,"delete")}clear(){return Pe(this,$,ai).call(this,"delete")}},g=new WeakMap,_=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,P=new WeakMap,I=new WeakMap,k=new WeakMap,T=new WeakMap,F=new WeakMap,x=new WeakMap,q=new WeakMap,V=new WeakMap,L=new WeakMap,ae=new WeakMap,te=new WeakMap,Z=new WeakMap,le=new WeakMap,K=new WeakMap,ie=new WeakMap,M=new WeakMap,G=new WeakMap,fe=new WeakMap,$=new WeakSet,ii=function(){let u=new a(U(this,g)),y=new a(U(this,g));Ce(this,ie,u),Ce(this,K,y),Ce(this,se,(z,ne,W=f.now())=>{if(y[z]=ne!==0?W:0,u[z]=ne,ne!==0&&this.ttlAutopurge){let Y=setTimeout(()=>{U(this,H).call(this,z)&&Pe(this,$,xt).call(this,U(this,F)[z],"expire")},ne+1);Y.unref&&Y.unref()}}),Ce(this,X,z=>{y[z]=u[z]!==0?f.now():0}),Ce(this,D,(z,ne)=>{if(u[ne]){let W=u[ne],Y=y[ne];if(!W||!Y)return;z.ttl=W,z.start=Y,z.now=O||j();let Ae=z.now-Y;z.remainingTTL=W-Ae}});let O=0,j=()=>{let z=f.now();if(this.ttlResolution>0){O=z;let ne=setTimeout(()=>O=0,this.ttlResolution);ne.unref&&ne.unref()}return z};this.getRemainingTTL=z=>{let ne=U(this,T).get(z);if(ne===void 0)return 0;let W=u[ne],Y=y[ne];if(!W||!Y)return 1/0;let Ae=(O||j())-Y;return W-Ae},Ce(this,H,z=>{let ne=y[z],W=u[z];return!!W&&!!ne&&(O||j())-ne>W})},X=new WeakMap,D=new WeakMap,se=new WeakMap,H=new WeakMap,Js=function(){let u=new a(U(this,g));Ce(this,k,0),Ce(this,le,u),Ce(this,re,y=>{Ce(this,k,U(this,k)-u[y]),u[y]=0}),Ce(this,ue,(y,O,j,z)=>{if(Pe(this,$,qe).call(this,O))return 0;if(!e(j))if(z){if(typeof z!="function")throw new TypeError("sizeCalculation must be a function");if(j=z(O,y),!e(j))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return j}),Ce(this,be,(y,O,j)=>{if(u[y]=O,U(this,_)){let z=U(this,_)-u[y];for(;U(this,k)>z;)Pe(this,$,fr).call(this,!0)}Ce(this,k,U(this,k)+u[y]),j&&(j.entrySize=O,j.totalCalculatedSize=U(this,k))})},re=new WeakMap,be=new WeakMap,ue=new WeakMap,At=function*({allowStale:u=this.allowStale}={}){if(U(this,I))for(let y=U(this,ae);!(!Pe(this,$,oi).call(this,y)||((u||!U(this,H).call(this,y))&&(yield y),y===U(this,L)));)y=U(this,V)[y]},It=function*({allowStale:u=this.allowStale}={}){if(U(this,I))for(let y=U(this,L);!(!Pe(this,$,oi).call(this,y)||((u||!U(this,H).call(this,y))&&(yield y),y===U(this,ae)));)y=U(this,q)[y]},oi=function(u){return u!==void 0&&U(this,T).get(U(this,F)[u])===u},fr=function(u){var z,ne;let y=U(this,L),O=U(this,F)[y],j=U(this,x)[y];return U(this,G)&&Pe(this,$,qe).call(this,j)?j.__abortController.abort(new Error("evicted")):(U(this,M)||U(this,fe))&&(U(this,M)&&((z=U(this,E))==null||z.call(this,j,O,"evict")),U(this,fe)&&((ne=U(this,Z))==null||ne.push([j,O,"evict"]))),U(this,re).call(this,y),u&&(U(this,F)[y]=void 0,U(this,x)[y]=void 0,U(this,te).push(y)),U(this,I)===1?(Ce(this,L,Ce(this,ae,0)),U(this,te).length=0):Ce(this,L,U(this,q)[y]),U(this,T).delete(O),sr(this,I)._--,y},hr=function(u,y,O,j){let z=y===void 0?void 0:U(this,x)[y];if(Pe(this,$,qe).call(this,z))return z;let ne=new n,{signal:W}=O;W==null||W.addEventListener("abort",()=>ne.abort(W.reason),{signal:ne.signal});let Y={signal:ne.signal,options:O,context:j},Ae=(Ne,We=!1)=>{let{aborted:Re}=ne.signal,Be=O.ignoreFetchAbort&&Ne!==void 0;if(O.status&&(Re&&!We?(O.status.fetchAborted=!0,O.status.fetchError=ne.signal.reason,Be&&(O.status.fetchAbortIgnored=!0)):O.status.fetchResolved=!0),Re&&!Be&&!We)return Oe(ne.signal.reason);let De=ze;return U(this,x)[y]===ze&&(Ne===void 0?De.__staleWhileFetching?U(this,x)[y]=De.__staleWhileFetching:Pe(this,$,xt).call(this,u,"fetch"):(O.status&&(O.status.fetchUpdated=!0),this.set(u,Ne,Y.options))),Ne},Te=Ne=>(O.status&&(O.status.fetchRejected=!0,O.status.fetchError=Ne),Oe(Ne)),Oe=Ne=>{let{aborted:We}=ne.signal,Re=We&&O.allowStaleOnFetchAbort,Be=Re||O.allowStaleOnFetchRejection,De=Be||O.noDeleteOnFetchRejection,Ke=ze;if(U(this,x)[y]===ze&&(!De||Ke.__staleWhileFetching===void 0?Pe(this,$,xt).call(this,u,"fetch"):Re||(U(this,x)[y]=Ke.__staleWhileFetching)),Be)return O.status&&Ke.__staleWhileFetching!==void 0&&(O.status.returnedStale=!0),Ke.__staleWhileFetching;if(Ke.__returned===Ke)throw Ne},je=(Ne,We)=>{var Be;let Re=(Be=U(this,C))==null?void 0:Be.call(this,u,z,Y);Re&&Re instanceof Promise&&Re.then(De=>Ne(De===void 0?void 0:De),We),ne.signal.addEventListener("abort",()=>{(!O.ignoreFetchAbort||O.allowStaleOnFetchAbort)&&(Ne(void 0),O.allowStaleOnFetchAbort&&(Ne=De=>Ae(De,!0)))})};O.status&&(O.status.fetchDispatched=!0);let ze=new Promise(je).then(Ae,Te),He=Object.assign(ze,{__abortController:ne,__staleWhileFetching:z,__returned:void 0});return y===void 0?(this.set(u,He,{...Y.options,status:void 0}),y=U(this,T).get(u)):U(this,x)[y]=He,He},qe=function(u){if(!U(this,G))return!1;let y=u;return!!y&&y instanceof Promise&&y.hasOwnProperty("__staleWhileFetching")&&y.__abortController instanceof n},si=function(u,y){U(this,V)[y]=u,U(this,q)[u]=y},Zt=function(u){u!==U(this,ae)&&(u===U(this,L)?Ce(this,L,U(this,q)[u]):Pe(this,$,si).call(this,U(this,V)[u],U(this,q)[u]),Pe(this,$,si).call(this,U(this,ae),u),Ce(this,ae,u))},xt=function(u,y){var j,z,ne,W;let O=!1;if(U(this,I)!==0){let Y=U(this,T).get(u);if(Y!==void 0)if(O=!0,U(this,I)===1)Pe(this,$,ai).call(this,y);else{U(this,re).call(this,Y);let Ae=U(this,x)[Y];if(Pe(this,$,qe).call(this,Ae)?Ae.__abortController.abort(new Error("deleted")):(U(this,M)||U(this,fe))&&(U(this,M)&&((j=U(this,E))==null||j.call(this,Ae,u,y)),U(this,fe)&&((z=U(this,Z))==null||z.push([Ae,u,y]))),U(this,T).delete(u),U(this,F)[Y]=void 0,U(this,x)[Y]=void 0,Y===U(this,ae))Ce(this,ae,U(this,V)[Y]);else if(Y===U(this,L))Ce(this,L,U(this,q)[Y]);else{let Te=U(this,V)[Y];U(this,q)[Te]=U(this,q)[Y];let Oe=U(this,q)[Y];U(this,V)[Oe]=U(this,V)[Y]}sr(this,I)._--,U(this,te).push(Y)}}if(U(this,fe)&&((ne=U(this,Z))!=null&&ne.length)){let Y=U(this,Z),Ae;for(;Ae=Y==null?void 0:Y.shift();)(W=U(this,v))==null||W.call(this,...Ae)}return O},ai=function(u){var y,O,j;for(let z of Pe(this,$,It).call(this,{allowStale:!0})){let ne=U(this,x)[z];if(Pe(this,$,qe).call(this,ne))ne.__abortController.abort(new Error("deleted"));else{let W=U(this,F)[z];U(this,M)&&((y=U(this,E))==null||y.call(this,ne,W,u)),U(this,fe)&&((O=U(this,Z))==null||O.push([ne,W,u]))}}if(U(this,T).clear(),U(this,x).fill(void 0),U(this,F).fill(void 0),U(this,ie)&&U(this,K)&&(U(this,ie).fill(0),U(this,K).fill(0)),U(this,le)&&U(this,le).fill(0),Ce(this,L,0),Ce(this,ae,0),U(this,te).length=0,Ce(this,k,0),Ce(this,I,0),U(this,fe)&&U(this,Z)){let z=U(this,Z),ne;for(;ne=z==null?void 0:z.shift();)(j=U(this,v))==null||j.call(this,...ne)}},Me);h.LRUCache=p}),vt=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.ContainerIterator=h.Container=h.Base=void 0;var f=class{constructor(c=0){this.iteratorType=c}equals(c){return this.o===c.o}};h.ContainerIterator=f;var s=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};h.Base=s;var l=class extends s{};h.Container=l}),Cl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=vt(),s=class extends f.Base{constructor(c=[]){super(),this.S=[];let n=this;c.forEach(function(t){n.push(t)})}clear(){this.i=0,this.S=[]}push(c){return this.S.push(c),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},l=s;h.default=l}),Ml=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=vt(),s=class extends f.Base{constructor(c=[]){super(),this.j=0,this.q=[];let n=this;c.forEach(function(t){n.push(t)})}clear(){this.q=[],this.i=this.j=0}push(c){let n=this.q.length;if(this.j/n>.5&&this.j+this.i>=n&&n>4096){let t=this.i;for(let r=0;r<t;++r)this.q[r]=this.q[this.j+r];this.j=0,this.q[this.i]=c}else this.q[this.j+this.i]=c;return++this.i}pop(){if(this.i===0)return;let c=this.q[this.j++];return this.i-=1,c}front(){if(this.i!==0)return this.q[this.j]}},l=s;h.default=l}),jl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=vt(),s=class extends f.Base{constructor(c=[],n=function(r,e){return r>e?-1:r<e?1:0},t=!0){if(super(),this.v=n,Array.isArray(c))this.C=t?[...c]:c;else{this.C=[];let e=this;c.forEach(function(i){e.C.push(i)})}this.i=this.C.length;let r=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,r)}m(c){let n=this.C[c];for(;c>0;){let t=c-1>>1,r=this.C[t];if(this.v(r,n)<=0)break;this.C[c]=r,c=t}this.C[c]=n}k(c,n){let t=this.C[c];for(;c<n;){let r=c<<1|1,e=r+1,i=this.C[r];if(e<this.i&&this.v(i,this.C[e])>0&&(r=e,i=this.C[e]),this.v(i,t)>=0)break;this.C[c]=i,c=r}this.C[c]=t}clear(){this.i=0,this.C.length=0}push(c){this.C.push(c),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let c=this.C[0],n=this.C.pop();return this.i-=1,this.i&&(this.C[0]=n,this.k(0,this.i>>1)),c}top(){return this.C[0]}find(c){return this.C.indexOf(c)>=0}remove(c){let n=this.C.indexOf(c);return n<0?!1:(n===0?this.pop():n===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(n,1,this.C.pop()),this.i-=1,this.m(n),this.k(n,this.i>>1)),!0)}updateItem(c){let n=this.C.indexOf(c);return n<0?!1:(this.m(n),this.k(n,this.i>>1),!0)}toArray(){return[...this.C]}},l=s;h.default=l}),to=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=vt(),s=class extends f.Container{},l=s;h.default=l}),wt=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.throwIteratorAccessError=f;function f(){throw new RangeError("Iterator access denied!")}}),Xs=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.RandomIterator=void 0;var f=vt(),s=wt(),l=class extends f.ContainerIterator{constructor(c,n){super(n),this.o=c,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,s.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,s.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,s.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,s.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(c){this.container.setElementByPos(this.o,c)}};h.RandomIterator=l}),Nl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=l(to()),s=Xs();function l(r){return r&&r.t?r:{default:r}}var c=class Zs extends s.RandomIterator{constructor(e,i,a){super(e,a),this.container=i}copy(){return new Zs(this.o,this.container,this.iteratorType)}},n=class extends f.default{constructor(r=[],e=!0){if(super(),Array.isArray(r))this.J=e?[...r]:r,this.i=r.length;else{this.J=[];let i=this;r.forEach(function(a){i.pushBack(a)})}}clear(){this.i=0,this.J.length=0}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J[r]}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;return this.J.splice(r,1),this.i-=1,this.i}eraseElementByValue(r){let e=0;for(let i=0;i<this.i;++i)this.J[i]!==r&&(this.J[e++]=this.J[i]);return this.i=this.J.length=e,this.i}eraseElementByIterator(r){let e=r.o;return r=r.next(),this.eraseElementByPos(e),r}pushBack(r){return this.J.push(r),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(r,e){if(r<0||r>this.i-1)throw new RangeError;this.J[r]=e}insert(r,e,i=1){if(r<0||r>this.i)throw new RangeError;return this.J.splice(r,0,...new Array(i).fill(e)),this.i+=i,this.i}find(r){for(let e=0;e<this.i;++e)if(this.J[e]===r)return new c(e,this);return this.end()}reverse(){this.J.reverse()}unique(){let r=1;for(let e=1;e<this.i;++e)this.J[e]!==this.J[e-1]&&(this.J[r++]=this.J[e]);return this.i=this.J.length=r,this.i}sort(r){this.J.sort(r)}forEach(r){for(let e=0;e<this.i;++e)r(this.J[e],e,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},t=n;h.default=t}),Bl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=c(to()),s=vt(),l=wt();function c(e){return e&&e.t?e:{default:e}}var n=class ea extends s.ContainerIterator{constructor(i,a,d,p){super(p),this.o=i,this.h=a,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l}set pointer(i){this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l=i}copy(){return new ea(this.o,this.h,this.container,this.iteratorType)}},t=class extends f.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let i=this;e.forEach(function(a){i.pushBack(a)})}V(e){let{L:i,B:a}=e;i.B=a,a.L=i,e===this.p&&(this.p=a),e===this._&&(this._=i),this.i-=1}G(e,i){let a=i.B,d={l:e,L:i,B:a};i.B=d,a.L=d,i===this.h&&(this.p=d),a===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return i.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return this.V(i),this.i}eraseElementByValue(e){let i=this.p;for(;i!==this.h;)i.l===e&&this.V(i),i=i.B;return this.i}eraseElementByIterator(e){let i=e.o;return i===this.h&&(0,l.throwIteratorAccessError)(),e=e.next(),this.V(i),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(this.i===0)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(this.i===0)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,i){if(e<0||e>this.i-1)throw new RangeError;let a=this.p;for(;e--;)a=a.B;a.l=i}insert(e,i,a=1){if(e<0||e>this.i)throw new RangeError;if(a<=0)return this.i;if(e===0)for(;a--;)this.pushFront(i);else if(e===this.i)for(;a--;)this.pushBack(i);else{let d=this.p;for(let b=1;b<e;++b)d=d.B;let p=d.B;for(this.i+=a;a--;)d.B={l:i,L:d},d.B.L=d,d=d.B;d.B=p,p.L=d}return this.i}find(e){let i=this.p;for(;i!==this.h;){if(i.l===e)return new n(i,this.h,this);i=i.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,i=this._,a=0;for(;a<<1<this.i;){let d=e.l;e.l=i.l,i.l=d,e=e.B,i=i.L,a+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let i=e;for(;i.B!==this.h&&i.l===i.B.l;)i=i.B,this.i-=1;e.B=i.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let i=[];this.forEach(function(d){i.push(d)}),i.sort(e);let a=this.p;i.forEach(function(d){a.l=d,a=a.B})}merge(e){let i=this;if(this.i===0)e.forEach(function(a){i.pushBack(a)});else{let a=this.p;e.forEach(function(d){for(;a!==i.h&&a.l<=d;)a=a.B;i.G(d,a.L)})}return this.i}forEach(e){let i=this.p,a=0;for(;i!==this.h;)e(i.l,a++,this),i=i.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}).bind(this)()}},r=t;h.default=r}),Ul=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=l(to()),s=Xs();function l(r){return r&&r.t?r:{default:r}}var c=class ta extends s.RandomIterator{constructor(e,i,a){super(e,a),this.container=i}copy(){return new ta(this.o,this.container,this.iteratorType)}},n=class extends f.default{constructor(r=[],e=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let i=(()=>{if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size;if(typeof r.size=="function")return r.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=e,this.P=Math.max(Math.ceil(i/this.F),1);for(let p=0;p<this.P;++p)this.A.push(new Array(this.F));let a=Math.ceil(i/this.F);this.j=this.R=(this.P>>1)-(a>>1),this.D=this.N=this.F-i%this.F>>1;let d=this;r.forEach(function(p){d.pushBack(p)})}T(){let r=[],e=Math.max(this.P>>1,1);for(let i=0;i<e;++i)r[i]=new Array(this.F);for(let i=this.j;i<this.P;++i)r[r.length]=this.A[i];for(let i=0;i<this.R;++i)r[r.length]=this.A[i];r[r.length]=[...this.A[this.R]],this.j=e,this.R=r.length-1;for(let i=0;i<e;++i)r[r.length]=new Array(this.F);this.A=r,this.P=r.length}O(r){let e=this.D+r+1,i=e%this.F,a=i-1,d=this.j+(e-i)/this.F;return i===0&&(d-=1),d%=this.P,a<0&&(a+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:a}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new c(0,this)}end(){return new c(this.i,this)}rBegin(){return new c(this.i-1,this,1)}rEnd(){return new c(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(r){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=r,this.i}popBack(){if(this.i===0)return;let r=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,r}pushFront(r){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=r,this.i}popFront(){if(this.i===0)return;let r=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,r}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(r);return this.A[e][i]}setElementByPos(r,e){if(r<0||r>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:a}=this.O(r);this.A[i][a]=e}insert(r,e,i=1){if(r<0||r>this.i)throw new RangeError;if(r===0)for(;i--;)this.pushFront(e);else if(r===this.i)for(;i--;)this.pushBack(e);else{let a=[];for(let d=r;d<this.i;++d)a.push(this.getElementByPos(d));this.cut(r-1);for(let d=0;d<i;++d)this.pushBack(e);for(let d=0;d<a.length;++d)this.pushBack(a[d])}return this.i}cut(r){if(r<0)return this.clear(),0;let{curNodeBucketIndex:e,curNodePointerIndex:i}=this.O(r);return this.R=e,this.N=i,this.i=r+1,this.i}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;if(r===0)this.popFront();else if(r===this.i-1)this.popBack();else{let e=[];for(let a=r+1;a<this.i;++a)e.push(this.getElementByPos(a));this.cut(r),this.popBack();let i=this;e.forEach(function(a){i.pushBack(a)})}return this.i}eraseElementByValue(r){if(this.i===0)return 0;let e=[];for(let a=0;a<this.i;++a){let d=this.getElementByPos(a);d!==r&&e.push(d)}let i=e.length;for(let a=0;a<i;++a)this.setElementByPos(a,e[a]);return this.cut(i-1)}eraseElementByIterator(r){let e=r.o;return this.eraseElementByPos(e),r=r.next(),r}find(r){for(let e=0;e<this.i;++e)if(this.getElementByPos(e)===r)return new c(e,this);return this.end()}reverse(){let r=0,e=this.i-1;for(;r<e;){let i=this.getElementByPos(r);this.setElementByPos(r,this.getElementByPos(e)),this.setElementByPos(e,i),r+=1,e-=1}}unique(){if(this.i<=1)return this.i;let r=1,e=this.getElementByPos(0);for(let i=1;i<this.i;++i){let a=this.getElementByPos(i);a!==e&&(e=a,this.setElementByPos(r++,a))}for(;this.i>r;)this.popBack();return this.i}sort(r){let e=[];for(let i=0;i<this.i;++i)e.push(this.getElementByPos(i));e.sort(r);for(let i=0;i<this.i;++i)this.setElementByPos(i,e[i])}shrinkToFit(){if(this.i===0)return;let r=[];this.forEach(function(e){r.push(e)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let e=0;e<r.length;++e)this.pushBack(r[e])}forEach(r){for(let e=0;e<this.i;++e)r(this.getElementByPos(e),e,this)}[Symbol.iterator](){return(function*(){for(let r=0;r<this.i;++r)yield this.getElementByPos(r)}).bind(this)()}},t=n;h.default=t}),Ll=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.TreeNodeEnableIndex=h.TreeNode=void 0;var f=class{constructor(l,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=c}L(){let l=this;if(l.ee===1&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let c=l.tt;for(;c.U===l;)l=c,c=l.tt;l=c}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}else{let c=l.tt;for(;c.W===l;)l=c,c=l.tt;return l.W!==c?c:l}}te(){let l=this.tt,c=this.W,n=c.U;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.U=this,this.tt=c,this.W=n,n&&(n.tt=this),c}se(){let l=this.tt,c=this.U,n=c.W;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.W=this,this.tt=c,this.U=n,n&&(n.tt=this),c}};h.TreeNode=f;var s=class extends f{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};h.TreeNodeEnableIndex=s}),ra=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=Ll(),s=vt(),l=wt(),c=class extends s.Container{constructor(t=function(e,i){return e<i?-1:e>i?1:0},r=!1){super(),this.Y=void 0,this.v=t,r?(this.re=f.TreeNodeEnableIndex,this.M=function(e,i,a){let d=this.ne(e,i,a);if(d){let p=d.tt;for(;p!==this.h;)p.rt+=1,p=p.tt;let b=this.he(d);if(b){let{parentNode:m,grandParent:S,curNode:w}=b;m.ie(),S.ie(),w.ie()}}return this.i},this.V=function(e){let i=this.fe(e);for(;i!==this.h;)i.rt-=1,i=i.tt}):(this.re=f.TreeNode,this.M=function(e,i,a){let d=this.ne(e,i,a);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(t,r){let e=this.h;for(;t;){let i=this.v(t.u,r);if(i<0)t=t.W;else if(i>0)e=t,t=t.U;else return t}return e}Z(t,r){let e=this.h;for(;t;)this.v(t.u,r)<=0?t=t.W:(e=t,t=t.U);return e}$(t,r){let e=this.h;for(;t;){let i=this.v(t.u,r);if(i<0)e=t,t=t.W;else if(i>0)t=t.U;else return t}return e}rr(t,r){let e=this.h;for(;t;)this.v(t.u,r)<0?(e=t,t=t.W):t=t.U;return e}ue(t){for(;;){let r=t.tt;if(r===this.h)return;if(t.ee===1){t.ee=0;return}if(t===r.U){let e=r.W;if(e.ee===1)e.ee=0,r.ee=1,r===this.Y?this.Y=r.te():r.te();else if(e.W&&e.W.ee===1){e.ee=r.ee,r.ee=0,e.W.ee=0,r===this.Y?this.Y=r.te():r.te();return}else e.U&&e.U.ee===1?(e.ee=1,e.U.ee=0,e.se()):(e.ee=1,t=r)}else{let e=r.U;if(e.ee===1)e.ee=0,r.ee=1,r===this.Y?this.Y=r.se():r.se();else if(e.U&&e.U.ee===1){e.ee=r.ee,r.ee=0,e.U.ee=0,r===this.Y?this.Y=r.se():r.se();return}else e.W&&e.W.ee===1?(e.ee=1,e.W.ee=0,e.te()):(e.ee=1,t=r)}}}fe(t){if(this.i===1)return this.clear(),this.h;let r=t;for(;r.U||r.W;){if(r.W)for(r=r.W;r.U;)r=r.U;else r=r.U;[t.u,r.u]=[r.u,t.u],[t.l,r.l]=[r.l,t.l],t=r}this.h.U===r?this.h.U=r.tt:this.h.W===r&&(this.h.W=r.tt),this.ue(r);let e=r.tt;return r===e.U?e.U=void 0:e.W=void 0,this.i-=1,this.Y.ee=0,e}oe(t,r){return t===void 0?!1:this.oe(t.U,r)||r(t)?!0:this.oe(t.W,r)}he(t){for(;;){let r=t.tt;if(r.ee===0)return;let e=r.tt;if(r===e.U){let i=e.W;if(i&&i.ee===1){if(i.ee=r.ee=0,e===this.Y)return;e.ee=1,t=e;continue}else if(t===r.W){if(t.ee=0,t.U&&(t.U.tt=r),t.W&&(t.W.tt=e),r.W=t.U,e.U=t.W,t.U=r,t.W=e,e===this.Y)this.Y=t,this.h.tt=t;else{let a=e.tt;a.U===e?a.U=t:a.W=t}return t.tt=e.tt,r.tt=t,e.tt=t,e.ee=1,{parentNode:r,grandParent:e,curNode:t}}else r.ee=0,e===this.Y?this.Y=e.se():e.se(),e.ee=1}else{let i=e.U;if(i&&i.ee===1){if(i.ee=r.ee=0,e===this.Y)return;e.ee=1,t=e;continue}else if(t===r.U){if(t.ee=0,t.U&&(t.U.tt=e),t.W&&(t.W.tt=r),e.W=t.U,r.U=t.W,t.U=e,t.W=r,e===this.Y)this.Y=t,this.h.tt=t;else{let a=e.tt;a.U===e?a.U=t:a.W=t}return t.tt=e.tt,r.tt=t,e.tt=t,e.ee=1,{parentNode:r,grandParent:e,curNode:t}}else r.ee=0,e===this.Y?this.Y=e.te():e.te(),e.ee=1}return}}ne(t,r,e){if(this.Y===void 0){this.i+=1,this.Y=new this.re(t,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let i,a=this.h.U,d=this.v(a.u,t);if(d===0){a.l=r;return}else if(d>0)a.U=new this.re(t,r),a.U.tt=a,i=a.U,this.h.U=i;else{let p=this.h.W,b=this.v(p.u,t);if(b===0){p.l=r;return}else if(b<0)p.W=new this.re(t,r),p.W.tt=p,i=p.W,this.h.W=i;else{if(e!==void 0){let m=e.o;if(m!==this.h){let S=this.v(m.u,t);if(S===0){m.l=r;return}else if(S>0){let w=m.L(),A=this.v(w.u,t);if(A===0){w.l=r;return}else A<0&&(i=new this.re(t,r),w.W===void 0?(w.W=i,i.tt=w):(m.U=i,i.tt=m))}}}if(i===void 0)for(i=this.Y;;){let m=this.v(i.u,t);if(m>0){if(i.U===void 0){i.U=new this.re(t,r),i.U.tt=i,i=i.U;break}i=i.U}else if(m<0){if(i.W===void 0){i.W=new this.re(t,r),i.W.tt=i,i=i.W;break}i=i.W}else{i.l=r;return}}}}return this.i+=1,i}I(t,r){for(;t;){let e=this.v(t.u,r);if(e<0)t=t.W;else if(e>0)t=t.U;else return t}return t||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(t,r){let e=t.o;if(e===this.h&&(0,l.throwIteratorAccessError)(),this.i===1)return e.u=r,!0;if(e===this.h.U)return this.v(e.B().u,r)>0?(e.u=r,!0):!1;if(e===this.h.W)return this.v(e.L().u,r)<0?(e.u=r,!0):!1;let i=e.L().u;if(this.v(i,r)>=0)return!1;let a=e.B().u;return this.v(a,r)<=0?!1:(e.u=r,!0)}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r=0,e=this;return this.oe(this.Y,function(i){return t===r?(e.V(i),!0):(r+=1,!1)}),this.i}eraseElementByKey(t){if(this.i===0)return!1;let r=this.I(this.Y,t);return r===this.h?!1:(this.V(r),!0)}eraseElementByIterator(t){let r=t.o;r===this.h&&(0,l.throwIteratorAccessError)();let e=r.W===void 0;return t.iteratorType===0?e&&t.next():(!e||r.U===void 0)&&t.next(),this.V(r),t}forEach(t){let r=0;for(let e of this)t(e,r++,this)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r,e=0;for(let i of this){if(e===t){r=i;break}e+=1}return r}getHeight(){if(this.i===0)return 0;let t=function(r){return r?Math.max(t(r.U),t(r.W))+1:0};return t(this.Y)}},n=c;h.default=n}),na=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=vt(),s=wt(),l=class extends f.ContainerIterator{constructor(n,t,r){super(r),this.o=n,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,s.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,s.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let n=this.o,t=this.h.tt;if(n===this.h)return t?t.rt-1:0;let r=0;for(n.U&&(r+=n.U.rt);n!==t;){let e=n.tt;n===e.W&&(r+=1,e.U&&(r+=e.U.rt)),n=e}return r}},c=l;h.default=c}),Dl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=c(ra()),s=c(na()),l=wt();function c(e){return e&&e.t?e:{default:e}}var n=class ia extends s.default{constructor(i,a,d,p){super(i,a,p),this.container=d}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.u}copy(){return new ia(this.o,this.h,this.container,this.iteratorType)}},t=class extends f.default{constructor(e=[],i,a){super(i,a);let d=this;e.forEach(function(p){d.insert(p)})}*K(e){e!==void 0&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,i){return this.M(e,void 0,i)}find(e){let i=this.I(this.Y,e);return new n(i,this.h,this)}lowerBound(e){let i=this.X(this.Y,e);return new n(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new n(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new n(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new n(i,this.h,this)}union(e){let i=this;return e.forEach(function(a){i.insert(a)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=t;h.default=r}),Fl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=c(ra()),s=c(na()),l=wt();function c(e){return e&&e.t?e:{default:e}}var n=class oa extends s.default{constructor(i,a,d,p){super(i,a,p),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let i=this;return new Proxy([],{get(a,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(a,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new oa(this.o,this.h,this.container,this.iteratorType)}},t=class extends f.default{constructor(e=[],i,a){super(i,a);let d=this;e.forEach(function(p){d.setElement(p[0],p[1])})}*K(e){e!==void 0&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i===0)return;let e=this.h.U;return[e.u,e.l]}back(){if(this.i===0)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let i=this.X(this.Y,e);return new n(i,this.h,this)}upperBound(e){let i=this.Z(this.Y,e);return new n(i,this.h,this)}reverseLowerBound(e){let i=this.$(this.Y,e);return new n(i,this.h,this)}reverseUpperBound(e){let i=this.rr(this.Y,e);return new n(i,this.h,this)}setElement(e,i,a){return this.M(e,i,a)}find(e){let i=this.I(this.Y,e);return new n(i,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let i=this;return e.forEach(function(a){i.setElement(a[0],a[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},r=t;h.default=r}),sa=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=f;function f(s){let l=typeof s;return l==="object"&&s!==null||l==="function"}}),aa=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.HashContainerIterator=h.HashContainer=void 0;var f=vt(),s=c(sa()),l=wt();function c(r){return r&&r.t?r:{default:r}}var n=class extends f.ContainerIterator{constructor(r,e,i){super(i),this.o=r,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}};h.HashContainerIterator=n;var t=class extends f.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(r){let{L:e,B:i}=r;e.B=i,i.L=e,r===this.p&&(this.p=i),r===this._&&(this._=e),this.i-=1}M(r,e,i){i===void 0&&(i=(0,s.default)(r));let a;if(i){let d=r[this.HASH_TAG];if(d!==void 0)return this.H[d].l=e,this.i;Object.defineProperty(r,this.HASH_TAG,{value:this.H.length,configurable:!0}),a={u:r,l:e,L:this._,B:this.h},this.H.push(a)}else{let d=this.g[r];if(d)return d.l=e,this.i;a={u:r,l:e,L:this._,B:this.h},this.g[r]=a}return this.i===0?(this.p=a,this.h.B=a):this._.B=a,this._=a,this.h.L=a,++this.i}I(r,e){if(e===void 0&&(e=(0,s.default)(r)),e){let i=r[this.HASH_TAG];return i===void 0?this.h:this.H[i]}else return this.g[r]||this.h}clear(){let r=this.HASH_TAG;this.H.forEach(function(e){delete e.u[r]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(r,e){let i;if(e===void 0&&(e=(0,s.default)(r)),e){let a=r[this.HASH_TAG];if(a===void 0)return!1;delete r[this.HASH_TAG],i=this.H[a],delete this.H[a]}else{if(i=this.g[r],i===void 0)return!1;delete this.g[r]}return this.V(i),!0}eraseElementByIterator(r){let e=r.o;return e===this.h&&(0,l.throwIteratorAccessError)(),this.V(e),r.next()}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let e=this.p;for(;r--;)e=e.B;return this.V(e),this.i}};h.HashContainer=t}),Wl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=aa(),s=wt(),l=class la extends f.HashContainerIterator{constructor(r,e,i,a){super(r,e,a),this.container=i}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.u}copy(){return new la(this.o,this.h,this.container,this.iteratorType)}},c=class extends f.HashContainer{constructor(t=[]){super();let r=this;t.forEach(function(e){r.insert(e)})}begin(){return new l(this.p,this.h,this)}end(){return new l(this.h,this.h,this)}rBegin(){return new l(this._,this.h,this,1)}rEnd(){return new l(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(t,r){return this.M(t,void 0,r)}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let r=this.p;for(;t--;)r=r.B;return r.u}find(t,r){let e=this.I(t,r);return new l(e,this.h,this)}forEach(t){let r=0,e=this.p;for(;e!==this.h;)t(e.u,r++,this),e=e.B}[Symbol.iterator](){return(function*(){let t=this.p;for(;t!==this.h;)yield t.u,t=t.B}).bind(this)()}},n=c;h.default=n}),ql=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),h.default=void 0;var f=aa(),s=c(sa()),l=wt();function c(e){return e&&e.t?e:{default:e}}var n=class ua extends f.HashContainerIterator{constructor(i,a,d,p){super(i,a,p),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let i=this;return new Proxy([],{get(a,d){if(d==="0")return i.o.u;if(d==="1")return i.o.l},set(a,d,p){if(d!=="1")throw new TypeError("props must be 1");return i.o.l=p,!0}})}copy(){return new ua(this.o,this.h,this.container,this.iteratorType)}},t=class extends f.HashContainer{constructor(e=[]){super();let i=this;e.forEach(function(a){i.setElement(a[0],a[1])})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(e,i,a){return this.M(e,i,a)}getElementByKey(e,i){if(i===void 0&&(i=(0,s.default)(e)),i){let d=e[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let a=this.g[e];return a?a.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return[i.u,i.l]}find(e,i){let a=this.I(e,i);return new n(a,this.h,this)}forEach(e){let i=0,a=this.p;for(;a!==this.h;)e([a.u,a.l],i++,this),a=a.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}).bind(this)()}},r=t;h.default=r}),$l=me(h=>{he(),de(),pe(),Object.defineProperty(h,"t",{value:!0}),Object.defineProperty(h,"Deque",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(h,"HashMap",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(h,"HashSet",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(h,"LinkList",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(h,"OrderedMap",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(h,"OrderedSet",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(h,"PriorityQueue",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(h,"Queue",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(h,"Stack",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(h,"Vector",{enumerable:!0,get:function(){return c.default}});var f=d(Cl()),s=d(Ml()),l=d(jl()),c=d(Nl()),n=d(Bl()),t=d(Ul()),r=d(Dl()),e=d(Fl()),i=d(Wl()),a=d(ql());function d(p){return p&&p.t?p:{default:p}}}),zl=me((h,f)=>{he(),de(),pe();var s=$l().OrderedSet,l=bt()("number-allocator:trace"),c=bt()("number-allocator:error");function n(r,e){this.low=r,this.high=e}n.prototype.equals=function(r){return this.low===r.low&&this.high===r.high},n.prototype.compare=function(r){return this.low<r.low&&this.high<r.low?-1:r.low<this.low&&r.high<this.low?1:0};function t(r,e){if(!(this instanceof t))return new t(r,e);this.min=r,this.max=e,this.ss=new s([],(i,a)=>i.compare(a)),l("Create"),this.clear()}t.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},t.prototype.alloc=function(){if(this.ss.size()===0)return l("alloc():empty"),null;let r=this.ss.begin(),e=r.pointer.low,i=r.pointer.high,a=e;return a+1<=i?this.ss.updateKeyByIterator(r,new n(e+1,i)):this.ss.eraseElementByPos(0),l("alloc():"+a),a},t.prototype.use=function(r){let e=new n(r,r),i=this.ss.lowerBound(e);if(!i.equals(this.ss.end())){let a=i.pointer.low,d=i.pointer.high;return i.pointer.equals(e)?(this.ss.eraseElementByIterator(i),l("use():"+r),!0):a>r?!1:a===r?(this.ss.updateKeyByIterator(i,new n(a+1,d)),l("use():"+r),!0):d===r?(this.ss.updateKeyByIterator(i,new n(a,d-1)),l("use():"+r),!0):(this.ss.updateKeyByIterator(i,new n(r+1,d)),this.ss.insert(new n(a,r-1)),l("use():"+r),!0)}return l("use():failed"),!1},t.prototype.free=function(r){if(r<this.min||r>this.max){c("free():"+r+" is out of range");return}let e=new n(r,r),i=this.ss.upperBound(e);if(i.equals(this.ss.end())){if(i.equals(this.ss.begin())){this.ss.insert(e);return}i.pre();let a=i.pointer.high;i.pointer.high+1===r?this.ss.updateKeyByIterator(i,new n(a,r)):this.ss.insert(e)}else if(i.equals(this.ss.begin()))if(r+1===i.pointer.low){let a=i.pointer.high;this.ss.updateKeyByIterator(i,new n(r,a))}else this.ss.insert(e);else{let a=i.pointer.low,d=i.pointer.high;i.pre();let p=i.pointer.low;i.pointer.high+1===r?r+1===a?(this.ss.eraseElementByIterator(i),this.ss.updateKeyByIterator(i,new n(p,d))):this.ss.updateKeyByIterator(i,new n(p,r)):r+1===a?(this.ss.eraseElementByIterator(i.next()),this.ss.insert(new n(r,d))):this.ss.insert(e)}l("free():"+r)},t.prototype.clear=function(){l("clear()"),this.ss.clear(),this.ss.insert(new n(this.min,this.max))},t.prototype.intervalCount=function(){return this.ss.size()},t.prototype.dump=function(){console.log("length:"+this.ss.size());for(let r of this.ss)console.log(r)},f.exports=t}),ca=me((h,f)=>{he(),de(),pe();var s=zl();f.exports.NumberAllocator=s}),Vl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=Rl(),s=ca(),l=class{constructor(c){Ie(this,"aliasToTopic");Ie(this,"topicToAlias");Ie(this,"max");Ie(this,"numberAllocator");Ie(this,"length");c>0&&(this.aliasToTopic=new f.LRUCache({max:c}),this.topicToAlias={},this.numberAllocator=new s.NumberAllocator(1,c),this.max=c,this.length=0)}put(c,n){if(n===0||n>this.max)return!1;let t=this.aliasToTopic.get(n);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(n,c),this.topicToAlias[c]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.size,!0}getTopicByAlias(c){return this.aliasToTopic.get(c)}getAliasByTopic(c){let n=this.topicToAlias[c];return typeof n<"u"&&this.aliasToTopic.get(n),n}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};h.default=l}),Kl=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(h,"__esModule",{value:!0});var s=Wr(),l=f(Vl()),c=Vt(),n=(t,r)=>{t.log("_handleConnack");let{options:e}=t,i=e.protocolVersion===5?r.reasonCode:r.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,r.properties){if(r.properties.topicAliasMaximum){if(r.properties.topicAliasMaximum>65535){t.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}r.properties.topicAliasMaximum>0&&(t.topicAliasSend=new l.default(r.properties.topicAliasMaximum))}r.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=r.properties.serverKeepAlive),r.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=r.properties.maximumPacketSize)}if(i===0)t.reconnecting=!1,t._onConnect(r);else if(i>0){let a=new c.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[i]}`,i);t.emit("error",a),t.options.reconnectOnConnackError&&t._cleanUp(!0)}};h.default=n}),Hl=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=(s,l,c)=>{s.log("handling pubrel packet");let n=typeof c<"u"?c:s.noop,{messageId:t}=l,r={cmd:"pubcomp",messageId:t};s.incomingStore.get(l,(e,i)=>{e?s._sendPacket(r,n):(s.emit("message",i.topic,i.payload,i),s.handleMessage(i,a=>{if(a)return n(a);s.incomingStore.del(i,s.noop),s._sendPacket(r,n)}))})};h.default=f}),Gl=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(h,"__esModule",{value:!0});var s=f(Ol()),l=f(Pl()),c=f(Kl()),n=f(Wr()),t=f(Hl()),r=(e,i,a)=>{let{options:d}=e;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<i.length)return e.emit("error",new Error(`exceeding packets size ${i.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",i),i.cmd){case"publish":(0,s.default)(e,i,a);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,n.default)(e,i),a();break;case"pubrel":e.reschedulePing(),(0,t.default)(e,i,a);break;case"connack":(0,c.default)(e,i),a();break;case"auth":e.reschedulePing(),(0,l.default)(e,i),a();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),a();break;case"disconnect":e.emit("disconnect",i),a();break;default:e.log("_handlePacket :: unknown command"),a();break}};h.default=r}),fa=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=class{constructor(){Ie(this,"nextId");this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let s=this.nextId++;return this.nextId===65536&&(this.nextId=1),s}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(s){return!0}deallocate(s){}clear(){}};h.default=f}),Ql=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=class{constructor(s){Ie(this,"aliasToTopic");Ie(this,"max");Ie(this,"length");this.aliasToTopic={},this.max=s}put(s,l){return l===0||l>this.max?!1:(this.aliasToTopic[l]=s,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(s){return this.aliasToTopic[s]}clear(){this.aliasToTopic={}}};h.default=f}),Yl=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(h,"__esModule",{value:!0}),h.TypedEventEmitter=void 0;var s=f((Ut(),Fe(kt))),l=Vt(),c=class{};h.TypedEventEmitter=c,(0,l.applyMixin)(c,s.default)}),qr=me((h,f)=>{he(),de(),pe();function s(l){"@babel/helpers - typeof";return f.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},f.exports.__esModule=!0,f.exports.default=f.exports,s(l)}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),Jl=me((h,f)=>{he(),de(),pe();var s=qr().default;function l(c,n){if(s(c)!="object"||!c)return c;var t=c[Symbol.toPrimitive];if(t!==void 0){var r=t.call(c,n||"default");if(s(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(c)}f.exports=l,f.exports.__esModule=!0,f.exports.default=f.exports}),Xl=me((h,f)=>{he(),de(),pe();var s=qr().default,l=Jl();function c(n){var t=l(n,"string");return s(t)=="symbol"?t:t+""}f.exports=c,f.exports.__esModule=!0,f.exports.default=f.exports}),Zl=me((h,f)=>{he(),de(),pe();var s=Xl();function l(c,n,t){return(n=s(n))in c?Object.defineProperty(c,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[n]=t,c}f.exports=l,f.exports.__esModule=!0,f.exports.default=f.exports}),eu=me((h,f)=>{he(),de(),pe();function s(l){if(Array.isArray(l))return l}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),tu=me((h,f)=>{he(),de(),pe();function s(l,c){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t,r,e,i,a=[],d=!0,p=!1;try{if(e=(n=n.call(l)).next,c===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(t=e.call(n)).done)&&(a.push(t.value),a.length!==c);d=!0);}catch(b){p=!0,r=b}finally{try{if(!d&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(p)throw r}}return a}}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),ru=me((h,f)=>{he(),de(),pe();function s(l,c){(c==null||c>l.length)&&(c=l.length);for(var n=0,t=Array(c);n<c;n++)t[n]=l[n];return t}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),nu=me((h,f)=>{he(),de(),pe();var s=ru();function l(c,n){if(c){if(typeof c=="string")return s(c,n);var t={}.toString.call(c).slice(8,-1);return t==="Object"&&c.constructor&&(t=c.constructor.name),t==="Map"||t==="Set"?Array.from(c):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(c,n):void 0}}f.exports=l,f.exports.__esModule=!0,f.exports.default=f.exports}),iu=me((h,f)=>{he(),de(),pe();function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),ou=me((h,f)=>{he(),de(),pe();var s=eu(),l=tu(),c=nu(),n=iu();function t(r,e){return s(r)||l(r,e)||c(r,e)||n()}f.exports=t,f.exports.__esModule=!0,f.exports.default=f.exports}),ha=me((h,f)=>{he(),de(),pe(),function(s,l){typeof h=="object"&&typeof f<"u"?l(h):typeof define=="function"&&define.amd?define(["exports"],l):(s=typeof globalThis<"u"?globalThis:s||self,l(s.fastUniqueNumbers={}))}(h,function(s){var l=function(b){return function(m){var S=b(m);return m.add(S),S}},c=function(b){return function(m,S){return b.set(m,S),S}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,t=536870912,r=t*2,e=function(b,m){return function(S){var w=m.get(S),A=w===void 0?S.size:w<r?w+1:0;if(!S.has(A))return b(S,A);if(S.size<t){for(;S.has(A);)A=Math.floor(Math.random()*r);return b(S,A)}if(S.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;S.has(A);)A=Math.floor(Math.random()*n);return b(S,A)}},i=new WeakMap,a=c(i),d=e(a,i),p=l(d);s.addUniqueNumber=p,s.generateUniqueNumber=d})}),su=me((h,f)=>{he(),de(),pe();function s(c,n,t,r,e,i,a){try{var d=c[i](a),p=d.value}catch(b){return void t(b)}d.done?n(p):Promise.resolve(p).then(r,e)}function l(c){return function(){var n=this,t=arguments;return new Promise(function(r,e){var i=c.apply(n,t);function a(p){s(i,r,e,a,d,"next",p)}function d(p){s(i,r,e,a,d,"throw",p)}a(void 0)})}}f.exports=l,f.exports.__esModule=!0,f.exports.default=f.exports}),pa=me((h,f)=>{he(),de(),pe();function s(l,c){this.v=l,this.k=c}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),da=me((h,f)=>{he(),de(),pe();function s(l,c,n,t){var r=Object.defineProperty;try{r({},"",{})}catch{r=0}f.exports=s=function(e,i,a,d){function p(b,m){s(e,b,function(S){return this._invoke(b,m,S)})}i?r?r(e,i,{value:a,enumerable:!d,configurable:!d,writable:!d}):e[i]=a:(p("next",0),p("throw",1),p("return",2))},f.exports.__esModule=!0,f.exports.default=f.exports,s(l,c,n,t)}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),ga=me((h,f)=>{he(),de(),pe();var s=da();function l(){var c,n,t=typeof Symbol=="function"?Symbol:{},r=t.iterator||"@@iterator",e=t.toStringTag||"@@toStringTag";function i(A,g,_,E){var v=g&&g.prototype instanceof d?g:d,C=Object.create(v.prototype);return s(C,"_invoke",function(P,I,k){var T,F,x,q=0,V=k||[],L=!1,ae={p:0,n:0,v:c,a:te,f:te.bind(c,4),d:function(Z,le){return T=Z,F=0,x=c,ae.n=le,a}};function te(Z,le){for(F=Z,x=le,n=0;!L&&q&&!K&&n<V.length;n++){var K,ie=V[n],M=ae.p,G=ie[2];Z>3?(K=G===le)&&(x=ie[(F=ie[4])?5:(F=3,3)],ie[4]=ie[5]=c):ie[0]<=M&&((K=Z<2&&M<ie[1])?(F=0,ae.v=le,ae.n=ie[1]):M<G&&(K=Z<3||ie[0]>le||le>G)&&(ie[4]=Z,ie[5]=le,ae.n=G,F=0))}if(K||Z>1)return a;throw L=!0,le}return function(Z,le,K){if(q>1)throw TypeError("Generator is already running");for(L&&le===1&&te(le,K),F=le,x=K;(n=F<2?c:x)||!L;){T||(F?F<3?(F>1&&(ae.n=-1),te(F,x)):ae.n=x:ae.v=x);try{if(q=2,T){if(F||(Z="next"),n=T[Z]){if(!(n=n.call(T,x)))throw TypeError("iterator result is not an object");if(!n.done)return n;x=n.value,F<2&&(F=0)}else F===1&&(n=T.return)&&n.call(T),F<2&&(x=TypeError("The iterator does not provide a '"+Z+"' method"),F=1);T=c}else if((n=(L=ae.n<0)?x:P.call(I,ae))!==a)break}catch(ie){T=c,F=1,x=ie}finally{q=1}}return{value:n,done:L}}}(A,_,E),!0),C}var a={};function d(){}function p(){}function b(){}n=Object.getPrototypeOf;var m=[][r]?n(n([][r]())):(s(n={},r,function(){return this}),n),S=b.prototype=d.prototype=Object.create(m);function w(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,b):(A.__proto__=b,s(A,e,"GeneratorFunction")),A.prototype=Object.create(S),A}return p.prototype=b,s(S,"constructor",b),s(b,"constructor",p),p.displayName="GeneratorFunction",s(b,e,"GeneratorFunction"),s(S),s(S,e,"Generator"),s(S,r,function(){return this}),s(S,"toString",function(){return"[object Generator]"}),(f.exports=l=function(){return{w:i,m:w}},f.exports.__esModule=!0,f.exports.default=f.exports)()}f.exports=l,f.exports.__esModule=!0,f.exports.default=f.exports}),ya=me((h,f)=>{he(),de(),pe();var s=pa(),l=da();function c(n,t){function r(i,a,d,p){try{var b=n[i](a),m=b.value;return m instanceof s?t.resolve(m.v).then(function(S){r("next",S,d,p)},function(S){r("throw",S,d,p)}):t.resolve(m).then(function(S){b.value=S,d(b)},function(S){return r("throw",S,d,p)})}catch(S){p(S)}}var e;this.next||(l(c.prototype),l(c.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),l(this,"_invoke",function(i,a,d){function p(){return new t(function(b,m){r(i,d,b,m)})}return e=e?e.then(p,p):p()},!0)}f.exports=c,f.exports.__esModule=!0,f.exports.default=f.exports}),ba=me((h,f)=>{he(),de(),pe();var s=ga(),l=ya();function c(n,t,r,e,i){return new l(s().w(n,t,r,e),i||Promise)}f.exports=c,f.exports.__esModule=!0,f.exports.default=f.exports}),au=me((h,f)=>{he(),de(),pe();var s=ba();function l(c,n,t,r,e){var i=s(c,n,t,r,e);return i.next().then(function(a){return a.done?a.value:i.next()})}f.exports=l,f.exports.__esModule=!0,f.exports.default=f.exports}),lu=me((h,f)=>{he(),de(),pe();function s(l){var c=Object(l),n=[];for(var t in c)n.unshift(t);return function r(){for(;n.length;)if((t=n.pop())in c)return r.value=t,r.done=!1,r;return r.done=!0,r}}f.exports=s,f.exports.__esModule=!0,f.exports.default=f.exports}),uu=me((h,f)=>{he(),de(),pe();var s=qr().default;function l(c){if(c!=null){var n=c[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],t=0;if(n)return n.call(c);if(typeof c.next=="function")return c;if(!isNaN(c.length))return{next:function(){return c&&t>=c.length&&(c=void 0),{value:c&&c[t++],done:!c}}}}throw new TypeError(s(c)+" is not iterable")}f.exports=l,f.exports.__esModule=!0,f.exports.default=f.exports}),cu=me((h,f)=>{he(),de(),pe();var s=pa(),l=ga(),c=au(),n=ba(),t=ya(),r=lu(),e=uu();function i(){var a=l(),d=a.m(i),p=(Object.getPrototypeOf?Object.getPrototypeOf(d):d.__proto__).constructor;function b(w){var A=typeof w=="function"&&w.constructor;return!!A&&(A===p||(A.displayName||A.name)==="GeneratorFunction")}var m={throw:1,return:2,break:3,continue:3};function S(w){var A,g;return function(_){A||(A={stop:function(){return g(_.a,2)},catch:function(){return _.v},abrupt:function(E,v){return g(_.a,m[E],v)},delegateYield:function(E,v,C){return A.resultName=v,g(_.d,e(E),C)},finish:function(E){return g(_.f,E)}},g=function(E,v,C){_.p=A.prev,_.n=A.next;try{return E(v,C)}finally{A.next=_.n}}),A.resultName&&(A[A.resultName]=_.v,A.resultName=void 0),A.sent=_.v,A.next=_.n;try{return w.call(this,A)}finally{_.p=A.prev,_.n=A.next}}}return(f.exports=i=function(){return{wrap:function(w,A,g,_){return a.w(S(w),A,g,_&&_.reverse())},isGeneratorFunction:b,mark:a.m,awrap:function(w,A){return new s(w,A)},AsyncIterator:t,async:function(w,A,g,_,E){return(b(A)?n:c)(S(w),A,g,_,E)},keys:r,values:e}},f.exports.__esModule=!0,f.exports.default=f.exports)()}f.exports=i,f.exports.__esModule=!0,f.exports.default=f.exports}),fu=me((h,f)=>{he(),de(),pe();var s=cu()();f.exports=s;try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}}),hu=me((h,f)=>{he(),de(),pe(),function(s,l){typeof h=="object"&&typeof f<"u"?l(h,Zl(),ou(),ha(),su(),fu()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/slicedToArray","fast-unique-numbers","@babel/runtime/helpers/asyncToGenerator","@babel/runtime/regenerator"],l):(s=typeof globalThis<"u"?globalThis:s||self,l(s.brokerFactory={},s._defineProperty,s._slicedToArray,s.fastUniqueNumbers,s._asyncToGenerator,s._regeneratorRuntime))}(h,function(s,l,c,n,t,r){var e=function(g){return typeof g.start=="function"},i=new WeakMap;function a(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(g,C).enumerable})),E.push.apply(E,v)}return E}function d(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?a(Object(E),!0).forEach(function(v){l(g,v,E[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):a(Object(E)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(E,v))})}return g}var p=function(g){return d(d({},g),{},{connect:function(_){var E=_.call;return t(r.mark(function v(){var C,P,I,k;return r.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return C=new MessageChannel,P=C.port1,I=C.port2,T.next=1,E("connect",{port:P},[P]);case 1:return k=T.sent,i.set(I,k),T.abrupt("return",I);case 2:case"end":return T.stop()}},v)}))},disconnect:function(_){var E=_.call;return function(){var v=t(r.mark(function C(P){var I;return r.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(I=i.get(P),I!==void 0){k.next=1;break}throw new Error("The given port is not connected.");case 1:return k.next=2,E("disconnect",{portId:I});case 2:case"end":return k.stop()}},C)}));return function(C){return v.apply(this,arguments)}}()},isSupported:function(_){var E=_.call;return function(){return E("isSupported")}}})};function b(g,_){var E=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);_&&(v=v.filter(function(C){return Object.getOwnPropertyDescriptor(g,C).enumerable})),E.push.apply(E,v)}return E}function m(g){for(var _=1;_<arguments.length;_++){var E=arguments[_]!=null?arguments[_]:{};_%2?b(Object(E),!0).forEach(function(v){l(g,v,E[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(E)):b(Object(E)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(E,v))})}return g}var S=new WeakMap,w=function(g){if(S.has(g))return S.get(g);var _=new Map;return S.set(g,_),_},A=function(g){var _=p(g);return function(E){var v=w(E);E.addEventListener("message",function(V){var L=V.data,ae=L.id;if(ae!==null&&v.has(ae)){var te=v.get(ae),Z=te.reject,le=te.resolve;v.delete(ae),L.error===void 0?le(L.result):Z(new Error(L.error.message))}}),e(E)&&E.start();for(var C=function(V){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise(function(te,Z){var le=n.generateUniqueNumber(v);v.set(le,{reject:Z,resolve:te}),L===null?E.postMessage({id:le,method:V},ae):E.postMessage({id:le,method:V,params:L},ae)})},P=function(V,L){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];E.postMessage({id:null,method:V,params:L},ae)},I={},k=0,T=Object.entries(_);k<T.length;k++){var F=c(T[k],2),x=F[0],q=F[1];I=m(m({},I),{},l({},x,q({call:C,notify:P})))}return m({},I)}};s.createBroker=A})}),pu=me((h,f)=>{he(),de(),pe(),function(s,l){typeof h=="object"&&typeof f<"u"?l(h,qr(),hu(),ha()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/typeof","broker-factory","fast-unique-numbers"],l):(s=typeof globalThis<"u"?globalThis:s||self,l(s.workerTimersBroker={},s._typeof,s.brokerFactory,s.fastUniqueNumbers))}(h,function(s,l,c,n){var t=new Map([[0,null]]),r=new Map([[0,null]]),e=c.createBroker({clearInterval:function(a){var d=a.call;return function(p){l(t.get(p))==="symbol"&&(t.set(p,null),d("clear",{timerId:p,timerType:"interval"}).then(function(){t.delete(p)}))}},clearTimeout:function(a){var d=a.call;return function(p){l(r.get(p))==="symbol"&&(r.set(p,null),d("clear",{timerId:p,timerType:"timeout"}).then(function(){r.delete(p)}))}},setInterval:function(a){var d=a.call;return function(p){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length,S=new Array(m>2?m-2:0),w=2;w<m;w++)S[w-2]=arguments[w];var A=Symbol(),g=n.generateUniqueNumber(t);t.set(g,A);var _=function(){return d("set",{delay:b,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"interval"}).then(function(){var E=t.get(g);if(E===void 0)throw new Error("The timer is in an undefined state.");E===A&&(p.apply(void 0,S),t.get(g)===A&&_())})};return _(),g}},setTimeout:function(a){var d=a.call;return function(p){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length,S=new Array(m>2?m-2:0),w=2;w<m;w++)S[w-2]=arguments[w];var A=Symbol(),g=n.generateUniqueNumber(r);return r.set(g,A),d("set",{delay:b,now:performance.timeOrigin+performance.now(),timerId:g,timerType:"timeout"}).then(function(){var _=r.get(g);if(_===void 0)throw new Error("The timer is in an undefined state.");_===A&&(r.delete(g),p.apply(void 0,S))}),g}}}),i=function(a){var d=new Worker(a);return e(d)};s.load=i,s.wrap=e})}),du=me((h,f)=>{he(),de(),pe(),function(s,l){typeof h=="object"&&typeof f<"u"?l(h,pu()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],l):(s=typeof globalThis<"u"?globalThis:s||self,l(s.workerTimers={},s.workerTimersBroker))}(h,function(s,l){var c=function(d,p){var b=null;return function(){if(b!==null)return b;var m=new Blob([p],{type:"application/javascript; charset=utf-8"}),S=URL.createObjectURL(m);return b=d(S),setTimeout(function(){return URL.revokeObjectURL(S)}),b}},n=`(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a('The requested method called "'.concat(e,'" is not supported.'),u.METHOD_NOT_FOUND)},s=function(e){return a('The handler of the method called "'.concat(e,'" returned no required result.'),u.INTERNAL_ERROR)},c=function(e){return a('The handler of the method called "'.concat(e,'" returned an unexpected result.'),u.INTERNAL_ERROR)},f=function(e){return a('The specified parameter called "portId" with the given value "'.concat(e,'" does not identify a port connected to this worker.'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,t=c(l.load,n),r=function(d){return t().clearInterval(d)},e=function(d){return t().clearTimeout(d)},i=function(){var d;return(d=t()).setInterval.apply(d,arguments)},a=function(){var d;return(d=t()).setTimeout.apply(d,arguments)};s.clearInterval=r,s.clearTimeout=e,s.setInterval=i,s.setTimeout=a})}),$r=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0}),h.isReactNativeBrowser=h.isWebWorker=void 0;var f=()=>{var n;return typeof window<"u"?typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().indexOf(" electron/"))>-1&&(Le!=null&&Le.versions)?!Object.prototype.hasOwnProperty.call(Le.versions,"electron"):typeof window.document<"u":!1},s=()=>{var n,t;return!!(typeof self=="object"&&((t=(n=self==null?void 0:self.constructor)==null?void 0:n.name)!=null&&t.includes("WorkerGlobalScope"))&&typeof Deno>"u")},l=()=>typeof navigator<"u"&&navigator.product==="ReactNative",c=f()||s()||l();h.isWebWorker=s(),h.isReactNativeBrowser=l(),h.default=c}),gu=me(h=>{he(),de(),pe();var f=h&&h.__createBinding||(Object.create?function(i,a,d,p){p===void 0&&(p=d);var b=Object.getOwnPropertyDescriptor(a,d);(!b||("get"in b?!a.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return a[d]}}),Object.defineProperty(i,p,b)}:function(i,a,d,p){p===void 0&&(p=d),i[p]=a[d]}),s=h&&h.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),l=h&&h.__importStar||function(){var i=function(a){return i=Object.getOwnPropertyNames||function(d){var p=[];for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(p[p.length]=b);return p},i(a)};return function(a){if(a&&a.__esModule)return a;var d={};if(a!=null)for(var p=i(a),b=0;b<p.length;b++)p[b]!=="default"&&f(d,a,p[b]);return s(d,a),d}}();Object.defineProperty(h,"__esModule",{value:!0});var c=du(),n=l($r()),t={set:c.setInterval,clear:c.clearInterval},r={set:(i,a)=>setInterval(i,a),clear:i=>clearInterval(i)},e=i=>{switch(i){case"native":return r;case"worker":return t;case"auto":default:return n.default&&!n.isWebWorker&&!n.isReactNativeBrowser?t:r}};h.default=e}),ma=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(h,"__esModule",{value:!0});var s=f(gu()),l=class{constructor(c,n){Ie(this,"_keepalive");Ie(this,"timerId");Ie(this,"timer");Ie(this,"destroyed",!1);Ie(this,"counter");Ie(this,"client");Ie(this,"_keepaliveTimeoutTimestamp");Ie(this,"_intervalEvery");this.client=c,this.timer=typeof n=="object"&&"set"in n&&"clear"in n?n:(0,s.default)(n),this.setKeepalive(c.options.keepalive)}get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(c){if(c*=1e3,isNaN(c)||c<=0||c>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${c}`);this._keepalive=c,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${c}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let c=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+c,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};h.default=l}),li=me(h=>{var v;he(),de(),pe();var f=h&&h.__createBinding||(Object.create?function(C,P,I,k){k===void 0&&(k=I);var T=Object.getOwnPropertyDescriptor(P,I);(!T||("get"in T?!P.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return P[I]}}),Object.defineProperty(C,k,T)}:function(C,P,I,k){k===void 0&&(k=I),C[k]=P[I]}),s=h&&h.__setModuleDefault||(Object.create?function(C,P){Object.defineProperty(C,"default",{enumerable:!0,value:P})}:function(C,P){C.default=P}),l=h&&h.__importStar||function(){var C=function(P){return C=Object.getOwnPropertyNames||function(I){var k=[];for(var T in I)Object.prototype.hasOwnProperty.call(I,T)&&(k[k.length]=T);return k},C(P)};return function(P){if(P&&P.__esModule)return P;var I={};if(P!=null)for(var k=C(P),T=0;T<k.length;T++)k[T]!=="default"&&f(I,P,k[T]);return s(I,P),I}}(),c=h&&h.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(h,"__esModule",{value:!0});var n=c(Al()),t=Dt(),r=c(xl()),e=c(bt()),i=l(Tl()),a=c(Gs()),d=c(Gl()),p=c(fa()),b=c(Ql()),m=Vt(),S=Yl(),w=c(ma()),A=l($r()),g=globalThis.setImmediate||((...C)=>{let P=C.shift();(0,m.nextTick)(()=>{P(...C)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},E=(v=class extends S.TypedEventEmitter{constructor(I,k){super();Ie(this,"connected");Ie(this,"disconnecting");Ie(this,"disconnected");Ie(this,"reconnecting");Ie(this,"incomingStore");Ie(this,"outgoingStore");Ie(this,"options");Ie(this,"queueQoSZero");Ie(this,"_reconnectCount");Ie(this,"log");Ie(this,"messageIdProvider");Ie(this,"outgoing");Ie(this,"messageIdToTopic");Ie(this,"noop");Ie(this,"keepaliveManager");Ie(this,"stream");Ie(this,"queue");Ie(this,"streamBuilder");Ie(this,"_resubscribeTopics");Ie(this,"connackTimer");Ie(this,"reconnectTimer");Ie(this,"_storeProcessing");Ie(this,"_packetIdsDuringStoreProcessing");Ie(this,"_storeProcessingQueue");Ie(this,"_firstConnection");Ie(this,"topicAliasRecv");Ie(this,"topicAliasSend");Ie(this,"_deferredReconnect");Ie(this,"connackPacket");this.options=k||{};for(let T in _)typeof this.options[T]>"u"?this.options[T]=_[T]:this.options[T]=k[T];this.log=this.options.log||(0,e.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",v.VERSION),A.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",A.default?"browser":"node"),this.log("MqttClient :: options.protocol",k.protocol),this.log("MqttClient :: options.protocolVersion",k.protocolVersion),this.log("MqttClient :: options.username",k.username),this.log("MqttClient :: options.keepalive",k.keepalive),this.log("MqttClient :: options.reconnectPeriod",k.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",k.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",k.properties?k.properties.topicAliasMaximum:void 0),this.options.clientId=typeof k.clientId=="string"?k.clientId:v.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=k.protocolVersion===5&&k.customHandleAcks?k.customHandleAcks:(...T)=>{T[3](null,0)},this.options.writeCache||(n.default.writeToStream.cacheNumbers=!1),this.streamBuilder=I,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=k.outgoingStore||new a.default,this.incomingStore=k.incomingStore||new a.default,this.queueQoSZero=k.queueQoSZero===void 0?!0:k.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,k.properties&&k.properties.topicAliasMaximum>0&&(k.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new b.default(k.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:T}=this,F=()=>{let x=T.shift();this.log("deliver :: entry %o",x);let q=null;if(!x){this._resubscribe();return}q=x.packet,this.log("deliver :: call _sendPacket for %o",q);let V=!0;q.messageId&&q.messageId!==0&&(this.messageIdProvider.register(q.messageId)||(V=!1)),V?this._sendPacket(q,L=>{x.cb&&x.cb(L),F()}):(this.log("messageId: %d has already used. The message is skipped and removed.",q.messageId),F())};this.log("connect :: sending queued packets"),F()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}handleAuth(I,k){k()}handleMessage(I,k){k()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var ae;let I=new t.Writable,k=n.default.parser(this.options),T=null,F=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new a.default,this.outgoingStore=this.options.outgoingStore||new a.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),k.on("packet",te=>{this.log("parser :: on packet push to packets array."),F.push(te)});let x=()=>{this.log("work :: getting next packet in queue");let te=F.shift();if(te)this.log("work :: packet pulled from queue"),(0,d.default)(this,te,q);else{this.log("work :: no packets in queue");let Z=T;T=null,this.log("work :: done flag is %s",!!Z),Z&&Z()}},q=()=>{if(F.length)(0,m.nextTick)(x);else{let te=T;T=null,te()}};I._write=(te,Z,le)=>{T=le,this.log("writable stream :: parsing buffer"),k.parse(te),x()};let V=te=>{this.log("streamErrorHandler :: error",te.message),te.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",te)):this.noop(te)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",V),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let L={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(L.will={...this.options.will,payload:(ae=this.options.will)==null?void 0:ae.payload}),this.topicAliasRecv&&(L.properties||(L.properties={}),this.topicAliasRecv&&(L.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(L),k.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let te={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(te)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(I,k,T,F){this.log("publish :: message `%s` to topic `%s`",k,I);let{options:x}=this;typeof T=="function"&&(F=T,T=null),T=T||{},T={qos:0,retain:!1,dup:!1,...T};let{qos:q,retain:V,dup:L,properties:ae,cbStorePut:te}=T;if(this._checkDisconnecting(F))return this;let Z=()=>{let le=0;if((q===1||q===2)&&(le=this._nextId(),le===null))return this.log("No messageId left"),!1;let K={cmd:"publish",topic:I,payload:k,qos:q,retain:V,messageId:le,dup:L};switch(x.protocolVersion===5&&(K.properties=ae),this.log("publish :: qos",q),q){case 1:case 2:this.outgoing[K.messageId]={volatile:!1,cb:F||this.noop},this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,void 0,te);break;default:this.log("MqttClient:publish: packet cmd: %s",K.cmd),this._sendPacket(K,F,te);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Z())&&this._storeProcessingQueue.push({invoke:Z,cbStorePut:T.cbStorePut,callback:F}),this}publishAsync(I,k,T){return new Promise((F,x)=>{this.publish(I,k,T,(q,V)=>{q?x(q):F(V)})})}subscribe(I,k,T){let F=this.options.protocolVersion;typeof k=="function"&&(T=k),T=T||this.noop;let x=!1,q=[];typeof I=="string"?(I=[I],q=I):Array.isArray(I)?q=I:typeof I=="object"&&(x=I.resubscribe,delete I.resubscribe,q=Object.keys(I));let V=i.validateTopics(q);if(V!==null)return g(T,new Error(`Invalid topic ${V}`)),this;if(this._checkDisconnecting(T))return this.log("subscribe: discconecting true"),this;let L={qos:0};F===5&&(L.nl=!1,L.rap=!1,L.rh=0),k={...L,...k};let{properties:ae}=k,te=[],Z=(ie,M)=>{if(M=M||k,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ie)||this._resubscribeTopics[ie].qos<M.qos||x){let G={topic:ie,qos:M.qos};F===5&&(G.nl=M.nl,G.rap=M.rap,G.rh=M.rh,G.properties=ae),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",G.topic,G.qos),te.push(G)}};if(Array.isArray(I)?I.forEach(ie=>{this.log("subscribe: array topic %s",ie),Z(ie)}):Object.keys(I).forEach(ie=>{this.log("subscribe: object topic %s, %o",ie,I[ie]),Z(ie,I[ie])}),!te.length)return T(null,[]),this;let le=(ie,M)=>{let G={cmd:"subscribe",subscriptions:ie,messageId:M};if(ae&&(G.properties=ae),this.options.resubscribe){this.log("subscribe :: resubscribe true");let $=[];ie.forEach(_e=>{if(this.options.reconnectPeriod>0){let X={qos:_e.qos};F===5&&(X.nl=_e.nl||!1,X.rap=_e.rap||!1,X.rh=_e.rh||0,X.properties=_e.properties),this._resubscribeTopics[_e.topic]=X,$.push(_e.topic)}}),this.messageIdToTopic[G.messageId]=$}let fe=new Promise(($,_e)=>{this.outgoing[G.messageId]={volatile:!0,cb(X,D){if(!X){let{granted:se}=D;for(let H=0;H<se.length;H+=1)ie[H].qos=se[H]}X?_e(new m.ErrorWithSubackPacket(X.message,D)):$(D)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(G),fe},K=()=>{let ie=this.options.subscribeBatchSize??te.length,M=[];for(let G=0;G<te.length;G+=ie){let fe=te.slice(G,G+ie),$=this._nextId();if($===null)return this.log("No messageId left"),!1;M.push(le(fe,$))}return Promise.all(M).then(G=>{T(null,te,G.at(-1))}).catch(G=>{T(G,te,G.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:T}),this}subscribeAsync(I,k){return new Promise((T,F)=>{this.subscribe(I,k,(x,q)=>{x?F(x):T(q)})})}unsubscribe(I,k,T){typeof I=="string"&&(I=[I]),typeof k=="function"&&(T=k),T=T||this.noop;let F=i.validateTopics(I);if(F!==null)return g(T,new Error(`Invalid topic ${F}`)),this;if(this._checkDisconnecting(T))return this;let x=()=>{let q=this._nextId();if(q===null)return this.log("No messageId left"),!1;let V={cmd:"unsubscribe",messageId:q,unsubscriptions:[]};return typeof I=="string"?V.unsubscriptions=[I]:Array.isArray(I)&&(V.unsubscriptions=I),this.options.resubscribe&&V.unsubscriptions.forEach(L=>{delete this._resubscribeTopics[L]}),typeof k=="object"&&k.properties&&(V.properties=k.properties),this.outgoing[V.messageId]={volatile:!0,cb:T},this.log("unsubscribe: call _sendPacket"),this._sendPacket(V),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!x())&&this._storeProcessingQueue.push({invoke:x,callback:T}),this}unsubscribeAsync(I,k){return new Promise((T,F)=>{this.unsubscribe(I,k,(x,q)=>{x?F(x):T(q)})})}end(I,k,T){this.log("end :: (%s)",this.options.clientId),(I==null||typeof I!="boolean")&&(T=T||k,k=I,I=!1),typeof k!="object"&&(T=T||k,k=null),this.log("end :: cb? %s",!!T),(!T||typeof T!="function")&&(T=this.noop);let F=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(q=>{this.outgoingStore.close(V=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),T){let L=q||V;this.log("end :: closeStores: invoking callback with args"),T(L)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},x=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,I),this._cleanUp(I,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,m.nextTick)(F)},k)};return this.disconnecting?(T(),this):(this._clearReconnect(),this.disconnecting=!0,!I&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,x,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),x()),this)}endAsync(I,k){return new Promise((T,F)=>{this.end(I,k,x=>{x?F(x):T()})})}removeOutgoingMessage(I){if(this.outgoing[I]){let{cb:k}=this.outgoing[I];this._removeOutgoingAndStoreMessage(I,()=>{k(new Error("Message removed"))})}return this}reconnect(I){this.log("client reconnect");let k=()=>{I?(this.options.incomingStore=I.incomingStore,this.options.outgoingStore=I.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new a.default,this.outgoingStore=this.options.outgoingStore||new a.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=k:k(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(I=>{this.outgoing[I].volatile&&typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(I=>{typeof this.outgoing[I].cb=="function"&&(this.outgoing[I].cb(new Error("Connection closed")),delete this.outgoing[I])}))}_removeTopicAliasAndRecoverTopicName(I){let k;I.properties&&(k=I.properties.topicAlias);let T=I.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",k,T),T.length===0){if(typeof k>"u")return new Error("Unregistered Topic Alias");if(T=this.topicAliasSend.getTopicByAlias(k),typeof T>"u")return new Error("Unregistered Topic Alias");I.topic=T}k&&delete I.properties.topicAlias}_checkDisconnecting(I){return this.disconnecting&&(I&&I!==this.noop?I(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(I,k,T={}){if(k&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",k)),this.log("_cleanUp :: forced? %s",I),I)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let F={cmd:"disconnect",...T};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(F,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),g(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),k&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",k),k())}_storeAndSend(I,k,T){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let F=I,x;if(F.cmd==="publish"&&(F=(0,r.default)(I),x=this._removeTopicAliasAndRecoverTopicName(F),x))return k&&k(x);this.outgoingStore.put(F,q=>{if(q)return k&&k(q);T(),this._writePacket(I,k)})}_applyTopicAlias(I){if(this.options.protocolVersion===5&&I.cmd==="publish"){let k;I.properties&&(k=I.properties.topicAlias);let T=I.topic.toString();if(this.topicAliasSend)if(k){if(T.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",T,k),!this.topicAliasSend.put(T,k)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,k),new Error("Sending Topic Alias out of range")}else T.length!==0&&(this.options.autoAssignTopicAlias?(k=this.topicAliasSend.getAliasByTopic(T),k?(I.topic="",I.properties={...I.properties,topicAlias:k},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",T,k)):(k=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(T,k),I.properties={...I.properties,topicAlias:k},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",T,k))):this.options.autoUseTopicAlias&&(k=this.topicAliasSend.getAliasByTopic(T),k&&(I.topic="",I.properties={...I.properties,topicAlias:k},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",T,k))));else if(k)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",T,k),new Error("Sending Topic Alias out of range")}}_noop(I){this.log("noop ::",I)}_writePacket(I,k){this.log("_writePacket :: packet: %O",I),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",I),this.log("_writePacket :: writing to stream");let T=n.default.writeToStream(I,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",T),!T&&k&&k!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",k)):k&&(this.log("_writePacket :: invoking cb"),k())}_sendPacket(I,k,T,F){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),T=T||this.noop,k=k||this.noop;let x=this._applyTopicAlias(I);if(x){k(x);return}if(!this.connected){if(I.cmd==="auth"){this._writePacket(I,k);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(I,k,T);return}if(F){this._writePacket(I,k);return}switch(I.cmd){case"publish":break;case"pubrel":this._storeAndSend(I,k,T);return;default:this._writePacket(I,k);return}switch(I.qos){case 2:case 1:this._storeAndSend(I,k,T);break;case 0:default:this._writePacket(I,k);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(I,k,T){this.log("_storePacket :: packet: %o",I),this.log("_storePacket :: cb? %s",!!k),T=T||this.noop;let F=I;if(F.cmd==="publish"){F=(0,r.default)(I);let q=this._removeTopicAliasAndRecoverTopicName(F);if(q)return k&&k(q)}let x=F.qos||0;x===0&&this.queueQoSZero||F.cmd!=="publish"?this.queue.push({packet:F,cb:k}):x>0?(k=this.outgoing[F.messageId]?this.outgoing[F.messageId].cb:null,this.outgoingStore.put(F,q=>{if(q)return k&&k(q);T()})):k&&k(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new w.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(I=!1){this.keepaliveManager&&this.options.keepalive&&(I||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let I=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&I.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let k=0;k<I.length;k++){let T={};T[I[k]]=this._resubscribeTopics[I[k]],T.resubscribe=!0,this.subscribe(T,{properties:T[I[k]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(I){if(this.disconnected){this.emit("connect",I);return}this.connackPacket=I,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let k=()=>{let T=this.outgoingStore.createStream(),F=()=>{T.destroy(),T=null,this._flushStoreProcessingQueue(),x()},x=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",F),T.on("error",V=>{x(),this._flushStoreProcessingQueue(),this.removeListener("close",F),this.emit("error",V)});let q=()=>{if(!T)return;let V=T.read(1),L;if(!V){T.once("readable",q);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[V.messageId]){q();return}!this.disconnecting&&!this.reconnectTimer?(L=this.outgoing[V.messageId]?this.outgoing[V.messageId].cb:null,this.outgoing[V.messageId]={volatile:!1,cb(ae,te){L&&L(ae,te),q()}},this._packetIdsDuringStoreProcessing[V.messageId]=!0,this.messageIdProvider.register(V.messageId)?this._sendPacket(V,void 0,void 0,!0):this.log("messageId: %d has already used.",V.messageId)):T.destroy&&T.destroy()};T.on("end",()=>{let V=!0;for(let L in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[L]){V=!1;break}this.removeListener("close",F),V?(x(),this._invokeAllStoreProcessingQueue(),this.emit("connect",I)):k()}),q()};k()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let I=this._storeProcessingQueue[0];if(I&&I.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let I of this._storeProcessingQueue)I.cbStorePut&&I.cbStorePut(new Error("Connection closed")),I.callback&&I.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(I,k){delete this.outgoing[I],this.outgoingStore.del({messageId:I},(T,F)=>{k(T,F),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue()})}},Ie(v,"VERSION",m.MQTTJS_VERSION),v);h.default=E}),yu=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=ca(),s=class{constructor(){Ie(this,"numberAllocator");Ie(this,"lastId");this.numberAllocator=new f.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};h.default=s});function bu(){if(ui)return pr;ui=!0;let h=2147483647,f=36,s=1,l=26,c=38,n=700,t=72,r=128,e="-",i=/^xn--/,a=/[^\0-\x7F]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=f-s,m=Math.floor,S=String.fromCharCode;function w(T){throw new RangeError(p[T])}function A(T,F){let x=[],q=T.length;for(;q--;)x[q]=F(T[q]);return x}function g(T,F){let x=T.split("@"),q="";x.length>1&&(q=x[0]+"@",T=x[1]),T=T.replace(d,".");let V=T.split("."),L=A(V,F).join(".");return q+L}function _(T){let F=[],x=0,q=T.length;for(;x<q;){let V=T.charCodeAt(x++);if(V>=55296&&V<=56319&&x<q){let L=T.charCodeAt(x++);(L&64512)==56320?F.push(((V&1023)<<10)+(L&1023)+65536):(F.push(V),x--)}else F.push(V)}return F}let E=T=>String.fromCodePoint(...T),v=function(T){return T>=48&&T<58?26+(T-48):T>=65&&T<91?T-65:T>=97&&T<123?T-97:f},C=function(T,F){return T+22+75*(T<26)-((F!=0)<<5)},P=function(T,F,x){let q=0;for(T=x?m(T/n):T>>1,T+=m(T/F);T>b*l>>1;q+=f)T=m(T/b);return m(q+(b+1)*T/(T+c))},I=function(T){let F=[],x=T.length,q=0,V=r,L=t,ae=T.lastIndexOf(e);ae<0&&(ae=0);for(let te=0;te<ae;++te)T.charCodeAt(te)>=128&&w("not-basic"),F.push(T.charCodeAt(te));for(let te=ae>0?ae+1:0;te<x;){let Z=q;for(let K=1,ie=f;;ie+=f){te>=x&&w("invalid-input");let M=v(T.charCodeAt(te++));M>=f&&w("invalid-input"),M>m((h-q)/K)&&w("overflow"),q+=M*K;let G=ie<=L?s:ie>=L+l?l:ie-L;if(M<G)break;let fe=f-G;K>m(h/fe)&&w("overflow"),K*=fe}let le=F.length+1;L=P(q-Z,le,Z==0),m(q/le)>h-V&&w("overflow"),V+=m(q/le),q%=le,F.splice(q++,0,V)}return String.fromCodePoint(...F)},k=function(T){let F=[];T=_(T);let x=T.length,q=r,V=0,L=t;for(let Z of T)Z<128&&F.push(S(Z));let ae=F.length,te=ae;for(ae&&F.push(e);te<x;){let Z=h;for(let K of T)K>=q&&K<Z&&(Z=K);let le=te+1;Z-q>m((h-V)/le)&&w("overflow"),V+=(Z-q)*le,q=Z;for(let K of T)if(K<q&&++V>h&&w("overflow"),K===q){let ie=V;for(let M=f;;M+=f){let G=M<=L?s:M>=L+l?l:M-L;if(ie<G)break;let fe=ie-G,$=f-G;F.push(S(C(G+fe%$,0))),ie=m(fe/$)}F.push(S(C(ie,0))),L=P(V,le,te===ae),V=0,++te}++V,++q}return F.join("")};return pr={version:"2.3.1",ucs2:{decode:_,encode:E},decode:I,encode:k,toASCII:function(T){return g(T,function(F){return a.test(F)?"xn--"+k(F):F})},toUnicode:function(T){return g(T,function(F){return i.test(F)?I(F.slice(4).toLowerCase()):F})}},pr}var pr,ui,Tt,mu=it(()=>{he(),de(),pe(),pr={},ui=!1,Tt=bu(),Tt.decode,Tt.encode,Tt.toASCII,Tt.toUnicode,Tt.ucs2,Tt.version});function vu(){return fi||(fi=!0,ci=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var h={},f=Symbol("test"),s=Object(f);if(typeof f=="string"||Object.prototype.toString.call(f)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var l=42;h[f]=l;for(f in h)return!1;if(typeof Object.keys=="function"&&Object.keys(h).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(h).length!==0)return!1;var c=Object.getOwnPropertySymbols(h);if(c.length!==1||c[0]!==f||!Object.prototype.propertyIsEnumerable.call(h,f))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(h,f);if(n.value!==l||n.enumerable!==!0)return!1}return!0}),ci}function wu(){return pi||(pi=!0,hi=Error),hi}function _u(){return gi||(gi=!0,di=EvalError),di}function Su(){return bi||(bi=!0,yi=RangeError),yi}function Eu(){return vi||(vi=!0,mi=ReferenceError),mi}function va(){return _i||(_i=!0,wi=SyntaxError),wi}function ir(){return Ei||(Ei=!0,Si=TypeError),Si}function Au(){return Ii||(Ii=!0,Ai=URIError),Ai}function Iu(){if(xi)return dr;xi=!0;var h=typeof Symbol<"u"&&Symbol,f=vu();return dr=function(){return typeof h!="function"||typeof Symbol!="function"||typeof h("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:f()},dr}function xu(){if(Ti)return gr;Ti=!0;var h={__proto__:null,foo:{}},f=Object;return gr=function(){return{__proto__:h}.foo===h.foo&&!(h instanceof f)},gr}function Tu(){if(Oi)return yr;Oi=!0;var h="Function.prototype.bind called on incompatible ",f=Object.prototype.toString,s=Math.max,l="[object Function]",c=function(r,e){for(var i=[],a=0;a<r.length;a+=1)i[a]=r[a];for(var d=0;d<e.length;d+=1)i[d+r.length]=e[d];return i},n=function(r,e){for(var i=[],a=e,d=0;a<r.length;a+=1,d+=1)i[d]=r[a];return i},t=function(r,e){for(var i="",a=0;a<r.length;a+=1)i+=r[a],a+1<r.length&&(i+=e);return i};return yr=function(r){var e=this;if(typeof e!="function"||f.apply(e)!==l)throw new TypeError(h+e);for(var i=n(arguments,1),a,d=function(){if(this instanceof a){var w=e.apply(this,c(i,arguments));return Object(w)===w?w:this}return e.apply(r,c(i,arguments))},p=s(0,e.length-i.length),b=[],m=0;m<p;m++)b[m]="$"+m;if(a=Function("binder","return function ("+t(b,",")+"){ return binder.apply(this,arguments); }")(d),e.prototype){var S=function(){};S.prototype=e.prototype,a.prototype=new S,S.prototype=null}return a},yr}function ro(){if(ki)return br;ki=!0;var h=Tu();return br=Function.prototype.bind||h,br}function Ou(){if(Pi)return mr;Pi=!0;var h=Function.prototype.call,f=Object.prototype.hasOwnProperty,s=ro();return mr=s.call(h,f),mr}function Kt(){if(Ri)return vr;Ri=!0;var h,f=wu(),s=_u(),l=Su(),c=Eu(),n=va(),t=ir(),r=Au(),e=Function,i=function(te){try{return e('"use strict"; return ('+te+").constructor;")()}catch{}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch{a=null}var d=function(){throw new t},p=a?function(){try{return arguments.callee,d}catch{try{return a(arguments,"callee").get}catch{return d}}}():d,b=Iu()(),m=xu()(),S=Object.getPrototypeOf||(m?function(te){return te.__proto__}:null),w={},A=typeof Uint8Array>"u"||!S?h:S(Uint8Array),g={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?h:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?h:ArrayBuffer,"%ArrayIteratorPrototype%":b&&S?S([][Symbol.iterator]()):h,"%AsyncFromSyncIteratorPrototype%":h,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":typeof Atomics>"u"?h:Atomics,"%BigInt%":typeof BigInt>"u"?h:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?h:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?h:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?h:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":f,"%eval%":eval,"%EvalError%":s,"%Float32Array%":typeof Float32Array>"u"?h:Float32Array,"%Float64Array%":typeof Float64Array>"u"?h:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?h:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":w,"%Int8Array%":typeof Int8Array>"u"?h:Int8Array,"%Int16Array%":typeof Int16Array>"u"?h:Int16Array,"%Int32Array%":typeof Int32Array>"u"?h:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b&&S?S(S([][Symbol.iterator]())):h,"%JSON%":typeof JSON=="object"?JSON:h,"%Map%":typeof Map>"u"?h:Map,"%MapIteratorPrototype%":typeof Map>"u"||!b||!S?h:S(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?h:Promise,"%Proxy%":typeof Proxy>"u"?h:Proxy,"%RangeError%":l,"%ReferenceError%":c,"%Reflect%":typeof Reflect>"u"?h:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?h:Set,"%SetIteratorPrototype%":typeof Set>"u"||!b||!S?h:S(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?h:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b&&S?S(""[Symbol.iterator]()):h,"%Symbol%":b?Symbol:h,"%SyntaxError%":n,"%ThrowTypeError%":p,"%TypedArray%":A,"%TypeError%":t,"%Uint8Array%":typeof Uint8Array>"u"?h:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?h:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?h:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?h:Uint32Array,"%URIError%":r,"%WeakMap%":typeof WeakMap>"u"?h:WeakMap,"%WeakRef%":typeof WeakRef>"u"?h:WeakRef,"%WeakSet%":typeof WeakSet>"u"?h:WeakSet};if(S)try{null.error}catch(te){var _=S(S(te));g["%Error.prototype%"]=_}var E=function te(Z){var le;if(Z==="%AsyncFunction%")le=i("async function () {}");else if(Z==="%GeneratorFunction%")le=i("function* () {}");else if(Z==="%AsyncGeneratorFunction%")le=i("async function* () {}");else if(Z==="%AsyncGenerator%"){var K=te("%AsyncGeneratorFunction%");K&&(le=K.prototype)}else if(Z==="%AsyncIteratorPrototype%"){var ie=te("%AsyncGenerator%");ie&&S&&(le=S(ie.prototype))}return g[Z]=le,le},v={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=ro(),P=Ou(),I=C.call(Function.call,Array.prototype.concat),k=C.call(Function.apply,Array.prototype.splice),T=C.call(Function.call,String.prototype.replace),F=C.call(Function.call,String.prototype.slice),x=C.call(Function.call,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,V=/\\(\\)?/g,L=function(te){var Z=F(te,0,1),le=F(te,-1);if(Z==="%"&&le!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(le==="%"&&Z!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var K=[];return T(te,q,function(ie,M,G,fe){K[K.length]=G?T(fe,V,"$1"):M||ie}),K},ae=function(te,Z){var le=te,K;if(P(v,le)&&(K=v[le],le="%"+K[0]+"%"),P(g,le)){var ie=g[le];if(ie===w&&(ie=E(le)),typeof ie>"u"&&!Z)throw new t("intrinsic "+te+" exists, but is not available. Please file an issue!");return{alias:K,name:le,value:ie}}throw new n("intrinsic "+te+" does not exist!")};return vr=function(te,Z){if(typeof te!="string"||te.length===0)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Z!="boolean")throw new t('"allowMissing" argument must be a boolean');if(x(/^%?[^%]*%?$/,te)===null)throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var le=L(te),K=le.length>0?le[0]:"",ie=ae("%"+K+"%",Z),M=ie.name,G=ie.value,fe=!1,$=ie.alias;$&&(K=$[0],k(le,I([0,1],$)));for(var _e=1,X=!0;_e<le.length;_e+=1){var D=le[_e],se=F(D,0,1),H=F(D,-1);if((se==='"'||se==="'"||se==="`"||H==='"'||H==="'"||H==="`")&&se!==H)throw new n("property names with quotes must have matching quotes");if((D==="constructor"||!X)&&(fe=!0),K+="."+D,M="%"+K+"%",P(g,M))G=g[M];else if(G!=null){if(!(D in G)){if(!Z)throw new t("base intrinsic for "+te+" exists, but the property is not available.");return}if(a&&_e+1>=le.length){var ee=a(G,D);X=!!ee,X&&"get"in ee&&!("originalValue"in ee.get)?G=ee.get:G=G[D]}else X=P(G,D),G=G[D];X&&!fe&&(g[M]=G)}}return G},vr}function no(){if(Ci)return wr;Ci=!0;var h=Kt(),f=h("%Object.defineProperty%",!0)||!1;if(f)try{f({},"a",{value:1})}catch{f=!1}return wr=f,wr}function wa(){if(Mi)return _r;Mi=!0;var h=Kt(),f=h("%Object.getOwnPropertyDescriptor%",!0);if(f)try{f([],"length")}catch{f=null}return _r=f,_r}function ku(){if(ji)return Sr;ji=!0;var h=no(),f=va(),s=ir(),l=wa();return Sr=function(c,n,t){if(!c||typeof c!="object"&&typeof c!="function")throw new s("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new s("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,e=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,d=!!l&&l(c,n);if(h)h(c,n,{configurable:i===null&&d?d.configurable:!i,enumerable:r===null&&d?d.enumerable:!r,value:t,writable:e===null&&d?d.writable:!e});else if(a||!r&&!e&&!i)c[n]=t;else throw new f("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Sr}function Pu(){if(Ni)return Er;Ni=!0;var h=no(),f=function(){return!!h};return f.hasArrayLengthDefineBug=function(){if(!h)return null;try{return h([],"length",{value:1}).length!==1}catch{return!0}},Er=f,Er}function Ru(){if(Bi)return Ar;Bi=!0;var h=Kt(),f=ku(),s=Pu()(),l=wa(),c=ir(),n=h("%Math.floor%");return Ar=function(t,r){if(typeof t!="function")throw new c("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||n(r)!==r)throw new c("`length` must be a positive 32-bit integer");var e=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in t&&l){var d=l(t,"length");d&&!d.configurable&&(i=!1),d&&!d.writable&&(a=!1)}return(i||a||!e)&&(s?f(t,"length",r,!0,!0):f(t,"length",r)),t},Ar}function Cu(){if(Ui)return qt;Ui=!0;var h=ro(),f=Kt(),s=Ru(),l=ir(),c=f("%Function.prototype.apply%"),n=f("%Function.prototype.call%"),t=f("%Reflect.apply%",!0)||h.call(n,c),r=no(),e=f("%Math.max%");qt=function(a){if(typeof a!="function")throw new l("a function is required");var d=t(h,n,arguments);return s(d,1+e(0,a.length-(arguments.length-1)),!0)};var i=function(){return t(h,c,arguments)};return r?r(qt,"apply",{value:i}):qt.apply=i,qt}function Mu(){if(Li)return Ir;Li=!0;var h=Kt(),f=Cu(),s=f(h("String.prototype.indexOf"));return Ir=function(l,c){var n=h(l,!!c);return typeof n=="function"&&s(l,".prototype.")>-1?f(n):n},Ir}var ci,fi,hi,pi,di,gi,yi,bi,mi,vi,wi,_i,Si,Ei,Ai,Ii,dr,xi,gr,Ti,yr,Oi,br,ki,mr,Pi,vr,Ri,wr,Ci,_r,Mi,Sr,ji,Er,Ni,Ar,Bi,qt,Ui,Ir,Li,ju=it(()=>{he(),de(),pe(),ci={},fi=!1,hi={},pi=!1,di={},gi=!1,yi={},bi=!1,mi={},vi=!1,wi={},_i=!1,Si={},Ei=!1,Ai={},Ii=!1,dr={},xi=!1,gr={},Ti=!1,yr={},Oi=!1,br={},ki=!1,mr={},Pi=!1,vr={},Ri=!1,wr={},Ci=!1,_r={},Mi=!1,Sr={},ji=!1,Er={},Ni=!1,Ar={},Bi=!1,qt={},Ui=!1,Ir={},Li=!1});function io(h){throw new Error("Node.js process "+h+" is not supported by JSPM core outside of Node.js")}function Nu(){!Bt||!jt||(Bt=!1,jt.length?ct=jt.concat(ct):tr=-1,ct.length&&_a())}function _a(){if(!Bt){var h=setTimeout(Nu,0);Bt=!0;for(var f=ct.length;f;){for(jt=ct,ct=[];++tr<f;)jt&&jt[tr].run();tr=-1,f=ct.length}jt=null,Bt=!1,clearTimeout(h)}}function Bu(h){var f=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)f[s-1]=arguments[s];ct.push(new Sa(h,f)),ct.length===1&&!Bt&&setTimeout(_a,0)}function Sa(h,f){this.fun=h,this.array=f}function Ze(){}function Uu(h){io("_linkedBinding")}function Lu(h){io("dlopen")}function Du(){return[]}function Fu(){return[]}function Wu(h,f){if(!h)throw new Error(f||"assertion error")}function qu(){return!1}function $u(){return gt.now()/1e3}function Kr(h){var f=Math.floor((Date.now()-gt.now())*.001),s=gt.now()*.001,l=Math.floor(s)+f,c=Math.floor(s%1*1e9);return h&&(l=l-h[0],c=c-h[1],c<0&&(l--,c+=xr)),[l,c]}function St(){return oo}function zu(h){return[]}var ct,Bt,jt,tr,co,fo,ho,po,go,yo,bo,mo,vo,wo,_o,So,Eo,Ao,Io,xo,To,Oo,ko,Po,Ro,ar,Co,Mo,jo,No,Bo,Uo,Lo,Do,Fo,Wo,qo,$o,zo,Vo,Ko,Ho,Go,Qo,Yo,Jo,Xo,Zo,es,ts,rs,gt,Hr,xr,ns,is,os,ss,as,ls,us,cs,fs,hs,ps,oo,Ea=it(()=>{he(),de(),pe(),ct=[],Bt=!1,tr=-1,Sa.prototype.run=function(){this.fun.apply(null,this.array)},co="browser",fo="x64",ho="browser",po={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},go=["/usr/bin/node"],yo=[],bo="v16.8.0",mo={},vo=function(h,f){console.warn((f?f+": ":"")+h)},wo=function(h){io("binding")},_o=function(h){return 0},So=function(){return"/"},Eo=function(h){},Ao={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Io=Ze,xo=[],To={},Oo=!1,ko={},Po=Ze,Ro=Ze,ar=function(){return{}},Co=ar,Mo=ar,jo=Ze,No=Ze,Bo=Ze,Uo={},Lo={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Do=Ze,Fo=Ze,Wo=Ze,qo=Ze,$o=Ze,zo=Ze,Vo=Ze,Ko=void 0,Ho=void 0,Go=void 0,Qo=Ze,Yo=2,Jo=1,Xo="/bin/usr/node",Zo=9229,es="node",ts=[],rs=Ze,gt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},gt.now===void 0&&(Hr=Date.now(),gt.timing&&gt.timing.navigationStart&&(Hr=gt.timing.navigationStart),gt.now=()=>Date.now()-Hr),xr=1e9,Kr.bigint=function(h){var f=Kr(h);return typeof BigInt>"u"?f[0]*xr+f[1]:BigInt(f[0]*xr)+BigInt(f[1])},ns=10,is={},os=0,ss=St,as=St,ls=St,us=St,cs=St,fs=Ze,hs=St,ps=St,oo={version:bo,versions:mo,arch:fo,platform:ho,release:Ao,_rawDebug:Io,moduleLoadList:xo,binding:wo,_linkedBinding:Uu,_events:is,_eventsCount:os,_maxListeners:ns,on:St,addListener:ss,once:as,off:ls,removeListener:us,removeAllListeners:cs,emit:fs,prependListener:hs,prependOnceListener:ps,listeners:zu,domain:To,_exiting:Oo,config:ko,dlopen:Lu,uptime:$u,_getActiveRequests:Du,_getActiveHandles:Fu,reallyExit:Po,_kill:Ro,cpuUsage:ar,resourceUsage:Co,memoryUsage:Mo,kill:jo,exit:No,openStdin:Bo,allowedNodeEnvironmentFlags:Uo,assert:Wu,features:Lo,_fatalExceptions:Do,setUncaughtExceptionCaptureCallback:Fo,hasUncaughtExceptionCaptureCallback:qu,emitWarning:vo,nextTick:Bu,_tickCallback:Wo,_debugProcess:qo,_debugEnd:$o,_startProfilerIdleNotifier:zo,_stopProfilerIdleNotifier:Vo,stdout:Ko,stdin:Go,stderr:Ho,abort:Qo,umask:_o,chdir:Eo,cwd:So,env:po,title:co,argv:go,execArgv:yo,pid:Yo,ppid:Jo,execPath:Xo,debugPort:Zo,hrtime:Kr,argv0:es,_preload_modules:ts,setSourceMapsEnabled:rs}});function Vu(){if(Di)return Tr;Di=!0;var h=oo;function f(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function s(n,t){for(var r="",e=0,i=-1,a=0,d,p=0;p<=n.length;++p){if(p<n.length)d=n.charCodeAt(p);else{if(d===47)break;d=47}if(d===47){if(!(i===p-1||a===1))if(i!==p-1&&a===2){if(r.length<2||e!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var b=r.lastIndexOf("/");if(b!==r.length-1){b===-1?(r="",e=0):(r=r.slice(0,b),e=r.length-1-r.lastIndexOf("/")),i=p,a=0;continue}}else if(r.length===2||r.length===1){r="",e=0,i=p,a=0;continue}}t&&(r.length>0?r+="/..":r="..",e=2)}else r.length>0?r+="/"+n.slice(i+1,p):r=n.slice(i+1,p),e=p-i-1;i=p,a=0}else d===46&&a!==-1?++a:a=-1}return r}function l(n,t){var r=t.dir||t.root,e=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+e:r+n+e:e}var c={resolve:function(){for(var n="",t=!1,r,e=arguments.length-1;e>=-1&&!t;e--){var i;e>=0?i=arguments[e]:(r===void 0&&(r=h.cwd()),i=r),f(i),i.length!==0&&(n=i+"/"+n,t=i.charCodeAt(0)===47)}return n=s(n,!t),t?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(f(n),n.length===0)return".";var t=n.charCodeAt(0)===47,r=n.charCodeAt(n.length-1)===47;return n=s(n,!t),n.length===0&&!t&&(n="."),n.length>0&&r&&(n+="/"),t?"/"+n:n},isAbsolute:function(n){return f(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,t=0;t<arguments.length;++t){var r=arguments[t];f(r),r.length>0&&(n===void 0?n=r:n+="/"+r)}return n===void 0?".":c.normalize(n)},relative:function(n,t){if(f(n),f(t),n===t||(n=c.resolve(n),t=c.resolve(t),n===t))return"";for(var r=1;r<n.length&&n.charCodeAt(r)===47;++r);for(var e=n.length,i=e-r,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var d=t.length,p=d-a,b=i<p?i:p,m=-1,S=0;S<=b;++S){if(S===b){if(p>b){if(t.charCodeAt(a+S)===47)return t.slice(a+S+1);if(S===0)return t.slice(a+S)}else i>b&&(n.charCodeAt(r+S)===47?m=S:S===0&&(m=0));break}var w=n.charCodeAt(r+S),A=t.charCodeAt(a+S);if(w!==A)break;w===47&&(m=S)}var g="";for(S=r+m+1;S<=e;++S)(S===e||n.charCodeAt(S)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+t.slice(a+m):(a+=m,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(n){return n},dirname:function(n){if(f(n),n.length===0)return".";for(var t=n.charCodeAt(0),r=t===47,e=-1,i=!0,a=n.length-1;a>=1;--a)if(t=n.charCodeAt(a),t===47){if(!i){e=a;break}}else i=!1;return e===-1?r?"/":".":r&&e===1?"//":n.slice(0,e)},basename:function(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');f(n);var r=0,e=-1,i=!0,a;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";var d=t.length-1,p=-1;for(a=n.length-1;a>=0;--a){var b=n.charCodeAt(a);if(b===47){if(!i){r=a+1;break}}else p===-1&&(i=!1,p=a+1),d>=0&&(b===t.charCodeAt(d)?--d===-1&&(e=a):(d=-1,e=p))}return r===e?e=p:e===-1&&(e=n.length),n.slice(r,e)}else{for(a=n.length-1;a>=0;--a)if(n.charCodeAt(a)===47){if(!i){r=a+1;break}}else e===-1&&(i=!1,e=a+1);return e===-1?"":n.slice(r,e)}},extname:function(n){f(n);for(var t=-1,r=0,e=-1,i=!0,a=0,d=n.length-1;d>=0;--d){var p=n.charCodeAt(d);if(p===47){if(!i){r=d+1;break}continue}e===-1&&(i=!1,e=d+1),p===46?t===-1?t=d:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||e===-1||a===0||a===1&&t===e-1&&t===r+1?"":n.slice(t,e)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return l("/",n)},parse:function(n){f(n);var t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;var r=n.charCodeAt(0),e=r===47,i;e?(t.root="/",i=1):i=0;for(var a=-1,d=0,p=-1,b=!0,m=n.length-1,S=0;m>=i;--m){if(r=n.charCodeAt(m),r===47){if(!b){d=m+1;break}continue}p===-1&&(b=!1,p=m+1),r===46?a===-1?a=m:S!==1&&(S=1):a!==-1&&(S=-1)}return a===-1||p===-1||S===0||S===1&&a===p-1&&a===d+1?p!==-1&&(d===0&&e?t.base=t.name=n.slice(1,p):t.base=t.name=n.slice(d,p)):(d===0&&e?(t.name=n.slice(1,a),t.base=n.slice(1,p)):(t.name=n.slice(d,a),t.base=n.slice(d,p)),t.ext=n.slice(a,p)),d>0?t.dir=n.slice(0,d-1):e&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,Tr=c,Tr}var Tr,Di,Fi,Ku=it(()=>{he(),de(),pe(),Ea(),Tr={},Di=!1,Fi=Vu()}),Aa={};$t(Aa,{URL:()=>ja,Url:()=>ka,default:()=>et,fileURLToPath:()=>xa,format:()=>Pa,parse:()=>Ma,pathToFileURL:()=>Ta,resolve:()=>Ra,resolveObject:()=>Ca});function Hu(){if(Wi)return Or;Wi=!0;var h=typeof Map=="function"&&Map.prototype,f=Object.getOwnPropertyDescriptor&&h?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=h&&f&&typeof f.get=="function"?f.get:null,l=h&&Map.prototype.forEach,c=typeof Set=="function"&&Set.prototype,n=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,t=c&&n&&typeof n.get=="function"?n.get:null,r=c&&Set.prototype.forEach,e=typeof WeakMap=="function"&&WeakMap.prototype,i=e?WeakMap.prototype.has:null,a=typeof WeakSet=="function"&&WeakSet.prototype,d=a?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,b=p?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,S=Object.prototype.toString,w=Function.prototype.toString,A=String.prototype.match,g=String.prototype.slice,_=String.prototype.replace,E=String.prototype.toUpperCase,v=String.prototype.toLowerCase,C=RegExp.prototype.test,P=Array.prototype.concat,I=Array.prototype.join,k=Array.prototype.slice,T=Math.floor,F=typeof BigInt=="function"?BigInt.prototype.valueOf:null,x=Object.getOwnPropertySymbols,q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,V=typeof Symbol=="function"&&typeof Symbol.iterator=="object",L=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===V||!0)?Symbol.toStringTag:null,ae=Object.prototype.propertyIsEnumerable,te=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(W){return W.__proto__}:null);function Z(W,Y){if(W===1/0||W===-1/0||W!==W||W&&W>-1e3&&W<1e3||C.call(/e/,Y))return Y;var Ae=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof W=="number"){var Te=W<0?-T(-W):T(W);if(Te!==W){var Oe=String(Te),je=g.call(Y,Oe.length+1);return _.call(Oe,Ae,"$&_")+"."+_.call(_.call(je,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(Y,Ae,"$&_")}var le=Oa,K=le.custom,ie=ee(K)?K:null;Or=function W(Y,Ae,Te,Oe){var je=Ae||{};if(ue(je,"quoteStyle")&&je.quoteStyle!=="single"&&je.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ue(je,"maxStringLength")&&(typeof je.maxStringLength=="number"?je.maxStringLength<0&&je.maxStringLength!==1/0:je.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ze=ue(je,"customInspect")?je.customInspect:!0;if(typeof ze!="boolean"&&ze!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ue(je,"indent")&&je.indent!==null&&je.indent!=="	"&&!(parseInt(je.indent,10)===je.indent&&je.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ue(je,"numericSeparator")&&typeof je.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var He=je.numericSeparator;if(typeof Y>"u")return"undefined";if(Y===null)return"null";if(typeof Y=="boolean")return Y?"true":"false";if(typeof Y=="string")return ce(Y,je);if(typeof Y=="number"){if(Y===0)return 1/0/Y>0?"0":"-0";var Ne=String(Y);return He?Z(Y,Ne):Ne}if(typeof Y=="bigint"){var We=String(Y)+"n";return He?Z(Y,We):We}var Re=typeof je.depth>"u"?5:je.depth;if(typeof Te>"u"&&(Te=0),Te>=Re&&Re>0&&typeof Y=="object")return fe(Y)?"[Array]":"[Object]";var Be=j(je,Te);if(typeof Oe>"u")Oe=[];else if(oe(Oe,Y)>=0)return"[Circular]";function De(at,_t,Ct){if(_t&&(Oe=k.call(Oe),Oe.push(_t)),Ct){var lt={depth:je.depth};return ue(je,"quoteStyle")&&(lt.quoteStyle=je.quoteStyle),W(at,lt,Te+1,Oe)}return W(at,je,Te+1,Oe)}if(typeof Y=="function"&&!_e(Y)){var Ke=Q(Y),Qe=ne(Y,De);return"[Function"+(Ke?": "+Ke:" (anonymous)")+"]"+(Qe.length>0?" { "+I.call(Qe,", ")+" }":"")}if(ee(Y)){var ot=V?_.call(String(Y),/^(Symbol\(.*\))_[^)]*$/,"$1"):q.call(Y);return typeof Y=="object"&&!V?o(ot):ot}if(Ee(Y)){for(var R="<"+v.call(String(Y.nodeName)),B=Y.attributes||[],Se=0;Se<B.length;Se++)R+=" "+B[Se].name+"="+M(G(B[Se].value),"double",je);return R+=">",Y.childNodes&&Y.childNodes.length&&(R+="..."),R+="</"+v.call(String(Y.nodeName))+">",R}if(fe(Y)){if(Y.length===0)return"[]";var xe=ne(Y,De);return Be&&!O(xe)?"["+z(xe,Be)+"]":"[ "+I.call(xe,", ")+" ]"}if(X(Y)){var ke=ne(Y,De);return!("cause"in Error.prototype)&&"cause"in Y&&!ae.call(Y,"cause")?"{ ["+String(Y)+"] "+I.call(P.call("[cause]: "+De(Y.cause),ke),", ")+" }":ke.length===0?"["+String(Y)+"]":"{ ["+String(Y)+"] "+I.call(ke,", ")+" }"}if(typeof Y=="object"&&ze){if(ie&&typeof Y[ie]=="function"&&le)return le(Y,{depth:Re-Te});if(ze!=="symbol"&&typeof Y.inspect=="function")return Y.inspect()}if(ye(Y)){var Ge=[];return l&&l.call(Y,function(at,_t){Ge.push(De(_t,Y,!0)+" => "+De(at,Y))}),y("Map",s.call(Y),Ge,Be)}if(J(Y)){var tt=[];return r&&r.call(Y,function(at){tt.push(De(at,Y))}),y("Set",t.call(Y),tt,Be)}if(ge(Y))return u("WeakMap");if(ve(Y))return u("WeakSet");if(we(Y))return u("WeakRef");if(se(Y))return o(De(Number(Y)));if(re(Y))return o(De(F.call(Y)));if(H(Y))return o(m.call(Y));if(D(Y))return o(De(String(Y)));if(typeof window<"u"&&Y===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Y===globalThis||typeof kr<"u"&&Y===kr)return"{ [object globalThis] }";if(!$(Y)&&!_e(Y)){var st=ne(Y,De),Ht=te?te(Y)===Object.prototype:Y instanceof Object||Y.constructor===Object,Gt=Y instanceof Object?"":"null prototype",Qt=!Ht&&L&&Object(Y)===Y&&L in Y?g.call(N(Y),8,-1):Gt?"Object":"",or=Ht||typeof Y.constructor!="function"?"":Y.constructor.name?Y.constructor.name+" ":"",Rt=or+(Qt||Gt?"["+I.call(P.call([],Qt||[],Gt||[]),": ")+"] ":"");return st.length===0?Rt+"{}":Be?Rt+"{"+z(st,Be)+"}":Rt+"{ "+I.call(st,", ")+" }"}return String(Y)};function M(W,Y,Ae){var Te=(Ae.quoteStyle||Y)==="double"?'"':"'";return Te+W+Te}function G(W){return _.call(String(W),/"/g,"&quot;")}function fe(W){return N(W)==="[object Array]"&&(!L||!(typeof W=="object"&&L in W))}function $(W){return N(W)==="[object Date]"&&(!L||!(typeof W=="object"&&L in W))}function _e(W){return N(W)==="[object RegExp]"&&(!L||!(typeof W=="object"&&L in W))}function X(W){return N(W)==="[object Error]"&&(!L||!(typeof W=="object"&&L in W))}function D(W){return N(W)==="[object String]"&&(!L||!(typeof W=="object"&&L in W))}function se(W){return N(W)==="[object Number]"&&(!L||!(typeof W=="object"&&L in W))}function H(W){return N(W)==="[object Boolean]"&&(!L||!(typeof W=="object"&&L in W))}function ee(W){if(V)return W&&typeof W=="object"&&W instanceof Symbol;if(typeof W=="symbol")return!0;if(!W||typeof W!="object"||!q)return!1;try{return q.call(W),!0}catch{}return!1}function re(W){if(!W||typeof W!="object"||!F)return!1;try{return F.call(W),!0}catch{}return!1}var be=Object.prototype.hasOwnProperty||function(W){return W in(this||kr)};function ue(W,Y){return be.call(W,Y)}function N(W){return S.call(W)}function Q(W){if(W.name)return W.name;var Y=A.call(w.call(W),/^function\s*([\w$]+)/);return Y?Y[1]:null}function oe(W,Y){if(W.indexOf)return W.indexOf(Y);for(var Ae=0,Te=W.length;Ae<Te;Ae++)if(W[Ae]===Y)return Ae;return-1}function ye(W){if(!s||!W||typeof W!="object")return!1;try{s.call(W);try{t.call(W)}catch{return!0}return W instanceof Map}catch{}return!1}function ge(W){if(!i||!W||typeof W!="object")return!1;try{i.call(W,i);try{d.call(W,d)}catch{return!0}return W instanceof WeakMap}catch{}return!1}function we(W){if(!b||!W||typeof W!="object")return!1;try{return b.call(W),!0}catch{}return!1}function J(W){if(!t||!W||typeof W!="object")return!1;try{t.call(W);try{s.call(W)}catch{return!0}return W instanceof Set}catch{}return!1}function ve(W){if(!d||!W||typeof W!="object")return!1;try{d.call(W,d);try{i.call(W,i)}catch{return!0}return W instanceof WeakSet}catch{}return!1}function Ee(W){return!W||typeof W!="object"?!1:typeof HTMLElement<"u"&&W instanceof HTMLElement?!0:typeof W.nodeName=="string"&&typeof W.getAttribute=="function"}function ce(W,Y){if(W.length>Y.maxStringLength){var Ae=W.length-Y.maxStringLength,Te="... "+Ae+" more character"+(Ae>1?"s":"");return ce(g.call(W,0,Y.maxStringLength),Y)+Te}var Oe=_.call(_.call(W,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Me);return M(Oe,"single",Y)}function Me(W){var Y=W.charCodeAt(0),Ae={8:"b",9:"t",10:"n",12:"f",13:"r"}[Y];return Ae?"\\"+Ae:"\\x"+(Y<16?"0":"")+E.call(Y.toString(16))}function o(W){return"Object("+W+")"}function u(W){return W+" { ? }"}function y(W,Y,Ae,Te){var Oe=Te?z(Ae,Te):I.call(Ae,", ");return W+" ("+Y+") {"+Oe+"}"}function O(W){for(var Y=0;Y<W.length;Y++)if(oe(W[Y],`
`)>=0)return!1;return!0}function j(W,Y){var Ae;if(W.indent==="	")Ae="	";else if(typeof W.indent=="number"&&W.indent>0)Ae=I.call(Array(W.indent+1)," ");else return null;return{base:Ae,prev:I.call(Array(Y+1),Ae)}}function z(W,Y){if(W.length===0)return"";var Ae=`
`+Y.prev+Y.base;return Ae+I.call(W,","+Ae)+`
`+Y.prev}function ne(W,Y){var Ae=fe(W),Te=[];if(Ae){Te.length=W.length;for(var Oe=0;Oe<W.length;Oe++)Te[Oe]=ue(W,Oe)?Y(W[Oe],W):""}var je=typeof x=="function"?x(W):[],ze;if(V){ze={};for(var He=0;He<je.length;He++)ze["$"+je[He]]=je[He]}for(var Ne in W)ue(W,Ne)&&(Ae&&String(Number(Ne))===Ne&&Ne<W.length||V&&ze["$"+Ne]instanceof Symbol||(C.call(/[^\w$]/,Ne)?Te.push(Y(Ne,W)+": "+Y(W[Ne],W)):Te.push(Ne+": "+Y(W[Ne],W))));if(typeof x=="function")for(var We=0;We<je.length;We++)ae.call(W,je[We])&&Te.push("["+Y(je[We])+"]: "+Y(W[je[We]],W));return Te}return Or}function Gu(){if(qi)return Pr;qi=!0;var h=Kt(),f=Mu(),s=Hu(),l=ir(),c=h("%WeakMap%",!0),n=h("%Map%",!0),t=f("WeakMap.prototype.get",!0),r=f("WeakMap.prototype.set",!0),e=f("WeakMap.prototype.has",!0),i=f("Map.prototype.get",!0),a=f("Map.prototype.set",!0),d=f("Map.prototype.has",!0),p=function(w,A){for(var g=w,_;(_=g.next)!==null;g=_)if(_.key===A)return g.next=_.next,_.next=w.next,w.next=_,_},b=function(w,A){var g=p(w,A);return g&&g.value},m=function(w,A,g){var _=p(w,A);_?_.value=g:w.next={key:A,next:w.next,value:g}},S=function(w,A){return!!p(w,A)};return Pr=function(){var w,A,g,_={assert:function(E){if(!_.has(E))throw new l("Side channel does not contain "+s(E))},get:function(E){if(c&&E&&(typeof E=="object"||typeof E=="function")){if(w)return t(w,E)}else if(n){if(A)return i(A,E)}else if(g)return b(g,E)},has:function(E){if(c&&E&&(typeof E=="object"||typeof E=="function")){if(w)return e(w,E)}else if(n){if(A)return d(A,E)}else if(g)return S(g,E);return!1},set:function(E,v){c&&E&&(typeof E=="object"||typeof E=="function")?(w||(w=new c),r(w,E,v)):n?(A||(A=new n),a(A,E,v)):(g||(g={key:{},next:null}),m(g,E,v))}};return _},Pr}function so(){if($i)return Rr;$i=!0;var h=String.prototype.replace,f=/%20/g,s={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Rr={default:s.RFC3986,formatters:{RFC1738:function(l){return h.call(l,f,"+")},RFC3986:function(l){return String(l)}},RFC1738:s.RFC1738,RFC3986:s.RFC3986},Rr}function Ia(){if(zi)return Cr;zi=!0;var h=so(),f=Object.prototype.hasOwnProperty,s=Array.isArray,l=function(){for(var w=[],A=0;A<256;++A)w.push("%"+((A<16?"0":"")+A.toString(16)).toUpperCase());return w}(),c=function(w){for(;w.length>1;){var A=w.pop(),g=A.obj[A.prop];if(s(g)){for(var _=[],E=0;E<g.length;++E)typeof g[E]<"u"&&_.push(g[E]);A.obj[A.prop]=_}}},n=function(w,A){for(var g=A&&A.plainObjects?Object.create(null):{},_=0;_<w.length;++_)typeof w[_]<"u"&&(g[_]=w[_]);return g},t=function w(A,g,_){if(!g)return A;if(typeof g!="object"){if(s(A))A.push(g);else if(A&&typeof A=="object")(_&&(_.plainObjects||_.allowPrototypes)||!f.call(Object.prototype,g))&&(A[g]=!0);else return[A,g];return A}if(!A||typeof A!="object")return[A].concat(g);var E=A;return s(A)&&!s(g)&&(E=n(A,_)),s(A)&&s(g)?(g.forEach(function(v,C){if(f.call(A,C)){var P=A[C];P&&typeof P=="object"&&v&&typeof v=="object"?A[C]=w(P,v,_):A.push(v)}else A[C]=v}),A):Object.keys(g).reduce(function(v,C){var P=g[C];return f.call(v,C)?v[C]=w(v[C],P,_):v[C]=P,v},E)},r=function(w,A){return Object.keys(A).reduce(function(g,_){return g[_]=A[_],g},w)},e=function(w,A,g){var _=w.replace(/\+/g," ");if(g==="iso-8859-1")return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch{return _}},i=1024,a=function(w,A,g,_,E){if(w.length===0)return w;var v=w;if(typeof w=="symbol"?v=Symbol.prototype.toString.call(w):typeof w!="string"&&(v=String(w)),g==="iso-8859-1")return escape(v).replace(/%u[0-9a-f]{4}/gi,function(x){return"%26%23"+parseInt(x.slice(2),16)+"%3B"});for(var C="",P=0;P<v.length;P+=i){for(var I=v.length>=i?v.slice(P,P+i):v,k=[],T=0;T<I.length;++T){var F=I.charCodeAt(T);if(F===45||F===46||F===95||F===126||F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122||E===h.RFC1738&&(F===40||F===41)){k[k.length]=I.charAt(T);continue}if(F<128){k[k.length]=l[F];continue}if(F<2048){k[k.length]=l[192|F>>6]+l[128|F&63];continue}if(F<55296||F>=57344){k[k.length]=l[224|F>>12]+l[128|F>>6&63]+l[128|F&63];continue}T+=1,F=65536+((F&1023)<<10|I.charCodeAt(T)&1023),k[k.length]=l[240|F>>18]+l[128|F>>12&63]+l[128|F>>6&63]+l[128|F&63]}C+=k.join("")}return C},d=function(w){for(var A=[{obj:{o:w},prop:"o"}],g=[],_=0;_<A.length;++_)for(var E=A[_],v=E.obj[E.prop],C=Object.keys(v),P=0;P<C.length;++P){var I=C[P],k=v[I];typeof k=="object"&&k!==null&&g.indexOf(k)===-1&&(A.push({obj:v,prop:I}),g.push(k))}return c(A),w},p=function(w){return Object.prototype.toString.call(w)==="[object RegExp]"},b=function(w){return!w||typeof w!="object"?!1:!!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w))},m=function(w,A){return[].concat(w,A)},S=function(w,A){if(s(w)){for(var g=[],_=0;_<w.length;_+=1)g.push(A(w[_]));return g}return A(w)};return Cr={arrayToObject:n,assign:r,combine:m,compact:d,decode:e,encode:a,isBuffer:b,isRegExp:p,maybeMap:S,merge:t},Cr}function Qu(){if(Vi)return Mr;Vi=!0;var h=Gu(),f=Ia(),s=so(),l=Object.prototype.hasOwnProperty,c={brackets:function(S){return S+"[]"},comma:"comma",indices:function(S,w){return S+"["+w+"]"},repeat:function(S){return S}},n=Array.isArray,t=Array.prototype.push,r=function(S,w){t.apply(S,n(w)?w:[w])},e=Date.prototype.toISOString,i=s.default,a={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:f.encode,encodeValuesOnly:!1,format:i,formatter:s.formatters[i],indices:!1,serializeDate:function(S){return e.call(S)},skipNulls:!1,strictNullHandling:!1},d=function(S){return typeof S=="string"||typeof S=="number"||typeof S=="boolean"||typeof S=="symbol"||typeof S=="bigint"},p={},b=function S(w,A,g,_,E,v,C,P,I,k,T,F,x,q,V,L,ae,te){for(var Z=w,le=te,K=0,ie=!1;(le=le.get(p))!==void 0&&!ie;){var M=le.get(w);if(K+=1,typeof M<"u"){if(M===K)throw new RangeError("Cyclic object value");ie=!0}typeof le.get(p)>"u"&&(K=0)}if(typeof k=="function"?Z=k(A,Z):Z instanceof Date?Z=x(Z):g==="comma"&&n(Z)&&(Z=f.maybeMap(Z,function(N){return N instanceof Date?x(N):N})),Z===null){if(v)return I&&!L?I(A,a.encoder,ae,"key",q):A;Z=""}if(d(Z)||f.isBuffer(Z)){if(I){var G=L?A:I(A,a.encoder,ae,"key",q);return[V(G)+"="+V(I(Z,a.encoder,ae,"value",q))]}return[V(A)+"="+V(String(Z))]}var fe=[];if(typeof Z>"u")return fe;var $;if(g==="comma"&&n(Z))L&&I&&(Z=f.maybeMap(Z,I)),$=[{value:Z.length>0?Z.join(",")||null:void 0}];else if(n(k))$=k;else{var _e=Object.keys(Z);$=T?_e.sort(T):_e}var X=P?A.replace(/\./g,"%2E"):A,D=_&&n(Z)&&Z.length===1?X+"[]":X;if(E&&n(Z)&&Z.length===0)return D+"[]";for(var se=0;se<$.length;++se){var H=$[se],ee=typeof H=="object"&&typeof H.value<"u"?H.value:Z[H];if(!(C&&ee===null)){var re=F&&P?H.replace(/\./g,"%2E"):H,be=n(Z)?typeof g=="function"?g(D,re):D:D+(F?"."+re:"["+re+"]");te.set(w,K);var ue=h();ue.set(p,te),r(fe,S(ee,be,g,_,E,v,C,P,g==="comma"&&L&&n(Z)?null:I,k,T,F,x,q,V,L,ae,ue))}}return fe},m=function(S){if(!S)return a;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.encodeDotInKeys<"u"&&typeof S.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(S.encoder!==null&&typeof S.encoder<"u"&&typeof S.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=S.charset||a.charset;if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var A=s.default;if(typeof S.format<"u"){if(!l.call(s.formatters,S.format))throw new TypeError("Unknown format option provided.");A=S.format}var g=s.formatters[A],_=a.filter;(typeof S.filter=="function"||n(S.filter))&&(_=S.filter);var E;if(S.arrayFormat in c?E=S.arrayFormat:"indices"in S?E=S.indices?"indices":"repeat":E=a.arrayFormat,"commaRoundTrip"in S&&typeof S.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var v=typeof S.allowDots>"u"?S.encodeDotInKeys===!0?!0:a.allowDots:!!S.allowDots;return{addQueryPrefix:typeof S.addQueryPrefix=="boolean"?S.addQueryPrefix:a.addQueryPrefix,allowDots:v,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:a.allowEmptyArrays,arrayFormat:E,charset:w,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:a.charsetSentinel,commaRoundTrip:S.commaRoundTrip,delimiter:typeof S.delimiter>"u"?a.delimiter:S.delimiter,encode:typeof S.encode=="boolean"?S.encode:a.encode,encodeDotInKeys:typeof S.encodeDotInKeys=="boolean"?S.encodeDotInKeys:a.encodeDotInKeys,encoder:typeof S.encoder=="function"?S.encoder:a.encoder,encodeValuesOnly:typeof S.encodeValuesOnly=="boolean"?S.encodeValuesOnly:a.encodeValuesOnly,filter:_,format:A,formatter:g,serializeDate:typeof S.serializeDate=="function"?S.serializeDate:a.serializeDate,skipNulls:typeof S.skipNulls=="boolean"?S.skipNulls:a.skipNulls,sort:typeof S.sort=="function"?S.sort:null,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:a.strictNullHandling}};return Mr=function(S,w){var A=S,g=m(w),_,E;typeof g.filter=="function"?(E=g.filter,A=E("",A)):n(g.filter)&&(E=g.filter,_=E);var v=[];if(typeof A!="object"||A===null)return"";var C=c[g.arrayFormat],P=C==="comma"&&g.commaRoundTrip;_||(_=Object.keys(A)),g.sort&&_.sort(g.sort);for(var I=h(),k=0;k<_.length;++k){var T=_[k];g.skipNulls&&A[T]===null||r(v,b(A[T],T,C,P,g.allowEmptyArrays,g.strictNullHandling,g.skipNulls,g.encodeDotInKeys,g.encode?g.encoder:null,g.filter,g.sort,g.allowDots,g.serializeDate,g.format,g.formatter,g.encodeValuesOnly,g.charset,I))}var F=v.join(g.delimiter),x=g.addQueryPrefix===!0?"?":"";return g.charsetSentinel&&(g.charset==="iso-8859-1"?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),F.length>0?x+F:""},Mr}function Yu(){if(Ki)return jr;Ki=!0;var h=Ia(),f=Object.prototype.hasOwnProperty,s=Array.isArray,l={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:h.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},c=function(p){return p.replace(/&#(\d+);/g,function(b,m){return String.fromCharCode(parseInt(m,10))})},n=function(p,b){return p&&typeof p=="string"&&b.comma&&p.indexOf(",")>-1?p.split(","):p},t="utf8=%26%2310003%3B",r="utf8=%E2%9C%93",e=function(p,b){var m={__proto__:null},S=b.ignoreQueryPrefix?p.replace(/^\?/,""):p;S=S.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var w=b.parameterLimit===1/0?void 0:b.parameterLimit,A=S.split(b.delimiter,w),g=-1,_,E=b.charset;if(b.charsetSentinel)for(_=0;_<A.length;++_)A[_].indexOf("utf8=")===0&&(A[_]===r?E="utf-8":A[_]===t&&(E="iso-8859-1"),g=_,_=A.length);for(_=0;_<A.length;++_)if(_!==g){var v=A[_],C=v.indexOf("]="),P=C===-1?v.indexOf("="):C+1,I,k;P===-1?(I=b.decoder(v,l.decoder,E,"key"),k=b.strictNullHandling?null:""):(I=b.decoder(v.slice(0,P),l.decoder,E,"key"),k=h.maybeMap(n(v.slice(P+1),b),function(F){return b.decoder(F,l.decoder,E,"value")})),k&&b.interpretNumericEntities&&E==="iso-8859-1"&&(k=c(k)),v.indexOf("[]=")>-1&&(k=s(k)?[k]:k);var T=f.call(m,I);T&&b.duplicates==="combine"?m[I]=h.combine(m[I],k):(!T||b.duplicates==="last")&&(m[I]=k)}return m},i=function(p,b,m,S){for(var w=S?b:n(b,m),A=p.length-1;A>=0;--A){var g,_=p[A];if(_==="[]"&&m.parseArrays)g=m.allowEmptyArrays&&(w===""||m.strictNullHandling&&w===null)?[]:[].concat(w);else{g=m.plainObjects?Object.create(null):{};var E=_.charAt(0)==="["&&_.charAt(_.length-1)==="]"?_.slice(1,-1):_,v=m.decodeDotInKeys?E.replace(/%2E/g,"."):E,C=parseInt(v,10);!m.parseArrays&&v===""?g={0:w}:!isNaN(C)&&_!==v&&String(C)===v&&C>=0&&m.parseArrays&&C<=m.arrayLimit?(g=[],g[C]=w):v!=="__proto__"&&(g[v]=w)}w=g}return w},a=function(p,b,m,S){if(p){var w=m.allowDots?p.replace(/\.([^.[]+)/g,"[$1]"):p,A=/(\[[^[\]]*])/,g=/(\[[^[\]]*])/g,_=m.depth>0&&A.exec(w),E=_?w.slice(0,_.index):w,v=[];if(E){if(!m.plainObjects&&f.call(Object.prototype,E)&&!m.allowPrototypes)return;v.push(E)}for(var C=0;m.depth>0&&(_=g.exec(w))!==null&&C<m.depth;){if(C+=1,!m.plainObjects&&f.call(Object.prototype,_[1].slice(1,-1))&&!m.allowPrototypes)return;v.push(_[1])}if(_){if(m.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+m.depth+" and strictDepth is true");v.push("["+w.slice(_.index)+"]")}return i(v,b,m,S)}},d=function(p){if(!p)return l;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.decodeDotInKeys<"u"&&typeof p.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(p.decoder!==null&&typeof p.decoder<"u"&&typeof p.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var b=typeof p.charset>"u"?l.charset:p.charset,m=typeof p.duplicates>"u"?l.duplicates:p.duplicates;if(m!=="combine"&&m!=="first"&&m!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var S=typeof p.allowDots>"u"?p.decodeDotInKeys===!0?!0:l.allowDots:!!p.allowDots;return{allowDots:S,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:l.allowEmptyArrays,allowPrototypes:typeof p.allowPrototypes=="boolean"?p.allowPrototypes:l.allowPrototypes,allowSparse:typeof p.allowSparse=="boolean"?p.allowSparse:l.allowSparse,arrayLimit:typeof p.arrayLimit=="number"?p.arrayLimit:l.arrayLimit,charset:b,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:l.charsetSentinel,comma:typeof p.comma=="boolean"?p.comma:l.comma,decodeDotInKeys:typeof p.decodeDotInKeys=="boolean"?p.decodeDotInKeys:l.decodeDotInKeys,decoder:typeof p.decoder=="function"?p.decoder:l.decoder,delimiter:typeof p.delimiter=="string"||h.isRegExp(p.delimiter)?p.delimiter:l.delimiter,depth:typeof p.depth=="number"||p.depth===!1?+p.depth:l.depth,duplicates:m,ignoreQueryPrefix:p.ignoreQueryPrefix===!0,interpretNumericEntities:typeof p.interpretNumericEntities=="boolean"?p.interpretNumericEntities:l.interpretNumericEntities,parameterLimit:typeof p.parameterLimit=="number"?p.parameterLimit:l.parameterLimit,parseArrays:p.parseArrays!==!1,plainObjects:typeof p.plainObjects=="boolean"?p.plainObjects:l.plainObjects,strictDepth:typeof p.strictDepth=="boolean"?!!p.strictDepth:l.strictDepth,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:l.strictNullHandling}};return jr=function(p,b){var m=d(b);if(p===""||p===null||typeof p>"u")return m.plainObjects?Object.create(null):{};for(var S=typeof p=="string"?e(p,m):p,w=m.plainObjects?Object.create(null):{},A=Object.keys(S),g=0;g<A.length;++g){var _=A[g],E=a(_,S[_],m,typeof p=="string");w=h.merge(w,E,m)}return m.allowSparse===!0?w:h.compact(w)},jr}function Ju(){if(Hi)return Nr;Hi=!0;var h=Qu(),f=Yu(),s=so();return Nr={formats:s,parse:f,stringify:h},Nr}function Xu(){if(Gi)return Ot;Gi=!0;var h=Tt;function f(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r",`
`,"	"],t=["{","}","|","\\","^","`"].concat(n),r=["'"].concat(t),e=["%","/","?",";","#"].concat(r),i=["/","?","#"],a=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=Ju();function A(v,C,P){if(v&&typeof v=="object"&&v instanceof f)return v;var I=new f;return I.parse(v,C,P),I}f.prototype.parse=function(v,C,P){if(typeof v!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof v);var I=v.indexOf("?"),k=I!==-1&&I<v.indexOf("#")?"?":"#",T=v.split(k),F=/\\/g;T[0]=T[0].replace(F,"/"),v=T.join(k);var x=v;if(x=x.trim(),!P&&v.split("#").length===1){var q=c.exec(x);if(q)return this.path=x,this.href=x,this.pathname=q[1],q[2]?(this.search=q[2],C?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):C&&(this.search="",this.query={}),this}var V=s.exec(x);if(V){V=V[0];var L=V.toLowerCase();this.protocol=L,x=x.substr(V.length)}if(P||V||x.match(/^\/\/[^@/]+@[^@/]+/)){var ae=x.substr(0,2)==="//";ae&&!(V&&m[V])&&(x=x.substr(2),this.slashes=!0)}if(!m[V]&&(ae||V&&!S[V])){for(var te=-1,Z=0;Z<i.length;Z++){var le=x.indexOf(i[Z]);le!==-1&&(te===-1||le<te)&&(te=le)}var K,ie;te===-1?ie=x.lastIndexOf("@"):ie=x.lastIndexOf("@",te),ie!==-1&&(K=x.slice(0,ie),x=x.slice(ie+1),this.auth=decodeURIComponent(K)),te=-1;for(var Z=0;Z<e.length;Z++){var le=x.indexOf(e[Z]);le!==-1&&(te===-1||le<te)&&(te=le)}te===-1&&(te=x.length),this.host=x.slice(0,te),x=x.slice(te),this.parseHost(),this.hostname=this.hostname||"";var M=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!M)for(var G=this.hostname.split(/\./),Z=0,fe=G.length;Z<fe;Z++){var $=G[Z];if($&&!$.match(d)){for(var _e="",X=0,D=$.length;X<D;X++)$.charCodeAt(X)>127?_e+="x":_e+=$[X];if(!_e.match(d)){var se=G.slice(0,Z),H=G.slice(Z+1),ee=$.match(p);ee&&(se.push(ee[1]),H.unshift(ee[2])),H.length&&(x="/"+H.join(".")+x),this.hostname=se.join(".");break}}}this.hostname.length>a?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=h.toASCII(this.hostname));var re=this.port?":"+this.port:"",be=this.hostname||"";this.host=be+re,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),x[0]!=="/"&&(x="/"+x))}if(!b[L])for(var Z=0,fe=r.length;Z<fe;Z++){var ue=r[Z];if(x.indexOf(ue)!==-1){var N=encodeURIComponent(ue);N===ue&&(N=escape(ue)),x=x.split(ue).join(N)}}var Q=x.indexOf("#");Q!==-1&&(this.hash=x.substr(Q),x=x.slice(0,Q));var oe=x.indexOf("?");if(oe!==-1?(this.search=x.substr(oe),this.query=x.substr(oe+1),C&&(this.query=w.parse(this.query)),x=x.slice(0,oe)):C&&(this.search="",this.query={}),x&&(this.pathname=x),S[L]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var re=this.pathname||"",ye=this.search||"";this.path=re+ye}return this.href=this.format(),this};function g(v){return typeof v=="string"&&(v=A(v)),v instanceof f?v.format():f.prototype.format.call(v)}f.prototype.format=function(){var v=this.auth||"";v&&(v=encodeURIComponent(v),v=v.replace(/%3A/i,":"),v+="@");var C=this.protocol||"",P=this.pathname||"",I=this.hash||"",k=!1,T="";this.host?k=v+this.host:this.hostname&&(k=v+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(T=w.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var F=this.search||T&&"?"+T||"";return C&&C.substr(-1)!==":"&&(C+=":"),this.slashes||(!C||S[C])&&k!==!1?(k="//"+(k||""),P&&P.charAt(0)!=="/"&&(P="/"+P)):k||(k=""),I&&I.charAt(0)!=="#"&&(I="#"+I),F&&F.charAt(0)!=="?"&&(F="?"+F),P=P.replace(/[?#]/g,function(x){return encodeURIComponent(x)}),F=F.replace("#","%23"),C+k+P+F+I};function _(v,C){return A(v,!1,!0).resolve(C)}f.prototype.resolve=function(v){return this.resolveObject(A(v,!1,!0)).format()};function E(v,C){return v?A(v,!1,!0).resolveObject(C):C}return f.prototype.resolveObject=function(v){if(typeof v=="string"){var C=new f;C.parse(v,!1,!0),v=C}for(var P=new f,I=Object.keys(this),k=0;k<I.length;k++){var T=I[k];P[T]=this[T]}if(P.hash=v.hash,v.href==="")return P.href=P.format(),P;if(v.slashes&&!v.protocol){for(var F=Object.keys(v),x=0;x<F.length;x++){var q=F[x];q!=="protocol"&&(P[q]=v[q])}return S[P.protocol]&&P.hostname&&!P.pathname&&(P.pathname="/",P.path=P.pathname),P.href=P.format(),P}if(v.protocol&&v.protocol!==P.protocol){if(!S[v.protocol]){for(var V=Object.keys(v),L=0;L<V.length;L++){var ae=V[L];P[ae]=v[ae]}return P.href=P.format(),P}if(P.protocol=v.protocol,!v.host&&!m[v.protocol]){for(var fe=(v.pathname||"").split("/");fe.length&&!(v.host=fe.shift()););v.host||(v.host=""),v.hostname||(v.hostname=""),fe[0]!==""&&fe.unshift(""),fe.length<2&&fe.unshift(""),P.pathname=fe.join("/")}else P.pathname=v.pathname;if(P.search=v.search,P.query=v.query,P.host=v.host||"",P.auth=v.auth,P.hostname=v.hostname||v.host,P.port=v.port,P.pathname||P.search){var te=P.pathname||"",Z=P.search||"";P.path=te+Z}return P.slashes=P.slashes||v.slashes,P.href=P.format(),P}var le=P.pathname&&P.pathname.charAt(0)==="/",K=v.host||v.pathname&&v.pathname.charAt(0)==="/",ie=K||le||P.host&&v.pathname,M=ie,G=P.pathname&&P.pathname.split("/")||[],fe=v.pathname&&v.pathname.split("/")||[],$=P.protocol&&!S[P.protocol];if($&&(P.hostname="",P.port=null,P.host&&(G[0]===""?G[0]=P.host:G.unshift(P.host)),P.host="",v.protocol&&(v.hostname=null,v.port=null,v.host&&(fe[0]===""?fe[0]=v.host:fe.unshift(v.host)),v.host=null),ie=ie&&(fe[0]===""||G[0]==="")),K)P.host=v.host||v.host===""?v.host:P.host,P.hostname=v.hostname||v.hostname===""?v.hostname:P.hostname,P.search=v.search,P.query=v.query,G=fe;else if(fe.length)G||(G=[]),G.pop(),G=G.concat(fe),P.search=v.search,P.query=v.query;else if(v.search!=null){if($){P.host=G.shift(),P.hostname=P.host;var _e=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;_e&&(P.auth=_e.shift(),P.hostname=_e.shift(),P.host=P.hostname)}return P.search=v.search,P.query=v.query,(P.pathname!==null||P.search!==null)&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.href=P.format(),P}if(!G.length)return P.pathname=null,P.search?P.path="/"+P.search:P.path=null,P.href=P.format(),P;for(var X=G.slice(-1)[0],D=(P.host||v.host||G.length>1)&&(X==="."||X==="..")||X==="",se=0,H=G.length;H>=0;H--)X=G[H],X==="."?G.splice(H,1):X===".."?(G.splice(H,1),se++):se&&(G.splice(H,1),se--);if(!ie&&!M)for(;se--;se)G.unshift("..");ie&&G[0]!==""&&(!G[0]||G[0].charAt(0)!=="/")&&G.unshift(""),D&&G.join("/").substr(-1)!=="/"&&G.push("");var ee=G[0]===""||G[0]&&G[0].charAt(0)==="/";if($){P.hostname=ee?"":G.length?G.shift():"",P.host=P.hostname;var _e=P.host&&P.host.indexOf("@")>0?P.host.split("@"):!1;_e&&(P.auth=_e.shift(),P.hostname=_e.shift(),P.host=P.hostname)}return ie=ie||P.host&&G.length,ie&&!ee&&G.unshift(""),G.length>0?P.pathname=G.join("/"):(P.pathname=null,P.path=null),(P.pathname!==null||P.search!==null)&&(P.path=(P.pathname?P.pathname:"")+(P.search?P.search:"")),P.auth=v.auth||P.auth,P.slashes=P.slashes||v.slashes,P.href=P.format(),P},f.prototype.parseHost=function(){var v=this.host,C=l.exec(v);C&&(C=C[0],C!==":"&&(this.port=C.substr(1)),v=v.substr(0,v.length-C.length)),v&&(this.hostname=v)},Ot.parse=A,Ot.resolve=_,Ot.resolveObject=E,Ot.format=g,Ot.Url=f,Ot}function xa(h){if(typeof h=="string")h=new URL(h);else if(!(h instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(h.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Ur?Zu(h):ec(h)}function Zu(h){let f=h.hostname,s=h.pathname;for(let l=0;l<s.length;l++)if(s[l]==="%"){let c=s.codePointAt(l+2)||32;if(s[l+1]==="2"&&c===102||s[l+1]==="5"&&c===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(s=s.replace(Da,"\\"),s=decodeURIComponent(s),f!=="")return`\\\\${f}${s}`;{let l=s.codePointAt(1)|32,c=s[2];if(l<Ua||l>La||c!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return s.slice(1)}}function ec(h){if(h.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let f=h.pathname;for(let s=0;s<f.length;s++)if(f[s]==="%"){let l=f.codePointAt(s+2)||32;if(f[s+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(f)}function Ta(h){let f=Fi.resolve(h),s=h.charCodeAt(h.length-1);(s===Ba||Ur&&s===Na)&&f[f.length-1]!==Fi.sep&&(f+="/");let l=new URL("file://");return f.includes("%")&&(f=f.replace(Fa,"%25")),!Ur&&f.includes("\\")&&(f=f.replace(Wa,"%5C")),f.includes(`
`)&&(f=f.replace(qa,"%0A")),f.includes("\r")&&(f=f.replace($a,"%0D")),f.includes("	")&&(f=f.replace(za,"%09")),l.pathname=f,l}var Oa,Or,Wi,kr,Pr,qi,Rr,$i,Cr,zi,Mr,Vi,jr,Ki,Nr,Hi,Ot,Gi,et,ds,ka,Pa,Ra,Ca,Ma,ja,Na,Ba,Ua,La,Ur,Da,Fa,Wa,qa,$a,za,tc=it(()=>{he(),de(),pe(),mu(),ju(),Ku(),Ea(),Oa=Object.freeze(Object.create(null)),Or={},Wi=!1,kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:globalThis,Pr={},qi=!1,Rr={},$i=!1,Cr={},zi=!1,Mr={},Vi=!1,jr={},Ki=!1,Nr={},Hi=!1,Ot={},Gi=!1,et=Xu(),et.parse,et.resolve,et.resolveObject,et.format,et.Url,ds=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,et.URL=typeof URL<"u"?URL:null,et.pathToFileURL=Ta,et.fileURLToPath=xa,ka=et.Url,Pa=et.format,Ra=et.resolve,Ca=et.resolveObject,Ma=et.parse,ja=et.URL,Na=92,Ba=47,Ua=97,La=122,Ur=ds==="win32",Da=/\//g,Fa=/%/g,Wa=/\\/g,qa=/\n/g,$a=/\r/g,za=/\t/g}),rc=me((h,f)=>{he(),de(),pe(),f.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),ao=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0}),h.BufferedDuplex=void 0,h.writev=l;var f=Dt(),s=(Je(),Fe(Ye));function l(n,t){let r=new Array(n.length);for(let e=0;e<n.length;e++)typeof n[e].chunk=="string"?r[e]=s.Buffer.from(n[e].chunk,"utf8"):r[e]=n[e].chunk;this._write(s.Buffer.concat(r),"binary",t)}var c=class extends f.Duplex{constructor(t,r,e){super({objectMode:!0});Ie(this,"socket");Ie(this,"proxy");Ie(this,"isSocketOpen");Ie(this,"writeQueue");this.proxy=r,this.socket=e,this.writeQueue=[],t.objectMode||(this._writev=l.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{!this.destroyed&&this.readable&&this.push(i)})}_read(t){this.proxy.read(t)}_write(t,r,e){this.isSocketOpen?this.writeToProxy(t,r,e):this.writeQueue.push({chunk:t,encoding:r,cb:e})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,r){this.writeQueue=[],this.proxy.destroy(),r(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,r,e){this.proxy.write(t,r)===!1?this.proxy.once("drain",e):e()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:r,cb:e}=this.writeQueue.shift();this.writeToProxy(t,r,e)}}};h.BufferedDuplex=c}),lr=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(h,"__esModule",{value:!0}),h.streamBuilder=h.browserStreamBuilder=void 0;var s=(Je(),Fe(Ye)),l=f(rc()),c=f(bt()),n=Dt(),t=f($r()),r=ao(),e=(0,c.default)("mqttjs:ws"),i=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function a(A,g){let _=`${A.protocol}://${A.hostname}:${A.port}${A.path}`;return typeof A.transformWsUrl=="function"&&(_=A.transformWsUrl(_,A,g)),_}function d(A){let g=A;return A.port||(A.protocol==="wss"?g.port=443:g.port=80),A.path||(g.path="/"),A.wsOptions||(g.wsOptions={}),!t.default&&!A.forceNativeWebSocket&&A.protocol==="wss"&&i.forEach(_=>{Object.prototype.hasOwnProperty.call(A,_)&&!Object.prototype.hasOwnProperty.call(A.wsOptions,_)&&(g.wsOptions[_]=A[_])}),g}function p(A){let g=d(A);if(g.hostname||(g.hostname=g.host),!g.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);g.hostname=_.hostname,g.port||(g.port=Number(_.port))}return g.objectMode===void 0&&(g.objectMode=!(g.binary===!0||g.binary===void 0)),g}function b(A,g,_){e("createWebSocket"),e(`protocol: ${_.protocolId} ${_.protocolVersion}`);let E=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";e(`creating new Websocket for url: ${g} and protocol: ${E}`);let v;return _.createWebsocket?v=_.createWebsocket(g,[E],_):v=new l.default(g,[E],_.wsOptions),v}function m(A,g){let _=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt",E=a(g,A),v;return g.createWebsocket?v=g.createWebsocket(E,[_],g):v=new WebSocket(E,[_]),v.binaryType="arraybuffer",v}var S=(A,g)=>{e("streamBuilder");let _=d(g);_.hostname=_.hostname||_.host||"localhost";let E=a(_,A),v=b(A,E,_),C=l.default.createWebSocketStream(v,_.wsOptions);return C.url=E,v.on("close",()=>{C.destroy()}),C};h.streamBuilder=S;var w=(A,g)=>{e("browserStreamBuilder");let _,E=p(g).browserBufferSize||1024*512,v=g.browserBufferTimeout||1e3,C=!g.objectMode,P=m(A,g),I=T(g,L,ae);g.objectMode||(I._writev=r.writev.bind(I)),I.on("close",()=>{P.close()});let k=typeof P.addEventListener<"u";P.readyState===P.OPEN?(_=I,_.socket=P):(_=new r.BufferedDuplex(g,I,P),k?P.addEventListener("open",F):P.onopen=F),k?(P.addEventListener("close",x),P.addEventListener("error",q),P.addEventListener("message",V)):(P.onclose=x,P.onerror=q,P.onmessage=V);function T(te,Z,le){let K=new n.Transform({objectMode:te.objectMode});return K._write=Z,K._flush=le,K}function F(){e("WebSocket onOpen"),_ instanceof r.BufferedDuplex&&_.socketReady()}function x(te){e("WebSocket onClose",te),_.end(),_.destroy()}function q(te){e("WebSocket onError",te);let Z=new Error("WebSocket error");Z.event=te,_.destroy(Z)}async function V(te){if(!I||!I.readable||!I.writable)return;let{data:Z}=te;Z instanceof ArrayBuffer?Z=s.Buffer.from(Z):Z instanceof Blob?Z=s.Buffer.from(await new Response(Z).arrayBuffer()):Z=s.Buffer.from(Z,"utf8"),I.push(Z)}function L(te,Z,le){if(P.bufferedAmount>E){setTimeout(L,v,te,Z,le);return}C&&typeof te=="string"&&(te=s.Buffer.from(te,"utf8"));try{P.send(te)}catch(K){return le(K)}le()}function ae(te){P.close(),te()}return _};h.browserStreamBuilder=w}),lo={};$t(lo,{Server:()=>$e,Socket:()=>$e,Stream:()=>$e,_createServerHandle:()=>$e,_normalizeArgs:()=>$e,_setSimultaneousAccepts:()=>$e,connect:()=>$e,createConnection:()=>$e,createServer:()=>$e,default:()=>Va,isIP:()=>$e,isIPv4:()=>$e,isIPv6:()=>$e});function $e(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Va,Ka=it(()=>{he(),de(),pe(),Va={_createServerHandle:$e,_normalizeArgs:$e,_setSimultaneousAccepts:$e,connect:$e,createConnection:$e,createServer:$e,isIP:$e,isIPv4:$e,isIPv6:$e,Server:$e,Socket:$e,Stream:$e}}),Ha=me((h,f)=>{he(),de(),pe(),f.exports={}}),gs=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(h,"__esModule",{value:!0});var s=f((Ka(),Fe(lo))),l=f(bt()),c=f(Ha()),n=(0,l.default)("mqttjs:tcp"),t=(r,e)=>{if(e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost",e.socksProxy)return(0,c.default)(e.hostname,e.port,e.socksProxy,{timeout:e.socksTimeout});let{port:i,path:a}=e,d=e.hostname;return n("port %d and host %s",i,d),s.default.createConnection({port:i,host:d,path:a})};h.default=t}),Ga={};$t(Ga,{default:()=>Qa});var Qa,nc=it(()=>{he(),de(),pe(),Qa={}}),ys=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(h,"__esModule",{value:!0});var s=(nc(),Fe(Ga)),l=f((Ka(),Fe(lo))),c=f(bt()),n=f(Ha()),t=(0,c.default)("mqttjs:tls");function r(i){let{host:a,port:d,socksProxy:p,...b}=i;if(p!==void 0){let m=(0,n.default)(a,d,p,{timeout:i.socksTimeout});return(0,s.connect)({...b,socket:m})}return(0,s.connect)(i)}var e=(i,a)=>{a.port=a.port||8883,a.host=a.hostname||a.host||"localhost",l.default.isIP(a.host)===0&&(a.servername=a.host),a.rejectUnauthorized=a.rejectUnauthorized!==!1,delete a.path,t("port %d host %s rejectUnauthorized %b",a.port,a.host,a.rejectUnauthorized);let d=r(a);d.on("secureConnect",()=>{a.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",p)});function p(b){a.rejectUnauthorized&&i.emit("error",b),d.end()}return d.on("error",p),d};h.default=e}),bs=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=(Je(),Fe(Ye)),s=Dt(),l=ao(),c,n,t;function r(){let p=new s.Transform;return p._write=(b,m,S)=>{c.send({data:b.buffer,success(){S()},fail(w){S(new Error(w))}})},p._flush=b=>{c.close({success(){b()}})},p}function e(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function i(p,b){let m=p.protocol==="wxs"?"wss":"ws",S=`${m}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(S=`${m}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(S=p.transformWsUrl(S,p,b)),S}function a(){c.onOpen(()=>{t.socketReady()}),c.onMessage(p=>{let{data:b}=p;b instanceof ArrayBuffer?b=f.Buffer.from(b):b=f.Buffer.from(b,"utf8"),n.push(b)}),c.onClose(()=>{t.emit("close"),t.end(),t.destroy()}),c.onError(p=>{let b=new Error(p.errMsg);t.destroy(b)})}var d=(p,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let m=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";e(b);let S=i(b,p);c=wx.connectSocket({url:S,protocols:[m]}),n=r(),t=new l.BufferedDuplex(b,n,c),t._destroy=(A,g)=>{c.close({success(){g&&g(A)}})};let w=t.destroy;return t.destroy=(A,g)=>(t.destroy=w,setTimeout(()=>{c.close({fail(){t._destroy(A,g)}})},0),t),a(),t};h.default=d}),ms=me(h=>{he(),de(),pe(),Object.defineProperty(h,"__esModule",{value:!0});var f=(Je(),Fe(Ye)),s=Dt(),l=ao(),c,n,t,r=!1;function e(){let b=new s.Transform;return b._write=(m,S,w)=>{c.sendSocketMessage({data:m.buffer,success(){w()},fail(){w(new Error)}})},b._flush=m=>{c.closeSocket({success(){m()}})},b}function i(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function a(b,m){let S=b.protocol==="alis"?"wss":"ws",w=`${S}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(w=`${S}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(w=b.transformWsUrl(w,b,m)),w}function d(){r||(r=!0,c.onSocketOpen(()=>{t.socketReady()}),c.onSocketMessage(b=>{if(typeof b.data=="string"){let m=f.Buffer.from(b.data,"base64");n.push(m)}else{let m=new FileReader;m.addEventListener("load",()=>{if(m.result instanceof ArrayBuffer){n.push(f.Buffer.from(m.result));return}n.push(f.Buffer.from(m.result,"utf-8"))}),m.readAsArrayBuffer(b.data)}}),c.onSocketClose(()=>{t.end(),t.destroy()}),c.onSocketError(b=>{t.destroy(b)}))}var p=(b,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let S=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";i(m);let w=a(m,b);return c=m.my,c.connectSocket({url:w,protocols:S}),n=e(),t=new l.BufferedDuplex(m,n,c),d(),t};h.default=p}),ic=me(h=>{he(),de(),pe();var f=h&&h.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(h,"__esModule",{value:!0}),h.connectAsync=a;var s=f(bt()),l=f((tc(),Fe(Aa))),c=f(li()),n=f($r());typeof(Le==null?void 0:Le.nextTick)!="function"&&(Le.nextTick=setImmediate);var t=(0,s.default)("mqttjs"),r=null;function e(d){let p;if(d.auth)if(p=d.auth.match(/^(.+):(.+)$/),p){let[,b,m]=p;d.username=b,d.password=m}else d.username=d.auth}function i(d,p){var S,w,A;if(t("connecting to an MQTT broker..."),typeof d=="object"&&!p&&(p=d,d=""),p=p||{},d&&typeof d=="string"){let g=l.default.parse(d,!0),_={};if(g.port!=null&&(_.port=Number(g.port)),_.host=g.hostname,_.query=g.query,_.auth=g.auth,_.protocol=g.protocol,_.path=g.path,p={..._,...p},!p.protocol)throw new Error("Missing protocol");p.protocol=p.protocol.replace(/:$/,"")}if(p.unixSocket=p.unixSocket||((S=p.protocol)==null?void 0:S.includes("+unix")),p.unixSocket?p.protocol=p.protocol.replace("+unix",""):!((w=p.protocol)!=null&&w.startsWith("ws"))&&!((A=p.protocol)!=null&&A.startsWith("wx"))&&delete p.path,e(p),p.query&&typeof p.query.clientId=="string"&&(p.clientId=p.query.clientId),n.default||p.unixSocket?p.socksProxy=void 0:p.socksProxy===void 0&&typeof Le<"u"&&(p.socksProxy=Le.env.MQTTJS_SOCKS_PROXY),p.cert&&p.key)if(p.protocol){if(["mqtts","wss","wxs","alis"].indexOf(p.protocol)===-1)switch(p.protocol){case"mqtt":p.protocol="mqtts";break;case"ws":p.protocol="wss";break;case"wx":p.protocol="wxs";break;case"ali":p.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${p.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(r||(r={},!n.default&&!p.forceNativeWebSocket?(r.ws=lr().streamBuilder,r.wss=lr().streamBuilder,r.mqtt=gs().default,r.tcp=gs().default,r.ssl=ys().default,r.tls=r.ssl,r.mqtts=ys().default):(r.ws=lr().browserStreamBuilder,r.wss=lr().browserStreamBuilder,r.wx=bs().default,r.wxs=bs().default,r.ali=ms().default,r.alis=ms().default)),!r[p.protocol]){let g=["mqtts","wss"].indexOf(p.protocol)!==-1;p.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((_,E)=>g&&E%2===0?!1:typeof r[_]=="function")[0]}if(p.clean===!1&&!p.clientId)throw new Error("Missing clientId for unclean clients");p.protocol&&(p.defaultProtocol=p.protocol);function b(g){return p.servers&&((!g._reconnectCount||g._reconnectCount===p.servers.length)&&(g._reconnectCount=0),p.host=p.servers[g._reconnectCount].host,p.port=p.servers[g._reconnectCount].port,p.protocol=p.servers[g._reconnectCount].protocol?p.servers[g._reconnectCount].protocol:p.defaultProtocol,p.hostname=p.host,g._reconnectCount++),t("calling streambuilder for",p.protocol),r[p.protocol](g,p)}let m=new c.default(b,p);return m.on("error",()=>{}),m}function a(d,p,b=!0){return new Promise((m,S)=>{let w=i(d,p),A={connect:_=>{g(),m(w)},end:()=>{g(),m(w)},error:_=>{g(),w.end(),S(_)}};b===!1&&(A.close=()=>{A.error(new Error("Couldn't connect to server"))});function g(){Object.keys(A).forEach(_=>{w.off(_,A[_])})}Object.keys(A).forEach(_=>{w.on(_,A[_])})})}h.default=i}),vs=me(h=>{he(),de(),pe();var f=h&&h.__createBinding||(Object.create?function(b,m,S,w){w===void 0&&(w=S);var A=Object.getOwnPropertyDescriptor(m,S);(!A||("get"in A?!m.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return m[S]}}),Object.defineProperty(b,w,A)}:function(b,m,S,w){w===void 0&&(w=S),b[w]=m[S]}),s=h&&h.__setModuleDefault||(Object.create?function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}:function(b,m){b.default=m}),l=h&&h.__importStar||function(){var b=function(m){return b=Object.getOwnPropertyNames||function(S){var w=[];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(w[w.length]=A);return w},b(m)};return function(m){if(m&&m.__esModule)return m;var S={};if(m!=null)for(var w=b(m),A=0;A<w.length;A++)w[A]!=="default"&&f(S,m,w[A]);return s(S,m),S}}(),c=h&&h.__exportStar||function(b,m){for(var S in b)S!=="default"&&!Object.prototype.hasOwnProperty.call(m,S)&&f(m,b,S)},n=h&&h.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(h,"__esModule",{value:!0}),h.ReasonCodes=h.KeepaliveManager=h.UniqueMessageIdProvider=h.DefaultMessageIdProvider=h.Store=h.MqttClient=h.connectAsync=h.connect=h.Client=void 0;var t=n(li());h.MqttClient=t.default;var r=n(fa());h.DefaultMessageIdProvider=r.default;var e=n(yu());h.UniqueMessageIdProvider=e.default;var i=n(Gs());h.Store=i.default;var a=l(ic());h.connect=a.default,Object.defineProperty(h,"connectAsync",{enumerable:!0,get:function(){return a.connectAsync}});var d=n(ma());h.KeepaliveManager=d.default,h.Client=t.default,c(li(),h),c(Vt(),h);var p=Wr();Object.defineProperty(h,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})}),oc=me(h=>{he(),de(),pe();var f=h&&h.__createBinding||(Object.create?function(t,r,e,i){i===void 0&&(i=e);var a=Object.getOwnPropertyDescriptor(r,e);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,i,a)}:function(t,r,e,i){i===void 0&&(i=e),t[i]=r[e]}),s=h&&h.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),l=h&&h.__importStar||function(){var t=function(r){return t=Object.getOwnPropertyNames||function(e){var i=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[i.length]=a);return i},t(r)};return function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var i=t(r),a=0;a<i.length;a++)i[a]!=="default"&&f(e,r,i[a]);return s(e,r),e}}(),c=h&&h.__exportStar||function(t,r){for(var e in t)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&f(r,t,e)};Object.defineProperty(h,"__esModule",{value:!0});var n=l(vs());h.default=n,c(vs(),h)});const ac=oc();/*! Bundled license information:

@jspm/core/nodelibs/browser/chunk-DtuTasat.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@babel/runtime/helpers/regenerator.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/export{ac as default};
